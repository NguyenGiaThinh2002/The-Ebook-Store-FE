var tn=Object.defineProperty;var sn=(e,t,n)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var nt=(e,t,n)=>(sn(e,typeof t!="symbol"?t+"":t,n),n),$t=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var a=(e,t,n)=>($t(e,t,"read from private field"),n?n.call(e):t.get(e)),X=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ge=(e,t,n,s)=>($t(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);var _t=(e,t,n,s)=>({set _(i){ge(e,t,i,n)},get _(){return a(e,t,s)}}),re=(e,t,n)=>($t(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function makeMap(e,t){const n=Object.create(null),s=e.split(",");for(let i=0;i<s.length;i++)n[s[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$1=Object.assign,remove=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$2.call(e,t),isArray$2=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction$1=e=>typeof e=="function",isString$1=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject$1=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$1(e)&&isFunction$1(e.then)&&isFunction$1(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject$1=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString$1(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},def=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$2(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=isString$1(s)?parseStringStyle(s):normalizeStyle(s);if(i)for(const r in i)t[r]=i[r]}return t}else{if(isString$1(e))return e;if(isObject$1(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const s=n.split(propertyDelimiterRE);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function normalizeClass(e){let t="";if(isString$1(e))t=e;else if(isArray$2(e))for(let n=0;n<e.length;n++){const s=normalizeClass(e[n]);s&&(t+=s+" ")}else if(isObject$1(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const toDisplayString=e=>isString$1(e)?e:e==null?"":isArray$2(e)||isObject$1(e)&&(e.toString===objectToString||!isFunction$1(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i])=>(n[`${s} =>`]=i,n),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject$1(t)&&!isArray$2(t)&&!isPlainObject$1(t)?String(t):t;let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const i=t[s];wasTracked(i)&&!newTracked(i)?i.delete(e):t[n++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}t.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,s)}run(){if(!this.active)return this.fn();let t=activeEffect,n=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,n){if(shouldTrack&&activeEffect){let s=targetMap.get(e);s||targetMap.set(e,s=new Map);let i=s.get(n);i||s.set(n,i=createDep()),trackEffects(i)}}function trackEffects(e,t){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,n=!wasTracked(e)):n=!e.has(activeEffect),n&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,n,s,i,r){const o=targetMap.get(e);if(!o)return;let b=[];if(t==="clear")b=[...o.values()];else if(n==="length"&&isArray$2(e)){const u=Number(s);o.forEach((c,l)=>{(l==="length"||l>=u)&&b.push(c)})}else switch(n!==void 0&&b.push(o.get(n)),t){case"add":isArray$2(e)?isIntegerKey(n)&&b.push(o.get("length")):(b.push(o.get(ITERATE_KEY)),isMap(e)&&b.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(e)||(b.push(o.get(ITERATE_KEY)),isMap(e)&&b.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&b.push(o.get(ITERATE_KEY));break}if(b.length===1)b[0]&&triggerEffects(b[0]);else{const u=[];for(const c of b)c&&u.push(...c);triggerEffects(createDep(u))}}function triggerEffects(e,t){const n=isArray$2(e)?e:[...e];for(const s of n)s.computed&&triggerEffect(s);for(const s of n)s.computed||triggerEffect(s)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=toRaw(this);for(let r=0,o=this.length;r<o;r++)track(s,"get",r+"");const i=s[t](...n);return i===-1||i===!1?s[t](...n.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){pauseTracking();const s=toRaw(this)[t].apply(this,n);return resetTracking(),s}}),e}function hasOwnProperty$1(e){const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}function createGetter(e=!1,t=!1){return function(s,i,r){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&r===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(s))return s;const o=isArray$2(s);if(!e){if(o&&hasOwn(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,r);if(i==="hasOwnProperty")return hasOwnProperty$1}const b=Reflect.get(s,i,r);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(e||track(s,"get",i),t)?b:isRef(b)?o&&isIntegerKey(i)?b:b.value:isObject$1(b)?e?readonly(b):reactive(b):b}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(n,s,i,r){let o=n[s];if(isReadonly(o)&&isRef(o)&&!isRef(i))return!1;if(!e&&(!isShallow(i)&&!isReadonly(i)&&(o=toRaw(o),i=toRaw(i)),!isArray$2(n)&&isRef(o)&&!isRef(i)))return o.value=i,!0;const b=isArray$2(n)&&isIntegerKey(s)?Number(s)<n.length:hasOwn(n,s),u=Reflect.set(n,s,i,r);return n===toRaw(r)&&(b?hasChanged(i,o)&&trigger(n,"set",s,i):trigger(n,"add",s,i)),u}}function deleteProperty(e,t){const n=hasOwn(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&trigger(e,"delete",t,void 0),s}function has$1(e,t){const n=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),n}function ownKeys(e){return track(e,"iterate",isArray$2(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,n=!1,s=!1){e=e.__v_raw;const i=toRaw(e),r=toRaw(t);n||(t!==r&&track(i,"get",t),track(i,"get",r));const{has:o}=getProto(i),b=s?toShallow:n?toReadonly:toReactive;if(o.call(i,t))return b(e.get(t));if(o.call(i,r))return b(e.get(r));e!==i&&e.get(t)}function has(e,t=!1){const n=this.__v_raw,s=toRaw(n),i=toRaw(e);return t||(e!==i&&track(s,"has",e),track(s,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set(e,t){t=toRaw(t);const n=toRaw(this),{has:s,get:i}=getProto(n);let r=s.call(n,e);r||(e=toRaw(e),r=s.call(n,e));const o=i.call(n,e);return n.set(e,t),r?hasChanged(t,o)&&trigger(n,"set",e,t):trigger(n,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:n,get:s}=getProto(t);let i=n.call(t,e);i||(e=toRaw(e),i=n.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return i&&trigger(t,"delete",e,void 0),r}function clear(){const e=toRaw(this),t=e.size!==0,n=e.clear();return t&&trigger(e,"clear",void 0,void 0),n}function createForEach(e,t){return function(s,i){const r=this,o=r.__v_raw,b=toRaw(o),u=t?toShallow:e?toReadonly:toReactive;return!e&&track(b,"iterate",ITERATE_KEY),o.forEach((c,l)=>s.call(i,u(c),u(l),r))}}function createIterableMethod(e,t,n){return function(...s){const i=this.__v_raw,r=toRaw(i),o=isMap(r),b=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,c=i[e](...s),l=n?toShallow:t?toReadonly:toReactive;return!t&&track(r,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:A,done:T}=c.next();return T?{value:A,done:T}:{value:b?[l(A[0]),l(A[1])]:l(A),done:T}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(r){return get(this,r)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(r){return get(this,r,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(r){return get(this,r,!0)},get size(){return size(this,!0)},has(r){return has.call(this,r,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},s={get(r){return get(this,r,!0,!0)},get size(){return size(this,!0)},has(r){return has.call(this,r,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=createIterableMethod(r,!1,!1),n[r]=createIterableMethod(r,!0,!1),t[r]=createIterableMethod(r,!1,!0),s[r]=createIterableMethod(r,!0,!0)}),[e,n,t,s]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const n=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(hasOwn(n,i)&&i in s?n:s,i,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,n,s,i){if(!isObject$1(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=i.get(e);if(r)return r;const o=getTargetType(e);if(o===0)return e;const b=new Proxy(e,o===2?s:n);return i.set(e,b),b}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$1(e)?reactive(e):e,toReadonly=e=>isObject$1(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e);const n=e.dep;n&&triggerEffects(n)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:toRaw(t),this._value=n?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const n=this.__v_isShallow||isShallow(t)||isReadonly(t);t=n?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,n)=>unref(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return isRef(i)&&!isRef(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,n,s,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(e,t,n=!1){let s,i;const r=isFunction$1(e);return r?(s=e,i=NOOP):(s=e.get,i=e.set),new ComputedRefImpl(s,i,r||!i,n)}function warn(e,...t){}function callWithErrorHandling(e,t,n,s){let i;try{i=s?e(...s):e()}catch(r){handleError(r,t,n)}return i}function callWithAsyncErrorHandling(e,t,n,s){if(isFunction$1(e)){const r=callWithErrorHandling(e,t,n,s);return r&&isPromise(r)&&r.catch(o=>{handleError(o,t,n)}),r}const i=[];for(let r=0;r<e.length;r++)i.push(callWithAsyncErrorHandling(e[r],t,n,s));return i}function handleError(e,t,n,s=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,b=n;for(;r;){const c=r.ec;if(c){for(let l=0;l<c.length;l++)if(c[l](e,o,b)===!1)return}r=r.parent}const u=t.appContext.config.errorHandler;if(u){callWithErrorHandling(u,null,10,[e,o,b]);return}}logError(e,n,i,s)}function logError(e,t,n,s=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,n=queue.length;for(;t<n;){const s=t+n>>>1;getId(queue[s])<e?t=s+1:n=s}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$2(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const n=queue[t];n&&n.pre&&(queue.splice(t,1),t--,n())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((n,s)=>getId(n)-getId(s)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const n=getId(e)-getId(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||EMPTY_OBJ;let i=n;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in s){const l=`${o==="modelValue"?"model":o}Modifiers`,{number:A,trim:T}=s[l]||EMPTY_OBJ;T&&(i=n.map(R=>isString$1(R)?R.trim():R)),A&&(i=n.map(looseToNumber))}let b,u=s[b=toHandlerKey(t)]||s[b=toHandlerKey(camelize(t))];!u&&r&&(u=s[b=toHandlerKey(hyphenate(t))]),u&&callWithAsyncErrorHandling(u,e,6,i);const c=s[b+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[b])return;e.emitted[b]=!0,callWithAsyncErrorHandling(c,e,6,i)}}function normalizeEmitsOptions(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},b=!1;if(!isFunction$1(e)){const u=c=>{const l=normalizeEmitsOptions(c,t,!0);l&&(b=!0,extend$1(o,l))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!r&&!b?(isObject$1(e)&&s.set(e,null),null):(isArray$2(r)?r.forEach(u=>o[u]=null):extend$1(o,r),isObject$1(e)&&s.set(e,o),o)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(t);let o;try{o=e(...i)}finally{setCurrentRenderingInstance(r),s._d&&setBlockTracking(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:b,attrs:u,emit:c,render:l,renderCache:A,data:T,setupState:R,ctx:S,inheritAttrs:P}=e;let x,M;const I=setCurrentRenderingInstance(e);try{if(n.shapeFlag&4){const O=i||s;x=normalizeVNode(l.call(O,O,A,r,R,T,S)),M=u}else{const O=t;x=normalizeVNode(O.length>1?O(r,{attrs:u,slots:b,emit:c}):O(r,null)),M=t.props?u:getFunctionalFallthrough(u)}}catch(O){blockStack.length=0,handleError(O,e,1),x=createVNode(Comment)}let B=x;if(M&&P!==!1){const O=Object.keys(M),{shapeFlag:v}=B;O.length&&v&7&&(o&&O.some(isModelListener)&&(M=filterModelListeners(M,o)),B=cloneVNode(B,M))}return n.dirs&&(B=cloneVNode(B),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&(B.transition=n.transition),x=B,setCurrentRenderingInstance(I),x}const getFunctionalFallthrough=e=>{let t;for(const n in e)(n==="class"||n==="style"||isOn(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{const n={};for(const s in e)(!isModelListener(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function shouldUpdateComponent(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:b,patchFlag:u}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?hasPropsChanged(s,o,c):!!o;if(u&8){const l=t.dynamicProps;for(let A=0;A<l.length;A++){const T=l[A];if(o[T]!==s[T]&&!isEmitListener(c,T))return!0}}}else return(i||b)&&(!b||!b.$stable)?!0:s===o?!1:s?o?hasPropsChanged(s,o,c):!0:!!o;return!1}function hasPropsChanged(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!isEmitListener(n,r))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$2(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const INITIAL_WATCHER_VALUE={};function watch(e,t,n){return doWatch(e,t,n)}function doWatch(e,t,{immediate:n,deep:s,flush:i,onTrack:r,onTrigger:o}=EMPTY_OBJ){var b;const u=getCurrentScope()===((b=currentInstance)==null?void 0:b.scope)?currentInstance:null;let c,l=!1,A=!1;if(isRef(e)?(c=()=>e.value,l=isShallow(e)):isReactive(e)?(c=()=>e,s=!0):isArray$2(e)?(A=!0,l=e.some(O=>isReactive(O)||isShallow(O)),c=()=>e.map(O=>{if(isRef(O))return O.value;if(isReactive(O))return traverse(O);if(isFunction$1(O))return callWithErrorHandling(O,u,2)})):isFunction$1(e)?t?c=()=>callWithErrorHandling(e,u,2):c=()=>{if(!(u&&u.isUnmounted))return T&&T(),callWithAsyncErrorHandling(e,u,3,[R])}:c=NOOP,t&&s){const O=c;c=()=>traverse(O())}let T,R=O=>{T=I.onStop=()=>{callWithErrorHandling(O,u,4)}},S;if(isInSSRComponentSetup)if(R=NOOP,t?n&&callWithAsyncErrorHandling(t,u,3,[c(),A?[]:void 0,R]):c(),i==="sync"){const O=useSSRContext();S=O.__watcherHandles||(O.__watcherHandles=[])}else return NOOP;let P=A?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const x=()=>{if(I.active)if(t){const O=I.run();(s||l||(A?O.some((v,C)=>hasChanged(v,P[C])):hasChanged(O,P)))&&(T&&T(),callWithAsyncErrorHandling(t,u,3,[O,P===INITIAL_WATCHER_VALUE?void 0:A&&P[0]===INITIAL_WATCHER_VALUE?[]:P,R]),P=O)}else I.run()};x.allowRecurse=!!t;let M;i==="sync"?M=x:i==="post"?M=()=>queuePostRenderEffect(x,u&&u.suspense):(x.pre=!0,u&&(x.id=u.uid),M=()=>queueJob(x));const I=new ReactiveEffect(c,M);t?n?x():P=I.run():i==="post"?queuePostRenderEffect(I.run.bind(I),u&&u.suspense):I.run();const B=()=>{I.stop(),u&&u.scope&&remove(u.scope.effects,I)};return S&&S.push(B),B}function instanceWatch(e,t,n){const s=this.proxy,i=isString$1(e)?e.includes(".")?createPathGetter(s,e):()=>s[e]:e.bind(s,s);let r;isFunction$1(t)?r=t:(r=t.handler,n=t);const o=currentInstance;setCurrentInstance(this);const b=doWatch(i,r.bind(s),n);return o?setCurrentInstance(o):unsetCurrentInstance(),b}function createPathGetter(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function traverse(e,t){if(!isObject$1(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray$2(e))for(let n=0;n<e.length;n++)traverse(e[n],t);else if(isSet(e)||isMap(e))e.forEach(n=>{traverse(n,t)});else if(isPlainObject$1(e))for(const n in e)traverse(e[n],t);return e}function withDirectives(e,t){const n=currentRenderingInstance;if(n===null)return e;const s=getExposeProxy(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,b,u,c=EMPTY_OBJ]=t[r];o&&(isFunction$1(o)&&(o={mounted:o,updated:o}),o.deep&&traverse(b),i.push({dir:o,instance:s,value:b,oldValue:void 0,arg:u,modifiers:c}))}return e}function invokeDirectiveHook(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const b=i[o];r&&(b.oldValue=r[o].value);let u=b.dir[s];u&&(pauseTracking(),callWithAsyncErrorHandling(u,n,8,[e.el,b,e,t]),resetTracking())}}function defineComponent(e,t){return isFunction$1(e)?(()=>extend$1({name:e.name},t,{setup:e}))():e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=currentInstance){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(injectHook(t,s,n),n){let i=n.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(s,t,n,i),i=i.parent}}function injectToKeepAliveRoot(e,t,n,s){const i=injectHook(t,e,s,!0);onUnmounted(()=>{remove(s[t],i)},n)}function injectHook(e,t,n=currentInstance,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const b=callWithAsyncErrorHandling(t,n,e,o);return unsetCurrentInstance(),resetTracking(),b});return s?i.unshift(r):i.push(r),r}}const createHook=e=>(t,n=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...s)=>t(...s),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const COMPONENTS="components";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(e,t,n=!0,s=!1){const i=currentRenderingInstance||currentInstance;if(i){const r=i.type;if(e===COMPONENTS){const b=getComponentName(r,!1);if(b&&(b===t||b===camelize(t)||b===capitalize(camelize(t))))return r}const o=resolve(i[e]||r[e],t)||resolve(i.appContext[e],t);return!o&&s?r:o}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize(camelize(t))])}function renderList(e,t,n,s){let i;const r=n&&n[s];if(isArray$2(e)||isString$1(e)){i=new Array(e.length);for(let o=0,b=e.length;o<b;o++)i[o]=t(e[o],o,void 0,r&&r[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,r&&r[o])}else if(isObject$1(e))if(e[Symbol.iterator])i=Array.from(e,(o,b)=>t(o,b,void 0,r&&r[b]));else{const o=Object.keys(e);i=new Array(o.length);for(let b=0,u=o.length;b<u;b++){const c=o[b];i[b]=t(e[c],c,b,r&&r[b])}}else i=[];return n&&(n[s]=i),i}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:b,appContext:u}=e;let c;if(t[0]!=="$"){const R=o[t];if(R!==void 0)switch(R){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(hasSetupBinding(s,t))return o[t]=1,s[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&hasOwn(c,t))return o[t]=3,r[t];if(n!==EMPTY_OBJ&&hasOwn(n,t))return o[t]=4,n[t];shouldCacheAccess&&(o[t]=0)}}const l=publicPropertiesMap[t];let A,T;if(l)return t==="$attrs"&&track(e,"get",t),l(e);if((A=b.__cssModules)&&(A=A[t]))return A;if(n!==EMPTY_OBJ&&hasOwn(n,t))return o[t]=4,n[t];if(T=u.config.globalProperties,hasOwn(T,t))return T[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return hasSetupBinding(i,t)?(i[t]=n,!0):s!==EMPTY_OBJ&&hasOwn(s,t)?(s[t]=n,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let b;return!!n[o]||e!==EMPTY_OBJ&&hasOwn(e,o)||hasSetupBinding(t,o)||(b=r[0])&&hasOwn(b,o)||hasOwn(s,o)||hasOwn(publicPropertiesMap,o)||hasOwn(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:hasOwn(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function normalizePropsOrEmits(e){return isArray$2(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),n=e.proxy,s=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:b,provide:u,inject:c,created:l,beforeMount:A,mounted:T,beforeUpdate:R,updated:S,activated:P,deactivated:x,beforeDestroy:M,beforeUnmount:I,destroyed:B,unmounted:O,render:v,renderTracked:C,renderTriggered:z,errorCaptured:N,serverPrefetch:E,expose:j,inheritAttrs:L,components:Z,directives:se,filters:V}=t;if(c&&resolveInjections(c,s,null),o)for(const he in o){const Y=o[he];isFunction$1(Y)&&(s[he]=Y.bind(n))}if(i){const he=i.call(n,n);isObject$1(he)&&(e.data=reactive(he))}if(shouldCacheAccess=!0,r)for(const he in r){const Y=r[he],Ae=isFunction$1(Y)?Y.bind(n,n):isFunction$1(Y.get)?Y.get.bind(n,n):NOOP,Se=!isFunction$1(Y)&&isFunction$1(Y.set)?Y.set.bind(n):NOOP,ke=computed({get:Ae,set:Se});Object.defineProperty(s,he,{enumerable:!0,configurable:!0,get:()=>ke.value,set:Re=>ke.value=Re})}if(b)for(const he in b)createWatcher(b[he],s,n,he);if(u){const he=isFunction$1(u)?u.call(n):u;Reflect.ownKeys(he).forEach(Y=>{provide(Y,he[Y])})}l&&callHook(l,e,"c");function de(he,Y){isArray$2(Y)?Y.forEach(Ae=>he(Ae.bind(n))):Y&&he(Y.bind(n))}if(de(onBeforeMount,A),de(onMounted,T),de(onBeforeUpdate,R),de(onUpdated,S),de(onActivated,P),de(onDeactivated,x),de(onErrorCaptured,N),de(onRenderTracked,C),de(onRenderTriggered,z),de(onBeforeUnmount,I),de(onUnmounted,O),de(onServerPrefetch,E),isArray$2(j))if(j.length){const he=e.exposed||(e.exposed={});j.forEach(Y=>{Object.defineProperty(he,Y,{get:()=>n[Y],set:Ae=>n[Y]=Ae})})}else e.exposed||(e.exposed={});v&&e.render===NOOP&&(e.render=v),L!=null&&(e.inheritAttrs=L),Z&&(e.components=Z),se&&(e.directives=se)}function resolveInjections(e,t,n=NOOP){isArray$2(e)&&(e=normalizeInject(e));for(const s in e){const i=e[s];let r;isObject$1(i)?"default"in i?r=inject(i.from||s,i.default,!0):r=inject(i.from||s):r=inject(i),isRef(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function callHook(e,t,n){callWithAsyncErrorHandling(isArray$2(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,s){const i=s.includes(".")?createPathGetter(n,s):()=>n[s];if(isString$1(e)){const r=t[e];isFunction$1(r)&&watch(i,r)}else if(isFunction$1(e))watch(i,e.bind(n));else if(isObject$1(e))if(isArray$2(e))e.forEach(r=>createWatcher(r,t,n,s));else{const r=isFunction$1(e.handler)?e.handler.bind(n):t[e.handler];isFunction$1(r)&&watch(i,r,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,b=r.get(t);let u;return b?u=b:!i.length&&!n&&!s?u=t:(u={},i.length&&i.forEach(c=>mergeOptions$1(u,c,o,!0)),mergeOptions$1(u,t,o)),isObject$1(t)&&r.set(t,u),u}function mergeOptions$1(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&mergeOptions$1(e,r,n,!0),i&&i.forEach(o=>mergeOptions$1(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const b=internalOptionMergeStrats[o]||n&&n[o];e[o]=b?b(e[o],t[o]):t[o]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$1(isFunction$1(e)?e.call(this,this):e,isFunction$1(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$2(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$1(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$2(e)&&isArray$2(t)?[...new Set([...e,...t])]:extend$1(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const n=extend$1(Object.create(null),e);for(const s in t)n[s]=mergeAsArray(e[s],t[s]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(s,i=null){isFunction$1(s)||(s=extend$1({},s)),i!=null&&!isObject$1(i)&&(i=null);const r=createAppContext(),o=new Set;let b=!1;const u=r.app={_uid:uid$1++,_component:s,_props:i,_container:null,_context:r,_instance:null,version,get config(){return r.config},set config(c){},use(c,...l){return o.has(c)||(c&&isFunction$1(c.install)?(o.add(c),c.install(u,...l)):isFunction$1(c)&&(o.add(c),c(u,...l))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,l){return l?(r.components[c]=l,u):r.components[c]},directive(c,l){return l?(r.directives[c]=l,u):r.directives[c]},mount(c,l,A){if(!b){const T=createVNode(s,i);return T.appContext=r,l&&t?t(T,c):e(T,c,A),b=!0,u._container=c,c.__vue_app__=u,getExposeProxy(T.component)||T.component.proxy}},unmount(){b&&(e(null,u._container),delete u._container.__vue_app__)},provide(c,l){return r.provides[c]=l,u},runWithContext(c){currentApp=u;try{return c()}finally{currentApp=null}}};return u}}let currentApp=null;function provide(e,t){if(currentInstance){let n=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===n&&(n=currentInstance.provides=Object.create(s)),n[e]=t}}function inject(e,t,n=!1){const s=currentInstance||currentRenderingInstance;if(s||currentApp){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:currentApp._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&isFunction$1(t)?t.call(s&&s.proxy):t}}function initProps(e,t,n,s=!1){const i={},r={};def(r,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:shallowReactive(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function updateProps(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,b=toRaw(i),[u]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const l=e.vnode.dynamicProps;for(let A=0;A<l.length;A++){let T=l[A];if(isEmitListener(e.emitsOptions,T))continue;const R=t[T];if(u)if(hasOwn(r,T))R!==r[T]&&(r[T]=R,c=!0);else{const S=camelize(T);i[S]=resolvePropValue(u,b,S,R,e,!1)}else R!==r[T]&&(r[T]=R,c=!0)}}}else{setFullProps(e,t,i,r)&&(c=!0);let l;for(const A in b)(!t||!hasOwn(t,A)&&((l=hyphenate(A))===A||!hasOwn(t,l)))&&(u?n&&(n[A]!==void 0||n[l]!==void 0)&&(i[A]=resolvePropValue(u,b,A,void 0,e,!0)):delete i[A]);if(r!==b)for(const A in r)(!t||!hasOwn(t,A))&&(delete r[A],c=!0)}c&&trigger(e,"set","$attrs")}function setFullProps(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,b;if(t)for(let u in t){if(isReservedProp(u))continue;const c=t[u];let l;i&&hasOwn(i,l=camelize(u))?!r||!r.includes(l)?n[l]=c:(b||(b={}))[l]=c:isEmitListener(e.emitsOptions,u)||(!(u in s)||c!==s[u])&&(s[u]=c,o=!0)}if(r){const u=toRaw(n),c=b||EMPTY_OBJ;for(let l=0;l<r.length;l++){const A=r[l];n[A]=resolvePropValue(i,u,A,c[A],e,!hasOwn(c,A))}}return o}function resolvePropValue(e,t,n,s,i,r){const o=e[n];if(o!=null){const b=hasOwn(o,"default");if(b&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction$1(u)){const{propsDefaults:c}=i;n in c?s=c[n]:(setCurrentInstance(i),s=c[n]=u.call(null,t),unsetCurrentInstance())}else s=u}o[0]&&(r&&!b?s=!1:o[1]&&(s===""||s===hyphenate(n))&&(s=!0))}return s}function normalizePropsOptions(e,t,n=!1){const s=t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},b=[];let u=!1;if(!isFunction$1(e)){const l=A=>{u=!0;const[T,R]=normalizePropsOptions(A,t,!0);extend$1(o,T),R&&b.push(...R)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!r&&!u)return isObject$1(e)&&s.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$2(r))for(let l=0;l<r.length;l++){const A=camelize(r[l]);validatePropName(A)&&(o[A]=EMPTY_OBJ)}else if(r)for(const l in r){const A=camelize(l);if(validatePropName(A)){const T=r[l],R=o[A]=isArray$2(T)||isFunction$1(T)?{type:T}:extend$1({},T);if(R){const S=getTypeIndex(Boolean,R.type),P=getTypeIndex(String,R.type);R[0]=S>-1,R[1]=P<0||S<P,(S>-1||hasOwn(R,"default"))&&b.push(A)}}}const c=[o,b];return isObject$1(e)&&s.set(e,c),c}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$2(t)?t.findIndex(n=>isSameType(n,e)):isFunction$1(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$2(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,n)=>{if(t._n)return t;const s=withCtx((...i)=>normalizeSlotValue(t(...i)),n);return s._c=!1,s},normalizeObjectSlots=(e,t,n)=>{const s=e._ctx;for(const i in e){if(isInternalKey(i))continue;const r=e[i];if(isFunction$1(r))t[i]=normalizeSlot$1(i,r,s);else if(r!=null){const o=normalizeSlotValue(r);t[i]=()=>o}}},normalizeVNodeSlots=(e,t)=>{const n=normalizeSlotValue(t);e.slots.default=()=>n},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=toRaw(t),def(t,"_",n)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=EMPTY_OBJ;if(s.shapeFlag&32){const b=t._;b?n&&b===1?r=!1:(extend$1(i,t),!n&&b===1&&delete i._):(r=!t.$stable,normalizeObjectSlots(t,i)),o=t}else t&&(normalizeVNodeSlots(e,t),o={default:1});if(r)for(const b in i)!isInternalKey(b)&&!(b in o)&&delete i[b]};function setRef(e,t,n,s,i=!1){if(isArray$2(e)){e.forEach((T,R)=>setRef(T,t&&(isArray$2(t)?t[R]:t),n,s,i));return}if(isAsyncWrapper(s)&&!i)return;const r=s.shapeFlag&4?getExposeProxy(s.component)||s.component.proxy:s.el,o=i?null:r,{i:b,r:u}=e,c=t&&t.r,l=b.refs===EMPTY_OBJ?b.refs={}:b.refs,A=b.setupState;if(c!=null&&c!==u&&(isString$1(c)?(l[c]=null,hasOwn(A,c)&&(A[c]=null)):isRef(c)&&(c.value=null)),isFunction$1(u))callWithErrorHandling(u,b,12,[o,l]);else{const T=isString$1(u),R=isRef(u);if(T||R){const S=()=>{if(e.f){const P=T?hasOwn(A,u)?A[u]:l[u]:u.value;i?isArray$2(P)&&remove(P,r):isArray$2(P)?P.includes(r)||P.push(r):T?(l[u]=[r],hasOwn(A,u)&&(A[u]=l[u])):(u.value=[r],e.k&&(l[e.k]=u.value))}else T?(l[u]=o,hasOwn(A,u)&&(A[u]=o)):R&&(u.value=o,e.k&&(l[e.k]=o))};o?(S.id=-1,queuePostRenderEffect(S,n)):S()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const n=getGlobalThis();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:b,createComment:u,setText:c,setElementText:l,parentNode:A,nextSibling:T,setScopeId:R=NOOP,insertStaticContent:S}=e,P=(w,F,U,K=null,ne=null,ee=null,ye=!1,ve=null,fe=!!F.dynamicChildren)=>{if(w===F)return;w&&!isSameVNodeType(w,F)&&(K=f(w),Re(w,ne,ee,!0),w=null),F.patchFlag===-2&&(fe=!1,F.dynamicChildren=null);const{type:me,ref:pe,shapeFlag:J}=F;switch(me){case Text:x(w,F,U,K);break;case Comment:M(w,F,U,K);break;case Static:w==null&&I(F,U,K,ye);break;case Fragment:Z(w,F,U,K,ne,ee,ye,ve,fe);break;default:J&1?v(w,F,U,K,ne,ee,ye,ve,fe):J&6?se(w,F,U,K,ne,ee,ye,ve,fe):(J&64||J&128)&&me.process(w,F,U,K,ne,ee,ye,ve,fe,k)}pe!=null&&ne&&setRef(pe,w&&w.ref,ee,F||w,!F)},x=(w,F,U,K)=>{if(w==null)s(F.el=b(F.children),U,K);else{const ne=F.el=w.el;F.children!==w.children&&c(ne,F.children)}},M=(w,F,U,K)=>{w==null?s(F.el=u(F.children||""),U,K):F.el=w.el},I=(w,F,U,K)=>{[w.el,w.anchor]=S(w.children,F,U,K,w.el,w.anchor)},B=({el:w,anchor:F},U,K)=>{let ne;for(;w&&w!==F;)ne=T(w),s(w,U,K),w=ne;s(F,U,K)},O=({el:w,anchor:F})=>{let U;for(;w&&w!==F;)U=T(w),i(w),w=U;i(F)},v=(w,F,U,K,ne,ee,ye,ve,fe)=>{ye=ye||F.type==="svg",w==null?C(F,U,K,ne,ee,ye,ve,fe):E(w,F,ne,ee,ye,ve,fe)},C=(w,F,U,K,ne,ee,ye,ve)=>{let fe,me;const{type:pe,props:J,shapeFlag:Q,transition:ue,dirs:Ee}=w;if(fe=w.el=o(w.type,ee,J&&J.is,J),Q&8?l(fe,w.children):Q&16&&N(w.children,fe,null,K,ne,ee&&pe!=="foreignObject",ye,ve),Ee&&invokeDirectiveHook(w,null,K,"created"),z(fe,w,w.scopeId,ye,K),J){for(const Ne in J)Ne!=="value"&&!isReservedProp(Ne)&&r(fe,Ne,null,J[Ne],ee,w.children,K,ne,g);"value"in J&&r(fe,"value",null,J.value),(me=J.onVnodeBeforeMount)&&invokeVNodeHook(me,K,w)}Ee&&invokeDirectiveHook(w,null,K,"beforeMount");const we=(!ne||ne&&!ne.pendingBranch)&&ue&&!ue.persisted;we&&ue.beforeEnter(fe),s(fe,F,U),((me=J&&J.onVnodeMounted)||we||Ee)&&queuePostRenderEffect(()=>{me&&invokeVNodeHook(me,K,w),we&&ue.enter(fe),Ee&&invokeDirectiveHook(w,null,K,"mounted")},ne)},z=(w,F,U,K,ne)=>{if(U&&R(w,U),K)for(let ee=0;ee<K.length;ee++)R(w,K[ee]);if(ne){let ee=ne.subTree;if(F===ee){const ye=ne.vnode;z(w,ye,ye.scopeId,ye.slotScopeIds,ne.parent)}}},N=(w,F,U,K,ne,ee,ye,ve,fe=0)=>{for(let me=fe;me<w.length;me++){const pe=w[me]=ve?cloneIfMounted(w[me]):normalizeVNode(w[me]);P(null,pe,F,U,K,ne,ee,ye,ve)}},E=(w,F,U,K,ne,ee,ye)=>{const ve=F.el=w.el;let{patchFlag:fe,dynamicChildren:me,dirs:pe}=F;fe|=w.patchFlag&16;const J=w.props||EMPTY_OBJ,Q=F.props||EMPTY_OBJ;let ue;U&&toggleRecurse(U,!1),(ue=Q.onVnodeBeforeUpdate)&&invokeVNodeHook(ue,U,F,w),pe&&invokeDirectiveHook(F,w,U,"beforeUpdate"),U&&toggleRecurse(U,!0);const Ee=ne&&F.type!=="foreignObject";if(me?j(w.dynamicChildren,me,ve,U,K,Ee,ee):ye||Y(w,F,ve,null,U,K,Ee,ee,!1),fe>0){if(fe&16)L(ve,F,J,Q,U,K,ne);else if(fe&2&&J.class!==Q.class&&r(ve,"class",null,Q.class,ne),fe&4&&r(ve,"style",J.style,Q.style,ne),fe&8){const we=F.dynamicProps;for(let Ne=0;Ne<we.length;Ne++){const Be=we[Ne],Ve=J[Be],qe=Q[Be];(qe!==Ve||Be==="value")&&r(ve,Be,Ve,qe,ne,w.children,U,K,g)}}fe&1&&w.children!==F.children&&l(ve,F.children)}else!ye&&me==null&&L(ve,F,J,Q,U,K,ne);((ue=Q.onVnodeUpdated)||pe)&&queuePostRenderEffect(()=>{ue&&invokeVNodeHook(ue,U,F,w),pe&&invokeDirectiveHook(F,w,U,"updated")},K)},j=(w,F,U,K,ne,ee,ye)=>{for(let ve=0;ve<F.length;ve++){const fe=w[ve],me=F[ve],pe=fe.el&&(fe.type===Fragment||!isSameVNodeType(fe,me)||fe.shapeFlag&70)?A(fe.el):U;P(fe,me,pe,null,K,ne,ee,ye,!0)}},L=(w,F,U,K,ne,ee,ye)=>{if(U!==K){if(U!==EMPTY_OBJ)for(const ve in U)!isReservedProp(ve)&&!(ve in K)&&r(w,ve,U[ve],null,ye,F.children,ne,ee,g);for(const ve in K){if(isReservedProp(ve))continue;const fe=K[ve],me=U[ve];fe!==me&&ve!=="value"&&r(w,ve,me,fe,ye,F.children,ne,ee,g)}"value"in K&&r(w,"value",U.value,K.value)}},Z=(w,F,U,K,ne,ee,ye,ve,fe)=>{const me=F.el=w?w.el:b(""),pe=F.anchor=w?w.anchor:b("");let{patchFlag:J,dynamicChildren:Q,slotScopeIds:ue}=F;ue&&(ve=ve?ve.concat(ue):ue),w==null?(s(me,U,K),s(pe,U,K),N(F.children,U,pe,ne,ee,ye,ve,fe)):J>0&&J&64&&Q&&w.dynamicChildren?(j(w.dynamicChildren,Q,U,ne,ee,ye,ve),(F.key!=null||ne&&F===ne.subTree)&&traverseStaticChildren(w,F,!0)):Y(w,F,U,pe,ne,ee,ye,ve,fe)},se=(w,F,U,K,ne,ee,ye,ve,fe)=>{F.slotScopeIds=ve,w==null?F.shapeFlag&512?ne.ctx.activate(F,U,K,ye,fe):V(F,U,K,ne,ee,ye,fe):oe(w,F,fe)},V=(w,F,U,K,ne,ee,ye)=>{const ve=w.component=createComponentInstance(w,K,ne);if(isKeepAlive(w)&&(ve.ctx.renderer=k),setupComponent(ve),ve.asyncDep){if(ne&&ne.registerDep(ve,de),!w.el){const fe=ve.subTree=createVNode(Comment);M(null,fe,F,U)}return}de(ve,w,F,U,ne,ee,ye)},oe=(w,F,U)=>{const K=F.component=w.component;if(shouldUpdateComponent(w,F,U))if(K.asyncDep&&!K.asyncResolved){he(K,F,U);return}else K.next=F,invalidateJob(K.update),K.update();else F.el=w.el,K.vnode=F},de=(w,F,U,K,ne,ee,ye)=>{const ve=()=>{if(w.isMounted){let{next:pe,bu:J,u:Q,parent:ue,vnode:Ee}=w,we=pe,Ne;toggleRecurse(w,!1),pe?(pe.el=Ee.el,he(w,pe,ye)):pe=Ee,J&&invokeArrayFns(J),(Ne=pe.props&&pe.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ne,ue,pe,Ee),toggleRecurse(w,!0);const Be=renderComponentRoot(w),Ve=w.subTree;w.subTree=Be,P(Ve,Be,A(Ve.el),f(Ve),w,ne,ee),pe.el=Be.el,we===null&&updateHOCHostEl(w,Be.el),Q&&queuePostRenderEffect(Q,ne),(Ne=pe.props&&pe.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ne,ue,pe,Ee),ne)}else{let pe;const{el:J,props:Q}=F,{bm:ue,m:Ee,parent:we}=w,Ne=isAsyncWrapper(F);if(toggleRecurse(w,!1),ue&&invokeArrayFns(ue),!Ne&&(pe=Q&&Q.onVnodeBeforeMount)&&invokeVNodeHook(pe,we,F),toggleRecurse(w,!0),J&&W){const Be=()=>{w.subTree=renderComponentRoot(w),W(J,w.subTree,w,ne,null)};Ne?F.type.__asyncLoader().then(()=>!w.isUnmounted&&Be()):Be()}else{const Be=w.subTree=renderComponentRoot(w);P(null,Be,U,K,w,ne,ee),F.el=Be.el}if(Ee&&queuePostRenderEffect(Ee,ne),!Ne&&(pe=Q&&Q.onVnodeMounted)){const Be=F;queuePostRenderEffect(()=>invokeVNodeHook(pe,we,Be),ne)}(F.shapeFlag&256||we&&isAsyncWrapper(we.vnode)&&we.vnode.shapeFlag&256)&&w.a&&queuePostRenderEffect(w.a,ne),w.isMounted=!0,F=U=K=null}},fe=w.effect=new ReactiveEffect(ve,()=>queueJob(me),w.scope),me=w.update=()=>fe.run();me.id=w.uid,toggleRecurse(w,!0),me()},he=(w,F,U)=>{F.component=w;const K=w.vnode.props;w.vnode=F,w.next=null,updateProps(w,F.props,K,U),updateSlots(w,F.children,U),pauseTracking(),flushPreFlushCbs(),resetTracking()},Y=(w,F,U,K,ne,ee,ye,ve,fe=!1)=>{const me=w&&w.children,pe=w?w.shapeFlag:0,J=F.children,{patchFlag:Q,shapeFlag:ue}=F;if(Q>0){if(Q&128){Se(me,J,U,K,ne,ee,ye,ve,fe);return}else if(Q&256){Ae(me,J,U,K,ne,ee,ye,ve,fe);return}}ue&8?(pe&16&&g(me,ne,ee),J!==me&&l(U,J)):pe&16?ue&16?Se(me,J,U,K,ne,ee,ye,ve,fe):g(me,ne,ee,!0):(pe&8&&l(U,""),ue&16&&N(J,U,K,ne,ee,ye,ve,fe))},Ae=(w,F,U,K,ne,ee,ye,ve,fe)=>{w=w||EMPTY_ARR,F=F||EMPTY_ARR;const me=w.length,pe=F.length,J=Math.min(me,pe);let Q;for(Q=0;Q<J;Q++){const ue=F[Q]=fe?cloneIfMounted(F[Q]):normalizeVNode(F[Q]);P(w[Q],ue,U,null,ne,ee,ye,ve,fe)}me>pe?g(w,ne,ee,!0,!1,J):N(F,U,K,ne,ee,ye,ve,fe,J)},Se=(w,F,U,K,ne,ee,ye,ve,fe)=>{let me=0;const pe=F.length;let J=w.length-1,Q=pe-1;for(;me<=J&&me<=Q;){const ue=w[me],Ee=F[me]=fe?cloneIfMounted(F[me]):normalizeVNode(F[me]);if(isSameVNodeType(ue,Ee))P(ue,Ee,U,null,ne,ee,ye,ve,fe);else break;me++}for(;me<=J&&me<=Q;){const ue=w[J],Ee=F[Q]=fe?cloneIfMounted(F[Q]):normalizeVNode(F[Q]);if(isSameVNodeType(ue,Ee))P(ue,Ee,U,null,ne,ee,ye,ve,fe);else break;J--,Q--}if(me>J){if(me<=Q){const ue=Q+1,Ee=ue<pe?F[ue].el:K;for(;me<=Q;)P(null,F[me]=fe?cloneIfMounted(F[me]):normalizeVNode(F[me]),U,Ee,ne,ee,ye,ve,fe),me++}}else if(me>Q)for(;me<=J;)Re(w[me],ne,ee,!0),me++;else{const ue=me,Ee=me,we=new Map;for(me=Ee;me<=Q;me++){const be=F[me]=fe?cloneIfMounted(F[me]):normalizeVNode(F[me]);be.key!=null&&we.set(be.key,me)}let Ne,Be=0;const Ve=Q-Ee+1;let qe=!1,Ge=0;const ze=new Array(Ve);for(me=0;me<Ve;me++)ze[me]=0;for(me=ue;me<=J;me++){const be=w[me];if(Be>=Ve){Re(be,ne,ee,!0);continue}let ae;if(be.key!=null)ae=we.get(be.key);else for(Ne=Ee;Ne<=Q;Ne++)if(ze[Ne-Ee]===0&&isSameVNodeType(be,F[Ne])){ae=Ne;break}ae===void 0?Re(be,ne,ee,!0):(ze[ae-Ee]=me+1,ae>=Ge?Ge=ae:qe=!0,P(be,F[ae],U,null,ne,ee,ye,ve,fe),Be++)}const Xe=qe?getSequence(ze):EMPTY_ARR;for(Ne=Xe.length-1,me=Ve-1;me>=0;me--){const be=Ee+me,ae=F[be],ie=be+1<pe?F[be+1].el:K;ze[me]===0?P(null,ae,U,ie,ne,ee,ye,ve,fe):qe&&(Ne<0||me!==Xe[Ne]?ke(ae,U,ie,2):Ne--)}}},ke=(w,F,U,K,ne=null)=>{const{el:ee,type:ye,transition:ve,children:fe,shapeFlag:me}=w;if(me&6){ke(w.component.subTree,F,U,K);return}if(me&128){w.suspense.move(F,U,K);return}if(me&64){ye.move(w,F,U,k);return}if(ye===Fragment){s(ee,F,U);for(let J=0;J<fe.length;J++)ke(fe[J],F,U,K);s(w.anchor,F,U);return}if(ye===Static){B(w,F,U);return}if(K!==2&&me&1&&ve)if(K===0)ve.beforeEnter(ee),s(ee,F,U),queuePostRenderEffect(()=>ve.enter(ee),ne);else{const{leave:J,delayLeave:Q,afterLeave:ue}=ve,Ee=()=>s(ee,F,U),we=()=>{J(ee,()=>{Ee(),ue&&ue()})};Q?Q(ee,Ee,we):we()}else s(ee,F,U)},Re=(w,F,U,K=!1,ne=!1)=>{const{type:ee,props:ye,ref:ve,children:fe,dynamicChildren:me,shapeFlag:pe,patchFlag:J,dirs:Q}=w;if(ve!=null&&setRef(ve,null,U,w,!0),pe&256){F.ctx.deactivate(w);return}const ue=pe&1&&Q,Ee=!isAsyncWrapper(w);let we;if(Ee&&(we=ye&&ye.onVnodeBeforeUnmount)&&invokeVNodeHook(we,F,w),pe&6)_(w.component,U,K);else{if(pe&128){w.suspense.unmount(U,K);return}ue&&invokeDirectiveHook(w,null,F,"beforeUnmount"),pe&64?w.type.remove(w,F,U,ne,k,K):me&&(ee!==Fragment||J>0&&J&64)?g(me,F,U,!1,!0):(ee===Fragment&&J&384||!ne&&pe&16)&&g(fe,F,U),K&&H(w)}(Ee&&(we=ye&&ye.onVnodeUnmounted)||ue)&&queuePostRenderEffect(()=>{we&&invokeVNodeHook(we,F,w),ue&&invokeDirectiveHook(w,null,F,"unmounted")},U)},H=w=>{const{type:F,el:U,anchor:K,transition:ne}=w;if(F===Fragment){m(U,K);return}if(F===Static){O(w);return}const ee=()=>{i(U),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(w.shapeFlag&1&&ne&&!ne.persisted){const{leave:ye,delayLeave:ve}=ne,fe=()=>ye(U,ee);ve?ve(w.el,ee,fe):fe()}else ee()},m=(w,F)=>{let U;for(;w!==F;)U=T(w),i(w),w=U;i(F)},_=(w,F,U)=>{const{bum:K,scope:ne,update:ee,subTree:ye,um:ve}=w;K&&invokeArrayFns(K),ne.stop(),ee&&(ee.active=!1,Re(ye,w,F,U)),ve&&queuePostRenderEffect(ve,F),queuePostRenderEffect(()=>{w.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},g=(w,F,U,K=!1,ne=!1,ee=0)=>{for(let ye=ee;ye<w.length;ye++)Re(w[ye],F,U,K,ne)},f=w=>w.shapeFlag&6?f(w.component.subTree):w.shapeFlag&128?w.suspense.next():T(w.anchor||w.el),y=(w,F,U)=>{w==null?F._vnode&&Re(F._vnode,null,null,!0):P(F._vnode||null,w,F,null,null,null,U),flushPreFlushCbs(),flushPostFlushCbs(),F._vnode=w},k={p:P,um:Re,m:ke,r:H,mt:V,mc:N,pc:Y,pbc:j,n:f,o:e};let $,W;return t&&([$,W]=t(k)),{render:y,hydrate:$,createApp:createAppAPI(y,$)}}function toggleRecurse({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function traverseStaticChildren(e,t,n=!1){const s=e.children,i=t.children;if(isArray$2(s)&&isArray$2(i))for(let r=0;r<s.length;r++){const o=s[r];let b=i[r];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=i[r]=cloneIfMounted(i[r]),b.el=o.el),n||traverseStaticChildren(o,b)),b.type===Text&&(b.el=o.el)}}function getSequence(e){const t=e.slice(),n=[0];let s,i,r,o,b;const u=e.length;for(s=0;s<u;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)b=r+o>>1,e[n[b]]<c?r=b+1:o=b;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}const isTeleport=e=>e.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,n,s,i,r){return setupBlock(createBaseVNode(e,t,n,s,i,r,!0))}function createBlock(e,t,n,s,i){return setupBlock(createVNode(e,t,n,s,i,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?isString$1(e)||isRef(e)||isFunction$1(e)?{i:currentRenderingInstance,r:e,k:t,f:!!n}:e:null);function createBaseVNode(e,t=null,n=null,s=0,i=null,r=e===Fragment?0:1,o=!1,b=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return b?(normalizeChildren(u,n),r&128&&e.normalize(u)):n&&(u.shapeFlag|=isString$1(n)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(u.patchFlag>0||r&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const b=cloneVNode(e,t,!0);return n&&normalizeChildren(b,n),isBlockTreeEnabled>0&&!r&&currentBlock&&(b.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=b:currentBlock.push(b)),b.patchFlag|=-2,b}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:b,style:u}=t;b&&!isString$1(b)&&(t.class=normalizeClass(b)),isObject$1(u)&&(isProxy(u)&&!isArray$2(u)&&(u=extend$1({},u)),t.style=normalizeStyle(u))}const o=isString$1(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$1(e)?4:isFunction$1(e)?2:0;return createBaseVNode(e,t,n,s,i,o,r,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$1({},e):e:null}function cloneVNode(e,t,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=e,b=t?mergeProps(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:b,key:b&&normalizeKey(b),ref:t&&t.ref?n&&i?isArray$2(i)?i.concat(normalizeRef(t)):[i,normalizeRef(t)]:normalizeRef(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createStaticVNode(e,t){const n=createVNode(Static,null,e);return n.staticCount=t,n}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$2(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(isArray$2(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),normalizeChildren(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction$1(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),s&64?(n=16,t=[createTextVNode(t)]):n=8);e.children=t,e.shapeFlag|=n}function mergeProps(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=normalizeClass([t.class,s.class]));else if(i==="style")t.style=normalizeStyle([t.style,s.style]);else if(isOn(i)){const r=t[i],o=s[i];o&&r!==o&&!(isArray$2(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function invokeVNodeHook(e,t,n,s=null){callWithAsyncErrorHandling(e,t,7,[n,s])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||emptyAppContext,r={uid:uid++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,i),emitsOptions:normalizeEmitsOptions(s,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=emit.bind(null,r),e.ce&&e.ce(r),r}let currentInstance=null,internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(e=>currentInstance=e),internalSetCurrentInstance=e=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(t=>t(e)):globalCurrentInstanceSetters[0](e)};const setCurrentInstance=e=>{internalSetCurrentInstance(e),e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:n,children:s}=e.vnode,i=isStatefulComponent(e);initProps(e,n,i,t),initSlots(e,s);const r=i?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,r}function setupStatefulComponent(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:s}=n;if(s){const i=e.setupContext=s.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const r=callWithErrorHandling(s,e,0,[e.props,i]);if(resetTracking(),unsetCurrentInstance(),isPromise(r)){if(r.then(unsetCurrentInstance,unsetCurrentInstance),t)return r.then(o=>{handleSetupResult(e,o,t)}).catch(o=>{handleError(o,e,0)});e.asyncDep=r}else handleSetupResult(e,r,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,n){isFunction$1(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$1(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,n)}let compile;function finishComponentSetup(e,t,n){const s=e.type;if(!e.render){if(!t&&compile&&!s.render){const i=s.template||resolveMergedOptions(e).template;if(i){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:b,compilerOptions:u}=s,c=extend$1(extend$1({isCustomElement:r,delimiters:b},o),u);s.render=compile(i,c)}}e.render=s.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return track(e,"get","$attrs"),t[n]}}))}function createSetupContext(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](e)},has(t,n){return n in t||n in publicPropertiesMap}}))}function getComponentName(e,t=!0){return isFunction$1(e)?e.displayName||e.name:e.name||t&&e.__name}function isClassComponent(e){return isFunction$1(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h(e,t,n){const s=arguments.length;return s===2?isObject$1(t)&&!isArray$2(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&isVNode(n)&&(n=[n]),createVNode(e,t,n))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t?doc.createElementNS(svgNS,e):doc.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{templateContainer.innerHTML=s?`<svg>${e}</svg>`:e;const b=templateContainer.content;if(s){const u=b.firstChild;for(;u.firstChild;)b.appendChild(u.firstChild);b.removeChild(u)}t.insertBefore(b,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function patchClass(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,n){const s=e.style,i=isString$1(n);if(n&&!i){if(t&&!isString$1(t))for(const r in t)n[r]==null&&setStyle(s,r,"");for(const r in n)setStyle(s,r,n[r])}else{const r=s.display;i?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=r)}}const importantRE=/\s*!important$/;function setStyle(e,t,n){if(isArray$2(n))n.forEach(s=>setStyle(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=autoPrefix(e,t);importantRE.test(n)?e.setProperty(hyphenate(s),n.replace(importantRE,""),"important"):e[s]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const n=prefixCache[t];if(n)return n;let s=camelize(t);if(s!=="filter"&&s in e)return prefixCache[t]=s;s=capitalize(s);for(let i=0;i<prefixes.length;i++){const r=prefixes[i]+s;if(r in e)return prefixCache[t]=r}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,s,i){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,n);else{const r=isSpecialBooleanAttr(t);n==null||r&&!includeBooleanAttr(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function patchDOMProp(e,t,n,s,i,r,o){if(t==="innerHTML"||t==="textContent"){s&&o(s,i,r),e[t]=n??"";return}const b=e.tagName;if(t==="value"&&b!=="PROGRESS"&&!b.includes("-")){e._value=n;const c=b==="OPTION"?e.getAttribute("value"):e.value,l=n??"";c!==l&&(e.value=l),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=includeBooleanAttr(n):n==null&&c==="string"?(n="",u=!0):c==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function addEventListener(e,t,n,s){e.addEventListener(t,n,s)}function removeEventListener(e,t,n,s){e.removeEventListener(t,n,s)}function patchEvent(e,t,n,s,i=null){const r=e._vei||(e._vei={}),o=r[t];if(s&&o)o.value=s;else{const[b,u]=parseName(t);if(s){const c=r[t]=createInvoker(s,i);addEventListener(e,b,c,u)}else o&&(removeEventListener(e,b,o,u),r[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let s;for(;s=e.match(optionsModifierRE);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(s,n.value),t,5,[s])};return n.value=e,n.attached=getNow(),n}function patchStopImmediatePropagation(e,t){if(isArray$2(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,n,s,i=!1,r,o,b,u)=>{t==="class"?patchClass(e,s,i):t==="style"?patchStyle(e,n,s):isOn(t)?isModelListener(t)||patchEvent(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,s,i))?patchDOMProp(e,t,s,r,o,b,u):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),patchAttr(e,t,s,i))};function shouldSetAsProp(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction$1(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString$1(n)?!1:t in e}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$2(t)?n=>invokeArrayFns(t,n):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e._assign=getModelAssigner(i);const r=s||i.props&&i.props.type==="number";addEventListener(e,t?"change":"input",o=>{if(o.target.composing)return;let b=e.value;n&&(b=b.trim()),r&&(b=looseToNumber(b)),e._assign(b)}),n&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:i}},r){if(e._assign=getModelAssigner(r),e.composing||document.activeElement===e&&e.type!=="range"&&(n||s&&e.value.trim()===t||(i||e.type==="number")&&looseToNumber(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(n=>e[`${n}Key`]&&!t.includes(n))},withModifiers=(e,t)=>(n,...s)=>{for(let i=0;i<t.length;i++){const r=modifierGuards[t[i]];if(r&&r(n,t))return}return e(n,...s)},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=normalizeContainer(s);if(!i)return;const r=t._component;!isFunction$1(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function normalizeContainer(e){return isString$1(e)?document.querySelector(e):e}const App_vue_vue_type_style_index_0_scoped_383c99d5_lang="",_export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},_sfc_main$a={data(){return{}}},_withScopeId$2=e=>(pushScopeId("data-v-383c99d5"),e=e(),popScopeId(),e),_hoisted_1$a=_withScopeId$2(()=>createBaseVNode("head",null,[createBaseVNode("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC",crossorigin:"anonymous"})],-1)),_hoisted_2$a={id:"app"};function _sfc_render$9(e,t,n,s,i,r){const o=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment,null,[_hoisted_1$a,createBaseVNode("div",_hoisted_2$a,[createVNode(o)])],64)}const App=_export_sfc(_sfc_main$a,[["render",_sfc_render$9],["__scopeId","data-v-383c99d5"]]);/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(e,t){const n={};for(const s in t){const i=t[s];n[s]=isArray$1(i)?i.map(e):e(i)}return n}const noop$1=()=>{},isArray$1=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,n="/"){let s,i={},r="",o="";const b=t.indexOf("#");let u=t.indexOf("?");return b<u&&b>=0&&(u=-1),u>-1&&(s=t.slice(0,u),r=t.slice(u+1,b>-1?b:t.length),i=e(r)),b>-1&&(s=s||t.slice(0,b),o=t.slice(b,t.length)),s=resolveRelativePath(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:o}}function stringifyURL(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function stripBase(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function isSameRouteLocation(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&isSameRouteRecord(t.matched[s],n.matched[i])&&isSameRouteLocationParams(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!isSameRouteLocationParamsValue(e[n],t[n]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray$1(e)?isEquivalentArray(e,t):isArray$1(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray$1(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,b;for(o=0;o<s.length;o++)if(b=s[o],b!==".")if(b==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o-(o===s.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=getElementPosition(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let b=i.includes(e.slice(r))?e.slice(r).length:1,u=i.slice(b);return u[0]!=="/"&&(u="/"+u),stripBase(u,"")}return stripBase(n,e)+s+i}function useHistoryListeners(e,t,n,s){let i=[],r=[],o=null;const b=({state:T})=>{const R=createCurrentLocation(e,location),S=n.value,P=t.value;let x=0;if(T){if(n.value=R,t.value=T,o&&o===S){o=null;return}x=P?T.position-P.position:0}else s(R);i.forEach(M=>{M(n.value,S,{delta:x,type:NavigationType.pop,direction:x?x>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function u(){o=n.value}function c(T){i.push(T);const R=()=>{const S=i.indexOf(T);S>-1&&i.splice(S,1)};return r.push(R),R}function l(){const{history:T}=window;T.state&&T.replaceState(assign({},T.state,{scroll:computeScrollPosition()}),"")}function A(){for(const T of r)T();r=[],window.removeEventListener("popstate",b),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",b),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:u,listen:c,destroy:A}}function buildState(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:n}=window,s={value:createCurrentLocation(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(u,c,l){const A=e.indexOf("#"),T=A>-1?(n.host&&document.querySelector("base")?e:e.slice(A))+u:createBaseLocation()+e+u;try{t[l?"replaceState":"pushState"](c,"",T),i.value=c}catch(R){console.error(R),n[l?"replace":"assign"](T)}}function o(u,c){const l=assign({},t.state,buildState(i.value.back,u,i.value.forward,!0),c,{position:i.value.position});r(u,l,!0),s.value=u}function b(u,c){const l=assign({},i.value,t.state,{forward:u,scroll:computeScrollPosition()});r(l.current,l,!0);const A=assign({},buildState(s.value,u,null),{position:l.position+1},c);r(u,A,!1),s.value=u}return{location:s,state:i,push:b,replace:o}}function createWebHistory(e){e=normalizeBase(e);const t=useHistoryStateNavigation(e),n=useHistoryListeners(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=assign({location:"",base:e,go:s,createHref:createHref.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const n=assign({},BASE_PATH_PARSER_OPTIONS,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const l=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let A=0;A<c.length;A++){const T=c[A];let R=40+(n.sensitive?.25:0);if(T.type===0)A||(i+="/"),i+=T.value.replace(REGEX_CHARS_RE,"\\$&"),R+=40;else if(T.type===1){const{value:S,repeatable:P,optional:x,regexp:M}=T;r.push({name:S,repeatable:P,optional:x});const I=M||BASE_PARAM_PATTERN;if(I!==BASE_PARAM_PATTERN){R+=10;try{new RegExp(`(${I})`)}catch(O){throw new Error(`Invalid custom RegExp for param "${S}" (${I}): `+O.message)}}let B=P?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;A||(B=x&&c.length<2?`(?:/${B})`:"/"+B),x&&(B+="?"),i+=B,R+=20,x&&(R+=-8),P&&(R+=-20),I===".*"&&(R+=-50)}l.push(R)}s.push(l)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function b(c){const l=c.match(o),A={};if(!l)return null;for(let T=1;T<l.length;T++){const R=l[T]||"",S=r[T-1];A[S.name]=R&&S.repeatable?R.split("/"):R}return A}function u(c){let l="",A=!1;for(const T of e){(!A||!l.endsWith("/"))&&(l+="/"),A=!1;for(const R of T)if(R.type===0)l+=R.value;else if(R.type===1){const{value:S,repeatable:P,optional:x}=R,M=S in c?c[S]:"";if(isArray$1(M)&&!P)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const I=isArray$1(M)?M.join("/"):M;if(!I)if(x)T.length<2&&(l.endsWith("/")?l=l.slice(0,-1):A=!0);else throw new Error(`Missing required param "${S}"`);l+=I}}return l||"/"}return{re:o,score:s,keys:r,parse:b,stringify:u}}function compareScoreArray(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=compareScoreArray(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(isLastScoreNegative(s))return 1;if(isLastScoreNegative(i))return-1}return i.length-s.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(R){throw new Error(`ERR (${n})/"${c}": ${R}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let b=0,u,c="",l="";function A(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:l,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),c="")}function T(){c+=u}for(;b<e.length;){if(u=e[b++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(c&&A(),o()):u===":"?(A(),n=1):T();break;case 4:T(),n=s;break;case 1:u==="("?n=2:VALID_PARAM_RE.test(u)?T():(A(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&b--);break;case 2:u===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+u:n=3:l+=u;break;case 3:A(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&b--,l="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),A(),o(),i}function createRouteRecordMatcher(e,t,n){const s=tokensToParser(tokenizePath(e.path),n),i=assign(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function createRouterMatcher(e,t){const n=[],s=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function i(l){return s.get(l)}function r(l,A,T){const R=!T,S=normalizeRouteRecord(l);S.aliasOf=T&&T.record;const P=mergeOptions(t,l),x=[S];if("alias"in l){const B=typeof l.alias=="string"?[l.alias]:l.alias;for(const O of B)x.push(assign({},S,{components:T?T.record.components:S.components,path:O,aliasOf:T?T.record:S}))}let M,I;for(const B of x){const{path:O}=B;if(A&&O[0]!=="/"){const v=A.record.path,C=v[v.length-1]==="/"?"":"/";B.path=A.record.path+(O&&C+O)}if(M=createRouteRecordMatcher(B,A,P),T?T.alias.push(M):(I=I||M,I!==M&&I.alias.push(M),R&&l.name&&!isAliasRecord(M)&&o(l.name)),S.children){const v=S.children;for(let C=0;C<v.length;C++)r(v[C],M,T&&T.children[C])}T=T||M,(M.record.components&&Object.keys(M.record.components).length||M.record.name||M.record.redirect)&&u(M)}return I?()=>{o(I)}:noop$1}function o(l){if(isRouteName(l)){const A=s.get(l);A&&(s.delete(l),n.splice(n.indexOf(A),1),A.children.forEach(o),A.alias.forEach(o))}else{const A=n.indexOf(l);A>-1&&(n.splice(A,1),l.record.name&&s.delete(l.record.name),l.children.forEach(o),l.alias.forEach(o))}}function b(){return n}function u(l){let A=0;for(;A<n.length&&comparePathParserScore(l,n[A])>=0&&(l.record.path!==n[A].record.path||!isRecordChildOf(l,n[A]));)A++;n.splice(A,0,l),l.record.name&&!isAliasRecord(l)&&s.set(l.record.name,l)}function c(l,A){let T,R={},S,P;if("name"in l&&l.name){if(T=s.get(l.name),!T)throw createRouterError(1,{location:l});P=T.record.name,R=assign(paramsFromLocation(A.params,T.keys.filter(I=>!I.optional).map(I=>I.name)),l.params&&paramsFromLocation(l.params,T.keys.map(I=>I.name))),S=T.stringify(R)}else if("path"in l)S=l.path,T=n.find(I=>I.re.test(S)),T&&(R=T.parse(S),P=T.record.name);else{if(T=A.name?s.get(A.name):n.find(I=>I.re.test(A.path)),!T)throw createRouterError(1,{location:l,currentLocation:A});P=T.record.name,R=assign({},A.params,l.params),S=T.stringify(R)}const x=[];let M=T;for(;M;)x.unshift(M.record),M=M.parent;return{name:P,path:S,params:R,matched:x,meta:mergeMetaFields(x)}}return e.forEach(l=>r(l)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:b,getRecordMatcher:i}}function paramsFromLocation(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,n)=>assign(t,n.meta),{})}function mergeOptions(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function isRecordChildOf(e,t){return t.children.some(n=>n===e||isRecordChildOf(e,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function parseQuery(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(PLUS_RE," "),o=r.indexOf("="),b=decode(o<0?r:r.slice(0,o)),u=o<0?null:decode(r.slice(o+1));if(b in t){let c=t[b];isArray$1(c)||(c=t[b]=[c]),c.push(u)}else t[b]=u}return t}function stringifyQuery(e){let t="";for(let n in e){const s=e[n];if(n=encodeQueryKey(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(isArray$1(s)?s.map(r=>r&&encodeQueryValue(r)):[s&&encodeQueryValue(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function normalizeQuery(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=isArray$1(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function guardToPromiseFn(e,t,n,s,i){const r=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((o,b)=>{const u=A=>{A===!1?b(createRouterError(4,{from:n,to:t})):A instanceof Error?b(A):isRouteLocation(A)?b(createRouterError(2,{from:t,to:A})):(r&&s.enterCallbacks[i]===r&&typeof A=="function"&&r.push(A),o())},c=e.call(s&&s.instances[i],t,n,u);let l=Promise.resolve(c);e.length<3&&(l=l.then(u)),l.catch(A=>b(A))})}function extractComponentsGuards(e,t,n,s){const i=[];for(const r of e)for(const o in r.components){let b=r.components[o];if(!(t!=="beforeRouteEnter"&&!r.instances[o]))if(isRouteComponent(b)){const c=(b.__vccOpts||b)[t];c&&i.push(guardToPromiseFn(c,n,s,r,o))}else{let u=b();i.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const l=isESModule(c)?c.default:c;r.components[o]=l;const T=(l.__vccOpts||l)[t];return T&&guardToPromiseFn(T,n,s,r,o)()}))}}return i}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),n=inject(routeLocationKey),s=computed(()=>t.resolve(unref(e.to))),i=computed(()=>{const{matched:u}=s.value,{length:c}=u,l=u[c-1],A=n.matched;if(!l||!A.length)return-1;const T=A.findIndex(isSameRouteRecord.bind(null,l));if(T>-1)return T;const R=getOriginalPath(u[c-2]);return c>1&&getOriginalPath(l)===R&&A[A.length-1].path!==R?A.findIndex(isSameRouteRecord.bind(null,u[c-2])):T}),r=computed(()=>i.value>-1&&includesParams(n.params,s.value.params)),o=computed(()=>i.value>-1&&i.value===n.matched.length-1&&isSameRouteLocationParams(n.params,s.value.params));function b(u={}){return guardEvent(u)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop$1):Promise.resolve()}return{route:s,href:computed(()=>s.value.href),isActive:r,isExactActive:o,navigate:b}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:t}){const n=reactive(useLink(e)),{options:s}=inject(routerKey),i=computed(()=>({[getLinkClass(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:h("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!isArray$1(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,n)=>e??t??n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=inject(routerViewLocationKey),i=computed(()=>e.route||s.value),r=inject(viewDepthKey,0),o=computed(()=>{let c=unref(r);const{matched:l}=i.value;let A;for(;(A=l[c])&&!A.components;)c++;return c}),b=computed(()=>i.value.matched[o.value]);provide(viewDepthKey,computed(()=>o.value+1)),provide(matchedRouteKey,b),provide(routerViewLocationKey,i);const u=ref();return watch(()=>[u.value,b.value,e.name],([c,l,A],[T,R,S])=>{l&&(l.instances[A]=c,R&&R!==l&&c&&c===T&&(l.leaveGuards.size||(l.leaveGuards=R.leaveGuards),l.updateGuards.size||(l.updateGuards=R.updateGuards))),c&&l&&(!R||!isSameRouteRecord(l,R)||!T)&&(l.enterCallbacks[A]||[]).forEach(P=>P(c))},{flush:"post"}),()=>{const c=i.value,l=e.name,A=b.value,T=A&&A.components[l];if(!T)return normalizeSlot(n.default,{Component:T,route:c});const R=A.props[l],S=R?R===!0?c.params:typeof R=="function"?R(c):R:null,x=h(T,assign({},S,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(A.instances[l]=null)},ref:u}));return normalizeSlot(n.default,{Component:x,route:c})||x}}});function normalizeSlot(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),n=e.parseQuery||parseQuery,s=e.stringifyQuery||stringifyQuery,i=e.history,r=useCallbacks(),o=useCallbacks(),b=useCallbacks(),u=shallowRef(START_LOCATION_NORMALIZED);let c=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=applyToParams.bind(null,f=>""+f),A=applyToParams.bind(null,encodeParam),T=applyToParams.bind(null,decode);function R(f,y){let k,$;return isRouteName(f)?(k=t.getRecordMatcher(f),$=y):$=f,t.addRoute($,k)}function S(f){const y=t.getRecordMatcher(f);y&&t.removeRoute(y)}function P(){return t.getRoutes().map(f=>f.record)}function x(f){return!!t.getRecordMatcher(f)}function M(f,y){if(y=assign({},y||u.value),typeof f=="string"){const U=parseURL(n,f,y.path),K=t.resolve({path:U.path},y),ne=i.createHref(U.fullPath);return assign(U,K,{params:T(K.params),hash:decode(U.hash),redirectedFrom:void 0,href:ne})}let k;if("path"in f)k=assign({},f,{path:parseURL(n,f.path,y.path).path});else{const U=assign({},f.params);for(const K in U)U[K]==null&&delete U[K];k=assign({},f,{params:A(U)}),y.params=A(y.params)}const $=t.resolve(k,y),W=f.hash||"";$.params=l(T($.params));const w=stringifyURL(s,assign({},f,{hash:encodeHash(W),path:$.path})),F=i.createHref(w);return assign({fullPath:w,hash:W,query:s===stringifyQuery?normalizeQuery(f.query):f.query||{}},$,{redirectedFrom:void 0,href:F})}function I(f){return typeof f=="string"?parseURL(n,f,u.value.path):assign({},f)}function B(f,y){if(c!==f)return createRouterError(8,{from:y,to:f})}function O(f){return z(f)}function v(f){return O(assign(I(f),{replace:!0}))}function C(f){const y=f.matched[f.matched.length-1];if(y&&y.redirect){const{redirect:k}=y;let $=typeof k=="function"?k(f):k;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=I($):{path:$},$.params={}),assign({query:f.query,hash:f.hash,params:"path"in $?{}:f.params},$)}}function z(f,y){const k=c=M(f),$=u.value,W=f.state,w=f.force,F=f.replace===!0,U=C(k);if(U)return z(assign(I(U),{state:typeof U=="object"?assign({},W,U.state):W,force:w,replace:F}),y||k);const K=k;K.redirectedFrom=y;let ne;return!w&&isSameRouteLocation(s,$,k)&&(ne=createRouterError(16,{to:K,from:$}),ke($,$,!0,!1)),(ne?Promise.resolve(ne):j(K,$)).catch(ee=>isNavigationFailure(ee)?isNavigationFailure(ee,2)?ee:Se(ee):Y(ee,K,$)).then(ee=>{if(ee){if(isNavigationFailure(ee,2))return z(assign({replace:F},I(ee.to),{state:typeof ee.to=="object"?assign({},W,ee.to.state):W,force:w}),y||K)}else ee=Z(K,$,!0,F,W);return L(K,$,ee),ee})}function N(f,y){const k=B(f,y);return k?Promise.reject(k):Promise.resolve()}function E(f){const y=m.values().next().value;return y&&typeof y.runWithContext=="function"?y.runWithContext(f):f()}function j(f,y){let k;const[$,W,w]=extractChangingRecords(f,y);k=extractComponentsGuards($.reverse(),"beforeRouteLeave",f,y);for(const U of $)U.leaveGuards.forEach(K=>{k.push(guardToPromiseFn(K,f,y))});const F=N.bind(null,f,y);return k.push(F),g(k).then(()=>{k=[];for(const U of r.list())k.push(guardToPromiseFn(U,f,y));return k.push(F),g(k)}).then(()=>{k=extractComponentsGuards(W,"beforeRouteUpdate",f,y);for(const U of W)U.updateGuards.forEach(K=>{k.push(guardToPromiseFn(K,f,y))});return k.push(F),g(k)}).then(()=>{k=[];for(const U of w)if(U.beforeEnter)if(isArray$1(U.beforeEnter))for(const K of U.beforeEnter)k.push(guardToPromiseFn(K,f,y));else k.push(guardToPromiseFn(U.beforeEnter,f,y));return k.push(F),g(k)}).then(()=>(f.matched.forEach(U=>U.enterCallbacks={}),k=extractComponentsGuards(w,"beforeRouteEnter",f,y),k.push(F),g(k))).then(()=>{k=[];for(const U of o.list())k.push(guardToPromiseFn(U,f,y));return k.push(F),g(k)}).catch(U=>isNavigationFailure(U,8)?U:Promise.reject(U))}function L(f,y,k){b.list().forEach($=>E(()=>$(f,y,k)))}function Z(f,y,k,$,W){const w=B(f,y);if(w)return w;const F=y===START_LOCATION_NORMALIZED,U=isBrowser?history.state:{};k&&($||F?i.replace(f.fullPath,assign({scroll:F&&U&&U.scroll},W)):i.push(f.fullPath,W)),u.value=f,ke(f,y,k,F),Se()}let se;function V(){se||(se=i.listen((f,y,k)=>{if(!_.listening)return;const $=M(f),W=C($);if(W){z(assign(W,{replace:!0}),$).catch(noop$1);return}c=$;const w=u.value;isBrowser&&saveScrollPosition(getScrollKey(w.fullPath,k.delta),computeScrollPosition()),j($,w).catch(F=>isNavigationFailure(F,12)?F:isNavigationFailure(F,2)?(z(F.to,$).then(U=>{isNavigationFailure(U,20)&&!k.delta&&k.type===NavigationType.pop&&i.go(-1,!1)}).catch(noop$1),Promise.reject()):(k.delta&&i.go(-k.delta,!1),Y(F,$,w))).then(F=>{F=F||Z($,w,!1),F&&(k.delta&&!isNavigationFailure(F,8)?i.go(-k.delta,!1):k.type===NavigationType.pop&&isNavigationFailure(F,20)&&i.go(-1,!1)),L($,w,F)}).catch(noop$1)}))}let oe=useCallbacks(),de=useCallbacks(),he;function Y(f,y,k){Se(f);const $=de.list();return $.length?$.forEach(W=>W(f,y,k)):console.error(f),Promise.reject(f)}function Ae(){return he&&u.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((f,y)=>{oe.add([f,y])})}function Se(f){return he||(he=!f,V(),oe.list().forEach(([y,k])=>f?k(f):y()),oe.reset()),f}function ke(f,y,k,$){const{scrollBehavior:W}=e;if(!isBrowser||!W)return Promise.resolve();const w=!k&&getSavedScrollPosition(getScrollKey(f.fullPath,0))||($||!k)&&history.state&&history.state.scroll||null;return nextTick().then(()=>W(f,y,w)).then(F=>F&&scrollToPosition(F)).catch(F=>Y(F,f,y))}const Re=f=>i.go(f);let H;const m=new Set,_={currentRoute:u,listening:!0,addRoute:R,removeRoute:S,hasRoute:x,getRoutes:P,resolve:M,options:e,push:O,replace:v,go:Re,back:()=>Re(-1),forward:()=>Re(1),beforeEach:r.add,beforeResolve:o.add,afterEach:b.add,onError:de.add,isReady:Ae,install(f){const y=this;f.component("RouterLink",RouterLink),f.component("RouterView",RouterView),f.config.globalProperties.$router=y,Object.defineProperty(f.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(u)}),isBrowser&&!H&&u.value===START_LOCATION_NORMALIZED&&(H=!0,O(i.location).catch(W=>{}));const k={};for(const W in START_LOCATION_NORMALIZED)Object.defineProperty(k,W,{get:()=>u.value[W],enumerable:!0});f.provide(routerKey,y),f.provide(routeLocationKey,shallowReactive(k)),f.provide(routerViewLocationKey,u);const $=f.unmount;m.add(f),f.unmount=function(){m.delete(f),m.size<1&&(c=START_LOCATION_NORMALIZED,se&&se(),se=null,u.value=START_LOCATION_NORMALIZED,H=!1,he=!1),$()}}};function g(f){return f.reduce((y,k)=>y.then(()=>E(k)),Promise.resolve())}return _}function extractChangingRecords(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const b=t.matched[o];b&&(e.matched.find(c=>isSameRouteRecord(c,b))?s.push(b):n.push(b));const u=e.matched[o];u&&(t.matched.find(c=>isSameRouteRecord(c,u))||i.push(u))}return[n,s,i]}const REGION_KEY="user-region";function setRegion(e){localStorage.setItem(REGION_KEY,e)}function getRegion(){return localStorage.getItem(REGION_KEY)||"japan"}function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(e=>t=>{const n=toString.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const t=getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction(e.pipe),isFormData=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction(e.append)&&((t=kindOf(e))==="formdata"||t==="object"&&isFunction(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),isArray(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let b;for(s=0;s<o;s++)b=r[s],t.call(null,e[b],b,e)}}function findKey(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,i;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},t={},n=(s,i)=>{const r=e&&findKey(t,i)||i;isPlainObject(t[r])&&isPlainObject(s)?t[r]=merge(t[r],s):isPlainObject(s)?t[r]=merge({},s):isArray(s)?t[r]=s.slice():t[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&forEach(arguments[s],n);return t}const extend=(e,t,n,{allOwnKeys:s}={})=>(forEach(t,(i,r)=>{n&&isFunction(i)?e[r]=bind(i,n):e[r]=i},{allOwnKeys:s}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,s)=>{let i,r,o;const b={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)o=i[r],(!s||s(o,e,t))&&!b[o]&&(t[o]=e[o],b[o]=!0);e=n!==!1&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},toArray=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=s.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},matchAll=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),hasOwnProperty=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};forEach(n,(i,r)=>{let o;(o=t(i,r,e))!==!1&&(s[r]=o||i)}),Object.defineProperties(e,s)},freezeMethods=e=>{reduceDescriptors(e,(t,n)=>{if(isFunction(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(isFunction(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(e,t)=>{const n={},s=i=>{i.forEach(r=>{n[r]=!0})};return isArray(e)?s(e):s(String(e).split(t)),n},noop=()=>{},toFiniteNumber=(e,t)=>(e=+e,Number.isFinite(e)?e:t),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(e=16,t=ALPHABET.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function isSpecCompliantForm(e){return!!(e&&isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const toJSONObject=e=>{const t=new Array(10),n=(s,i)=>{if(isObject(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[i]=s;const r=isArray(s)?[]:{};return forEach(s,(o,b)=>{const u=n(o,i+1);!isUndefined(u)&&(r[b]=u)}),t[i]=void 0,r}}return s};return n(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),utils={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(e,t,n,s,i,r)=>{const o=Object.create(prototype$1);return utils.toFlatObject(e,o,function(u){return u!==Error.prototype},b=>b!=="isAxiosError"),AxiosError.call(o,e.message,t,n,s,i),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const httpAdapter=null;function isVisitable(e){return utils.isPlainObject(e)||utils.isArray(e)}function removeBrackets(e){return utils.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map(function(i,r){return i=removeBrackets(i),!n&&r?"["+i+"]":i}).join(n?".":""):t}function isFlatArray(e){return utils.isArray(e)&&!e.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData(e,t,n){if(!utils.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=utils.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,x){return!utils.isUndefined(x[P])});const s=n.metaTokens,i=n.visitor||l,r=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(t);if(!utils.isFunction(i))throw new TypeError("visitor must be a function");function c(S){if(S===null)return"";if(utils.isDate(S))return S.toISOString();if(!u&&utils.isBlob(S))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(S)||utils.isTypedArray(S)?u&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function l(S,P,x){let M=S;if(S&&!x&&typeof S=="object"){if(utils.endsWith(P,"{}"))P=s?P:P.slice(0,-2),S=JSON.stringify(S);else if(utils.isArray(S)&&isFlatArray(S)||(utils.isFileList(S)||utils.endsWith(P,"[]"))&&(M=utils.toArray(S)))return P=removeBrackets(P),M.forEach(function(B,O){!(utils.isUndefined(B)||B===null)&&t.append(o===!0?renderKey([P],O,r):o===null?P:P+"[]",c(B))}),!1}return isVisitable(S)?!0:(t.append(renderKey(x,P,r),c(S)),!1)}const A=[],T=Object.assign(predicates,{defaultVisitor:l,convertValue:c,isVisitable});function R(S,P){if(!utils.isUndefined(S)){if(A.indexOf(S)!==-1)throw Error("Circular reference detected in "+P.join("."));A.push(S),utils.forEach(S,function(M,I){(!(utils.isUndefined(M)||M===null)&&i.call(t,M,utils.isString(I)?I.trim():I,P,T))===!0&&R(M,P?P.concat(I):[I])}),A.pop()}}if(!utils.isObject(e))throw new TypeError("data must be an object");return R(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData(e,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,n){this._pairs.push([t,n])};prototype.toString=function(t){const n=t?function(s){return t.call(this,s,encode$1)}:encode$1;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,n){if(!t)return e;const s=n&&n.encode||encode,i=n&&n.serialize;let r;if(i?r=i(t,n):r=utils.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,n).toString(s),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils.forEach(this.handlers,function(s){s!==null&&t(s)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(e,t){return toFormData(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,r){return platform.isNode&&utils.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}function formDataToJSON(e){function t(n,s,i,r){let o=n[r++];const b=Number.isFinite(+o),u=r>=n.length;return o=!o&&utils.isArray(i)?i.length:o,u?(utils.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!b):((!i[o]||!utils.isObject(i[o]))&&(i[o]=[]),t(n,s,i[o],r)&&utils.isArray(i[o])&&(i[o]=arrayToObject(i[o])),!b)}if(utils.isFormData(e)&&utils.isFunction(e.entries)){const n={};return utils.forEachEntry(e,(s,i)=>{t(parsePropPath(s),i,n,0)}),n}return null}function stringifySafely(e,t,n){if(utils.isString(e))try{return(t||JSON.parse)(e),utils.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:platform.isNode?"http":"xhr",transformRequest:[function(t,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,r=utils.isObject(t);if(r&&utils.isHTMLForm(t)&&(t=new FormData(t)),utils.isFormData(t))return i&&i?JSON.stringify(formDataToJSON(t)):t;if(utils.isArrayBuffer(t)||utils.isBuffer(t)||utils.isStream(t)||utils.isFile(t)||utils.isBlob(t))return t;if(utils.isArrayBufferView(t))return t.buffer;if(utils.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let b;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((b=utils.isFileList(t))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return toFormData(b?{"files[]":t}:t,u&&new u,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const n=this.transitional||defaults.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&utils.isString(t)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(b){if(o)throw b.name==="SyntaxError"?AxiosError.from(b,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):b}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const defaults$1=defaults,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,s,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,n,s,i){if(utils.isFunction(s))return s.call(this,t,n);if(i&&(t=n),!!utils.isString(t)){if(utils.isString(s))return t.indexOf(s)!==-1;if(utils.isRegExp(s))return s.test(t)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function buildAccessors(e,t){const n=utils.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(i,r,o){return this[s].call(this,t,i,r,o)},configurable:!0})})}class AxiosHeaders{constructor(t){t&&this.set(t)}set(t,n,s){const i=this;function r(b,u,c){const l=normalizeHeader(u);if(!l)throw new Error("header name must be a non-empty string");const A=utils.findKey(i,l);(!A||i[A]===void 0||c===!0||c===void 0&&i[A]!==!1)&&(i[A||u]=normalizeValue(b))}const o=(b,u)=>utils.forEach(b,(c,l)=>r(c,l,u));return utils.isPlainObject(t)||t instanceof this.constructor?o(t,n):utils.isString(t)&&(t=t.trim())&&!isValidHeaderName(t)?o(parseHeaders(t),n):t!=null&&r(n,t,s),this}get(t,n){if(t=normalizeHeader(t),t){const s=utils.findKey(this,t);if(s){const i=this[s];if(!n)return i;if(n===!0)return parseTokens(i);if(utils.isFunction(n))return n.call(this,i,s);if(utils.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=normalizeHeader(t),t){const s=utils.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||matchHeaderValue(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let i=!1;function r(o){if(o=normalizeHeader(o),o){const b=utils.findKey(s,o);b&&(!n||matchHeaderValue(s,s[b],b,n))&&(delete s[b],i=!0)}}return utils.isArray(t)?t.forEach(r):r(t),i}clear(t){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const r=n[s];(!t||matchHeaderValue(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const n=this,s={};return utils.forEach(this,(i,r)=>{const o=utils.findKey(s,r);if(o){n[o]=normalizeValue(i),delete n[r];return}const b=t?formatHeader(r):String(r).trim();b!==r&&delete n[r],n[b]=normalizeValue(i),s[b]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return utils.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=t&&utils.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[$internals]=this[$internals]={accessors:{}}).accessors,i=this.prototype;function r(o){const b=normalizeHeader(o);s[b]||(buildAccessors(i,o),s[b]=!0)}return utils.isArray(t)?t.forEach(r):r(t),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.reduceDescriptors(AxiosHeaders.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(e,t){const n=this||defaults$1,s=t||n,i=AxiosHeaders$1.from(s.headers);let r=s.data;return utils.forEach(e,function(b){r=b.call(n,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function isCancel(e){return!!(e&&e.__CANCEL__)}function CanceledError(e,t,n){AxiosError.call(this,e??"canceled",AxiosError.ERR_CANCELED,t,n),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(n,s,i,r,o,b){const u=[];u.push(n+"="+encodeURIComponent(s)),utils.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),utils.isString(r)&&u.push("path="+r),utils.isString(o)&&u.push("domain="+o),b===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){const s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function i(r){let o=r;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=i(window.location.href),function(o){const b=utils.isString(o)?i(o):o;return b.protocol===s.protocol&&b.host===s.host}}():function(){return function(){return!0}}();function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),l=s[r];o||(o=c),n[i]=u,s[i]=c;let A=r,T=0;for(;A!==i;)T+=n[A++],A=A%e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),c-o<t)return;const R=l&&c-l;return R?Math.round(T*1e3/R):void 0}}function progressEventReducer(e,t){let n=0;const s=speedometer(50,250);return i=>{const r=i.loaded,o=i.lengthComputable?i.total:void 0,b=r-n,u=s(b),c=r<=o;n=r;const l={loaded:r,total:o,progress:o?r/o:void 0,bytes:b,rate:u||void 0,estimated:u&&o&&c?(o-r)/u:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(n,s){let i=e.data;const r=AxiosHeaders$1.from(e.headers).normalize(),o=e.responseType;let b;function u(){e.cancelToken&&e.cancelToken.unsubscribe(b),e.signal&&e.signal.removeEventListener("abort",b)}utils.isFormData(i)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(e.auth){const R=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(R+":"+S))}const l=buildFullPath(e.baseURL,e.url);c.open(e.method.toUpperCase(),buildURL(l,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function A(){if(!c)return;const R=AxiosHeaders$1.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),P={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:R,config:e,request:c};settle(function(M){n(M),u()},function(M){s(M),u()},P),c=null}if("onloadend"in c?c.onloadend=A:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(A)},c.onabort=function(){c&&(s(new AxiosError("Request aborted",AxiosError.ECONNABORTED,e,c)),c=null)},c.onerror=function(){s(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let S=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const P=e.transitional||transitionalDefaults;e.timeoutErrorMessage&&(S=e.timeoutErrorMessage),s(new AxiosError(S,P.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,c)),c=null},platform.isStandardBrowserEnv){const R=(e.withCredentials||isURLSameOrigin(l))&&e.xsrfCookieName&&cookies.read(e.xsrfCookieName);R&&r.set(e.xsrfHeaderName,R)}i===void 0&&r.setContentType(null),"setRequestHeader"in c&&utils.forEach(r.toJSON(),function(S,P){c.setRequestHeader(P,S)}),utils.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),o&&o!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",progressEventReducer(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",progressEventReducer(e.onUploadProgress)),(e.cancelToken||e.signal)&&(b=R=>{c&&(s(!R||R.type?new CanceledError(null,e,c):R),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(b),e.signal&&(e.signal.aborted?b():e.signal.addEventListener("abort",b)));const T=parseProtocol(l);if(T&&platform.protocols.indexOf(T)===-1){s(new AxiosError("Unsupported protocol "+T+":",AxiosError.ERR_BAD_REQUEST,e));return}c.send(i||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const adapters={getAdapter:e=>{e=utils.isArray(e)?e:[e];const{length:t}=e;let n,s;for(let i=0;i<t&&(n=e[i],!(s=utils.isString(n)?knownAdapters[n.toLowerCase()]:n));i++);if(!s)throw s===!1?new AxiosError(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!utils.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults$1.adapter)(e).then(function(s){return throwIfCancellationRequested(e),s.data=transformData.call(e,e.transformResponse,s),s.headers=AxiosHeaders$1.from(s.headers),s},function(s){return isCancel(s)||(throwIfCancellationRequested(e),s&&s.response&&(s.response.data=transformData.call(e,e.transformResponse,s.response),s.response.headers=AxiosHeaders$1.from(s.response.headers))),Promise.reject(s)})}const headersToObject=e=>e instanceof AxiosHeaders$1?e.toJSON():e;function mergeConfig(e,t){t=t||{};const n={};function s(c,l,A){return utils.isPlainObject(c)&&utils.isPlainObject(l)?utils.merge.call({caseless:A},c,l):utils.isPlainObject(l)?utils.merge({},l):utils.isArray(l)?l.slice():l}function i(c,l,A){if(utils.isUndefined(l)){if(!utils.isUndefined(c))return s(void 0,c,A)}else return s(c,l,A)}function r(c,l){if(!utils.isUndefined(l))return s(void 0,l)}function o(c,l){if(utils.isUndefined(l)){if(!utils.isUndefined(c))return s(void 0,c)}else return s(void 0,l)}function b(c,l,A){if(A in t)return s(c,l);if(A in e)return s(void 0,c)}const u={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:b,headers:(c,l)=>i(headersToObject(c),headersToObject(l),!0)};return utils.forEach(Object.keys(Object.assign({},e,t)),function(l){const A=u[l]||i,T=A(e[l],t[l],l);utils.isUndefined(T)&&A!==b||(n[l]=T)}),n}const VERSION="1.5.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(t,n,s){function i(r,o){return"[Axios v"+VERSION+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,b)=>{if(t===!1)throw new AxiosError(i(o," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,b):!0}};function assertOptions(e,t,n){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],o=t[r];if(o){const b=e[r],u=b===void 0||o(b,r,e);if(u!==!0)throw new AxiosError("option "+r+" must be "+u,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+r,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(t){this.defaults=t,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:r}=n;s!==void 0&&validator.assertOptions(s,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),i!=null&&(utils.isFunction(i)?n.paramsSerializer={serialize:i}:validator.assertOptions(i,{encode:validators.function,serialize:validators.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&utils.merge(r.common,r[n.method]);r&&utils.forEach(["delete","get","head","post","put","patch","common"],S=>{delete r[S]}),n.headers=AxiosHeaders$1.concat(o,r);const b=[];let u=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(n)===!1||(u=u&&P.synchronous,b.unshift(P.fulfilled,P.rejected))});const c=[];this.interceptors.response.forEach(function(P){c.push(P.fulfilled,P.rejected)});let l,A=0,T;if(!u){const S=[dispatchRequest.bind(this),void 0];for(S.unshift.apply(S,b),S.push.apply(S,c),T=S.length,l=Promise.resolve(n);A<T;)l=l.then(S[A++],S[A++]);return l}T=b.length;let R=n;for(A=0;A<T;){const S=b[A++],P=b[A++];try{R=S(R)}catch(x){P.call(this,x);break}}try{l=dispatchRequest.call(this,R)}catch(S){return Promise.reject(S)}for(A=0,T=c.length;A<T;)l=l.then(c[A++],c[A++]);return l}getUri(t){t=mergeConfig(this.defaults,t);const n=buildFullPath(t.baseURL,t.url);return buildURL(n,t.params,t.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(t){Axios.prototype[t]=function(n,s){return this.request(mergeConfig(s||{},{method:t,url:n,data:(s||{}).data}))}});utils.forEach(["post","put","patch"],function(t){function n(s){return function(r,o,b){return this.request(mergeConfig(b||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Axios.prototype[t]=n(),Axios.prototype[t+"Form"]=n(!0)});const Axios$1=Axios;class CancelToken{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(b=>{s.subscribe(b),r=b}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,b){s.reason||(s.reason=new CanceledError(r,o,b),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new CancelToken(function(i){t=i}),cancel:t}}}const CancelToken$1=CancelToken;function spread(e){return function(n){return e.apply(null,n)}}function isAxiosError(e){return utils.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([e,t])=>{HttpStatusCode[t]=e});const HttpStatusCode$1=HttpStatusCode;function createInstance(e){const t=new Axios$1(e),n=bind(Axios$1.prototype.request,t);return utils.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return createInstance(mergeConfig(e,i))},n}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,instance=axios$1.create({baseURL:"https://the-ebook-store-be.onrender.com"});instance.interceptors.request.use(e=>{const t=getRegion();return e.headers.region=t,e});const theHeader_vue_vue_type_style_index_0_lang="",_sfc_main$9={props:["cartQuantity"],name:"MyPage",data(){return{userId:"",user:{},isMenuHovered:!1,balance:0,region:"",isLogined:!1}},methods:{loginpage(){localStorage.removeItem("userId"),this.userId="",this.isLogined=!1,location.reload()},changeRegion(e){setRegion(e),location.reload()}},created(){this.userId=localStorage.getItem("userId");const e=localStorage.getItem("token");this.userId!==null&&this.userId!==""&&(this.isLogined=!0),this.region=getRegion(),instance.get(`/ebook/getUserBalance/${this.userId}`,{headers:{Authorization:`Bearer ${e}`}}).then(t=>{this.balance=t.data.balance})}},_hoisted_1$9={class:"header"},_hoisted_2$9={id:"navbar",class:"navbar fixed-top navbar-expand-lg navbar-light",style:{display:"flex","justify-content":"space-evenly"}},_hoisted_3$8={class:"container",style:{margin:"0"}},_hoisted_4$7=createBaseVNode("a",{class:"navbar-brand",href:"#",style:{"padding-left":"10px","padding-top":"10px"}},[createBaseVNode("h3",null,"The eBooks Store")],-1),_hoisted_5$7=createBaseVNode("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[createBaseVNode("span",{class:"navbar-toggler-icon"})],-1),_hoisted_6$7={class:"collapse navbar-collapse justify-content-end align-center navbar-light",id:"navbarNav"},_hoisted_7$7={class:"navbar-nav ml-auto"},_hoisted_8$6=createBaseVNode("li",{class:"nav-item active"},[createBaseVNode("a",{class:"nav-link",href:"",style:{color:"black"}},"HomePage")],-1),_hoisted_9$5=createBaseVNode("li",{class:"nav-item active"},[createBaseVNode("a",{class:"nav-link",href:"",style:{color:"black"}},"My collections")],-1),_hoisted_10$5={class:"nav-item dropdown"},_hoisted_11$4={key:0,class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",style:{color:"black"}},_hoisted_12$3={key:1,class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",style:{color:"black"}},_hoisted_13$3={class:"dropdown-menu",style:{"background-color":"rgba(255, 255, 255, 0.8)"}},_hoisted_14$3={key:0,class:"dropdown-item",href:"#",style:{color:"black"}},_hoisted_15$3={key:0,class:"dropdown-item",href:"#",style:{color:"black"}},_hoisted_16$3={key:0,class:"dropdown-item",style:{color:"black"}},_hoisted_17$3=createBaseVNode("li",null,null,-1),_hoisted_18$3={key:0,class:"nav-item"},_hoisted_19$2={class:"nav-link",href:"#",style:{color:"black"}},_hoisted_20$1=createBaseVNode("div",{class:"cart-button",style:{margin:"0 30px"}},[createBaseVNode("span",{class:"cart-icon"},[createBaseVNode("i",{class:"fas fa-shopping-cart"})]),createBaseVNode("span",{class:"cart-label"},"Buy Point")],-1),_hoisted_21$1={key:1,style:{display:"flex","justify-content":"center","align-items":"center",height:"100%"}};function _sfc_render$8(e,t,n,s,i,r){const o=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("nav",_hoisted_2$9,[createBaseVNode("div",_hoisted_3$8,[_hoisted_4$7,_hoisted_5$7,createBaseVNode("div",_hoisted_6$7,[createBaseVNode("ul",_hoisted_7$7,[createVNode(o,{to:"/",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[_hoisted_8$6]),_:1}),createVNode(o,{to:"/collections/MyCollection",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[_hoisted_9$5]),_:1}),createBaseVNode("li",_hoisted_10$5,[this.userId?(openBlock(),createElementBlock("a",_hoisted_11$4," Account Login ")):createCommentVNode("",!0),this.userId?createCommentVNode("",!0):(openBlock(),createElementBlock("a",_hoisted_12$3," Account ")),createBaseVNode("ul",_hoisted_13$3,[createVNode(o,{to:"/login",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[createBaseVNode("li",null,[this.userId?createCommentVNode("",!0):(openBlock(),createElementBlock("a",_hoisted_14$3,"Đăng Nhập"))]),createBaseVNode("li",null,[this.userId?createCommentVNode("",!0):(openBlock(),createElementBlock("a",_hoisted_15$3,"Đăng ký"))])]),_:1}),createVNode(o,{to:"/",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[createBaseVNode("li",{onClick:t[0]||(t[0]=b=>r.loginpage())},[this.userId?(openBlock(),createElementBlock("a",_hoisted_16$3,"Thoát")):createCommentVNode("",!0)])]),_:1})])]),_hoisted_17$3,i.region==="japan"&&this.isLogined===!0?(openBlock(),createElementBlock("li",_hoisted_18$3,[createBaseVNode("a",_hoisted_19$2,"User Point: "+toDisplayString(i.balance),1)])):createCommentVNode("",!0)])]),i.region==="japan"&&this.isLogined===!0?(openBlock(),createBlock(o,{key:0,to:"/offerProduct/cart",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[_hoisted_20$1]),_:1})):createCommentVNode("",!0),this.isLogined===!1?(openBlock(),createElementBlock("div",_hoisted_21$1,[i.region==="japan"?(openBlock(),createElementBlock("span",{key:0,onClick:t[1]||(t[1]=b=>r.changeRegion("vietnam")),style:{cursor:"pointer","text-decoration":"underline",color:"inherit",font:"bold","font-weight":"bold","font-size":"1.3rem","margin-left":"10px"}}," Vietnam ")):createCommentVNode("",!0),i.region==="vietnam"?(openBlock(),createElementBlock("span",{key:1,onClick:t[2]||(t[2]=b=>r.changeRegion("japan")),style:{cursor:"pointer","text-decoration":"underline",color:"inherit","font-size":"1.3rem","margin-left":"10px","font-weight":"bold"}}," Japan ")):createCommentVNode("",!0)])):createCommentVNode("",!0)])])])}const theHeader=_export_sfc(_sfc_main$9,[["render",_sfc_render$8]]),theFooter_vue_vue_type_style_index_0_lang="",_sfc_main$8={data(){return{}}},_hoisted_1$8={class:"this-footer",style:{position:"absolute",width:"100%"}},_hoisted_2$8=createStaticVNode('<div class="bg-dark text-white pt-5 pb-4"><div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" referrerpolicy="no-referrer"><div style="display:flex;justify-content:space-evenly;"><div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3"><h5 class="text-uppercase mb-4 font-weight-bold" style="color:#cd853f;"> The eBook Store </h5><a><p class="text-white"> Visit The eBook Store to immerse yourself in a vast collection of digital books, enjoy a comfortable reading experience, and explore a rich variety of genres. With over two decades of growth and development, we take pride in being a trusted companion for book lovers on their journey of knowledge and inspiration. </p></a></div><div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3"><h5 class="text-uppercase mb-4 font-weight-bold" style="color:#cd853f;"> Products </h5><p><a href="#" class="text-white" style="text-decoration:none;">Fiction</a></p><p><a href="#" class="text-white" style="text-decoration:none;">Non-fiction</a></p><p><a href="#" class="text-white" style="text-decoration:none;">Self-help</a></p><p><a href="#" class="text-white" style="text-decoration:none;">Children&#39;s Books</a></p></div><div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3"><h5 class="text-uppercase mb-4 font-weight-bold" style="color:#cd853f;"> Policies </h5><p><a href="#" class="text-white" style="text-decoration:none;">Terms of Use</a></p><p><a href="#" class="text-white" style="text-decoration:none;">Privacy Policy</a></p><p><a href="#" class="text-white" style="text-decoration:none;">Invoice Guide</a></p><p><a href="#" class="text-white" style="text-decoration:none;">Support</a></p></div><div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3"><h5 class="text-uppercase mb-4 font-weight-bold" style="color:#cd853f;"> Contact </h5><p><i class="fas fa-home mr-3 text-white"> District 5, Ho Chi Minh City </i></p><p><i class="fas fa-envelope mr-3 text-white"> daohuyhieu@gmail.com </i></p><p><i class="fas fa-phone mr-3 text-white"> +84 252 5678</i></p><p><i class="fas fa-print mr-3 text-white"> +1900 1800</i></p></div></div></div><hr class="mb-4"><div class="row"><div class="col-md-7 col-lg-8"><p class="text-white" style="margin-left:30px;"> Copyright @2023 All rights reserved by: <a> Dao Huy Hieu </a></p></div><div class="col-md-5 col-lg-4"><div class="text-center text-md-right"><ul class="list-unstyled list-inline"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" referrerpolicy="no-referrer"><li class="list-inline-item"><a href="#" class="btn-floating btn-sm text-white" style="font-size:23px;"><i class="fab fa-facebook"></i></a></li><li class="list-inline-item"><a href="#" class="btn-floating btn-sm text-white" style="font-size:23px;"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item"><a href="#" class="btn-floating btn-sm text-white" style="font-size:23px;"><i class="fab fa-google-plus"></i></a></li><li class="list-inline-item"><a href="#" class="btn-floating btn-sm text-white" style="font-size:23px;"><i class="fab fa-youtube"></i></a></li><li class="list-inline-item"><a href="#" class="btn-floating btn-sm text-white" style="font-size:23px;"><i class="fab fa-instagram"></i></a></li></ul></div></div></div></div>',1),_hoisted_3$7=[_hoisted_2$8];function _sfc_render$7(e,t,n,s,i,r){return openBlock(),createElementBlock("div",_hoisted_1$8,_hoisted_3$7)}const theFooter=_export_sfc(_sfc_main$8,[["render",_sfc_render$7]]),_imports_0="/assets/1-7ecc8dc0.jpg",_imports_1="/assets/2-08fdf1ac.jpg",_imports_2="/assets/3-0c693afc.jpg",homepage_vue_vue_type_style_index_0_lang="",_sfc_main$7={created(){this.userId=localStorage.getItem("userId"),this.getOrder(),this.region=getRegion(),this.userId||localStorage.setItem("userRegion","japan")},data(){return{products:[],region:"",currentPage:1,pageSize:15}},computed:{totalPages(){return Math.ceil(this.products.length/this.pageSize)},paginatedProducts(){const e=(this.currentPage-1)*this.pageSize;return this.products.slice(e,e+this.pageSize)}},components:{theFooter,theHeader},methods:{getOrder(){instance.get("/ebook/getEbooks").then(e=>{this.products=e.data})},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--}}},_hoisted_1$7={class:"body"},_hoisted_2$7=createBaseVNode("div",{class:"loader_overlay loaded"},null,-1),_hoisted_3$6=createStaticVNode('<section class="banner-home"><div id="demo" class="carousel slide" data-bs-ride="carousel"><div class="carousel-indicators"><button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button><button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button><button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button></div><div class="carousel-inner"><div class="carousel-item active"><img src="'+_imports_0+'" height="700px" class="d-block w-100"></div><div class="carousel-item"><img src="'+_imports_1+'" height="700px" class="d-block w-100"></div><div class="carousel-item"><img src="'+_imports_2+'" height="700px" class="d-block w-100"></div></div><button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button><button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div></section>',1),_hoisted_4$6={class:"menu-home"},_hoisted_5$6={style:{display:"block","z-index":"1",position:"relative",width:"100%"}},_hoisted_6$6=createBaseVNode("div",{class:"menu_list_home flex_wrap display_flex",style:{"justify-content":"center","align-items":"center"}},[createBaseVNode("h1",null,"EBook List")],-1),_hoisted_7$6={style:{width:"90%",display:"flex","flex-wrap":"wrap",gap:"16px",margin:"2% 4%","align-content":"flex-start"}},_hoisted_8$5={class:"card-products"},_hoisted_9$4={class:"card"},_hoisted_10$4=["src"],_hoisted_11$3={class:"card-info"},_hoisted_12$2={style:{"font-size":"1.3rem","font-weight":"600",color:"blue"}},_hoisted_13$2={key:0,style:{color:"black","font-size":"1.5rem"}},_hoisted_14$2={key:1,style:{color:"black","font-size":"1.5rem"}},_hoisted_15$2={style:{display:"flex","justify-content":"center",margin:"20px 0"}},_hoisted_16$2=["disabled"],_hoisted_17$2=["disabled"],_hoisted_18$2=createStaticVNode('<section><div class="container" style="width:100%;"><h1 style="margin-left:4%;">Các Mẫu Sách</h1></div><div class="d-flex flex-wrap justify-content-around" style="margin-bottom:40px;"><img src="https://cdn.shopify.com/s/files/1/2081/8163/files/001_90f0323d-1f0a-4f1d-9584-062f868e5473.jpg" class="shop_space" style="width:45%;height:600px;"><img src="https://cdn.shopify.com/s/files/1/2081/8163/files/010-CAPTAIN-FANTASTIC-th.jpg" class="shop_space" style="width:45%;height:600px;"><img src="https://cdn.shopify.com/s/files/1/2081/8163/files/005-SUNNY-MEADOWS-WOODLAND-SCHOOL-th.jpg" class="shop_space" style="width:45%;height:600px;"><img src="https://raw.githubusercontent.com/redlogs1st/cnd_ebook/refs/heads/main/ebookSource/01/001-HIDE-AND-SEEK-free-childrens-books-1.avif" class="shop_space" style="width:45%;height:600px;"></div></section>',1);function _sfc_render$6(e,t,n,s,i,r){const o=resolveComponent("theHeader"),b=resolveComponent("router-link"),u=resolveComponent("theFooter");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("body",_hoisted_1$7,[_hoisted_2$7,createVNode(o),_hoisted_3$6,createBaseVNode("section",_hoisted_4$6,[createBaseVNode("div",_hoisted_5$6,[_hoisted_6$6,createBaseVNode("div",_hoisted_7$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.paginatedProducts,c=>(openBlock(),createElementBlock("div",{key:c.id,class:"container collections",style:{flex:"1 1 calc(30% - 16px)",width:"350px","max-width":"400px",height:"400px"}},[createBaseVNode("div",_hoisted_8$5,[createBaseVNode("div",_hoisted_9$4,[createVNode(b,{to:`/offerProduct/${c.id}`,style:{"text-decoration":"none !important"}},{default:withCtx(()=>[createBaseVNode("img",{class:"card-thumb",src:c.imgUrl},null,8,_hoisted_10$4),createBaseVNode("div",_hoisted_11$3,[createBaseVNode("h6",_hoisted_12$2,toDisplayString(c.title),1),i.region==="japan"?(openBlock(),createElementBlock("p",_hoisted_13$2,toDisplayString(c.point_price)+" point ",1)):(openBlock(),createElementBlock("p",_hoisted_14$2," $ "+toDisplayString(c.price),1))])]),_:2},1032,["to"])])])]))),128))]),createBaseVNode("div",_hoisted_15$2,[createBaseVNode("button",{onClick:t[0]||(t[0]=(...c)=>r.prevPage&&r.prevPage(...c)),disabled:i.currentPage===1,class:"btn btn-primary",style:{"margin-right":"10px"}}," Prev ",8,_hoisted_16$2),createBaseVNode("span",null,"Page "+toDisplayString(i.currentPage)+" / "+toDisplayString(r.totalPages),1),createBaseVNode("button",{onClick:t[1]||(t[1]=(...c)=>r.nextPage&&r.nextPage(...c)),disabled:i.currentPage===r.totalPages,class:"btn btn-primary",style:{"margin-left":"10px"}}," Next ",8,_hoisted_17$2)])])]),_hoisted_18$2]),createVNode(u)],64)}const index1=_export_sfc(_sfc_main$7,[["render",_sfc_render$6]]),login_vue_vue_type_style_index_0_lang="",_sfc_main$6={data(){return{user:{},user1:{}}},methods:{login(){let e=document.getElementById("user1").value,t=document.getElementById("pass1").value;e==="0832525679"&&t==="thinhlatoi2"?document.location.href="./admin":instance.post("/ebook/login",this.user1).then(n=>{localStorage.setItem("userId",n.data.user.id),localStorage.setItem("token",n.data.token),setRegion(n.data.user.region),document.location.href="/"}).catch(n=>{console.log(n),alert("Login failed")})},async getUserIpAndCountry(){try{const t=await(await fetch("https://api.db-ip.com/v2/free/self")).json();return{ip:t.ipAddress,country:t.countryName,countryCode:t.countryCode}}catch(e){return console.error("Failed to get IP info:",e),{ip:"unknown",country:"unknown",countryCode:"XX"}}},async register(){let e=document.getElementById("pass").value,t=document.getElementById("pass2").value,n=document.getElementById("pass2");const i=await(await fetch("https://api.db-ip.com/v2/free/self")).json();console.log(i.countryName),this.user.region=i.countryName,setRegion(i.countryName.toLowerCase()),e!=t?(alert("incorrect password"),Event.preventDefault()):(instance.post("/ebook/createUser",this.user).then(r=>{this.user="",alert("Sign up successful")}).catch(r=>{alert("Số Điện Thoại Không Hợp Lệ")}),n.value="")},showPassword(){var e=document.getElementById("pass1");console.log(e),e.type==="password"?e.type="text":e.type="password"},checkPasscfm(){let e=document.getElementById("pass").value,t=document.getElementById("pass2").value,n=document.getElementById("message");e!=t&&(n.textContent="Nhập lại mật khẩu không khớp",Event.preventDefault())}}},_hoisted_1$6={class:"background-container"},_hoisted_2$6={class:"login-wrap"},_hoisted_3$5={class:"login-html"},_hoisted_4$5=createBaseVNode("input",{id:"tab-1",type:"radio",name:"tab",class:"sign-in",checked:""},null,-1),_hoisted_5$5=createBaseVNode("label",{for:"tab-1",class:"tab"},"Đăng Nhập",-1),_hoisted_6$5=createBaseVNode("input",{id:"tab-2",type:"radio",name:"tab",class:"sign-up"},null,-1),_hoisted_7$5=createBaseVNode("label",{for:"tab-2",class:"tab"},"Đăng Ký",-1),_hoisted_8$4={class:"login-form"},_hoisted_9$3={class:"group"},_hoisted_10$3=createBaseVNode("label",{for:"user1",class:"label"},"Email",-1),_hoisted_11$2={class:"group"},_hoisted_12$1=createBaseVNode("label",{for:"pass1",class:"label"},"Mật Khẩu",-1),_hoisted_13$1={class:"group"},_hoisted_14$1=createBaseVNode("label",{for:"check"},[createBaseVNode("span",{class:"icon"}),createTextVNode(" Hiện mật khẩu")],-1),_hoisted_15$1=createBaseVNode("div",{class:"group"},[createBaseVNode("button",{class:"button"},"Đăng Nhập")],-1),_hoisted_16$1=createBaseVNode("div",{class:"hr"},null,-1),_hoisted_17$1=createBaseVNode("div",{class:"foot-lnk"},[createBaseVNode("a",null,"Quên Mật Khẩu?")],-1),_hoisted_18$1={class:"group"},_hoisted_19$1=createBaseVNode("label",{for:"user2",class:"label"},"Họ và Tên",-1),_hoisted_20={class:"group"},_hoisted_21=createBaseVNode("label",{for:"user2",class:"label"},"Email",-1),_hoisted_22={class:"group"},_hoisted_23=createBaseVNode("label",{for:"pass",class:"label"},"Mật Khẩu",-1),_hoisted_24=createBaseVNode("div",{class:"group"},[createBaseVNode("label",{for:"pass2",class:"label"},"Lập Lại Mật Khẩu"),createBaseVNode("input",{required:"true",id:"pass2",type:"password",class:"input","data-type":"password"})],-1),_hoisted_25=createBaseVNode("div",{class:"group"},[createBaseVNode("button",{class:"button",onclick:"checkPasscfm()",value:"Sign Up"}," Đăng Ký ")],-1),_hoisted_26=createBaseVNode("div",{class:"hr"},null,-1),_hoisted_27=createBaseVNode("div",{class:"foot-lnk"},null,-1);function _sfc_render$5(e,t,n,s,i,r){return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",_hoisted_3$5,[_hoisted_4$5,_hoisted_5$5,_hoisted_6$5,_hoisted_7$5,createBaseVNode("div",_hoisted_8$4,[createBaseVNode("form",{class:"sign-in-htm",method:"post",onSubmit:t[3]||(t[3]=withModifiers(o=>r.login(),["prevent"]))},[createBaseVNode("div",_hoisted_9$3,[_hoisted_10$3,withDirectives(createBaseVNode("input",{id:"user1",type:"email",class:"input","onUpdate:modelValue":t[0]||(t[0]=o=>i.user1.email=o)},null,512),[[vModelText,i.user1.email]])]),createBaseVNode("div",_hoisted_11$2,[_hoisted_12$1,withDirectives(createBaseVNode("input",{id:"pass1",type:"password",class:"input","onUpdate:modelValue":t[1]||(t[1]=o=>i.user1.password=o)},null,512),[[vModelText,i.user1.password]])]),createBaseVNode("div",_hoisted_13$1,[createBaseVNode("input",{id:"check",type:"checkbox",onClick:t[2]||(t[2]=o=>r.showPassword()),class:"check"}),_hoisted_14$1]),_hoisted_15$1,_hoisted_16$1,_hoisted_17$1],32),createBaseVNode("form",{class:"sign-up-htm",onSubmit:t[7]||(t[7]=withModifiers(o=>r.register(),["prevent"]))},[createBaseVNode("div",_hoisted_18$1,[_hoisted_19$1,withDirectives(createBaseVNode("input",{required:"true",minlength:"8",maxlength:"30",id:"user2",type:"text",class:"input","onUpdate:modelValue":t[4]||(t[4]=o=>i.user.name=o)},null,512),[[vModelText,i.user.name]])]),createBaseVNode("div",_hoisted_20,[_hoisted_21,withDirectives(createBaseVNode("input",{required:"true",minlength:"8",id:"user2",type:"email",class:"input","onUpdate:modelValue":t[5]||(t[5]=o=>i.user.email=o)},null,512),[[vModelText,i.user.email]])]),createBaseVNode("div",_hoisted_22,[_hoisted_23,withDirectives(createBaseVNode("input",{required:"true",minlength:"6",id:"pass",type:"password",class:"input","data-type":"password","onUpdate:modelValue":t[6]||(t[6]=o=>i.user.password=o)},null,512),[[vModelText,i.user.password]])]),_hoisted_24,_hoisted_25,_hoisted_26,_hoisted_27],32)])])])])}const index2=_export_sfc(_sfc_main$6,[["render",_sfc_render$5]]),BookPurchaseModal_vue_vue_type_style_index_0_scoped_bac10101_lang="",_sfc_main$5={name:"BookPurchaseModal",props:{visible:{type:Boolean,required:!0},purchaseInfo:{type:Object,required:!1,default:()=>({})}},emits:["close"],data(){return{userId:"",dollarAmount:5}},computed:{calculatedPoints(){return this.dollarAmount*20}},created(){this.userId=localStorage.getItem("userId")||"",this.purchaseInfo&&this.purchaseInfo.amount&&(this.dollarAmount=this.purchaseInfo.amount)},watch:{visible(e){e&&this.$nextTick(()=>{window.paypal&&this.$refs.paypalContainer.children.length===0&&this.renderPayPalButton()})}},methods:{renderPayPalButton(){const e=localStorage.getItem("token");window.paypal.Buttons({createOrder:(t,n)=>n.order.create({purchase_units:[{amount:{value:this.purchaseInfo.price}}]}),onApprove:(t,n)=>n.order.capture().then(s=>{instance.post("/ebook/makePurchase",{user_id:Number(this.userId),ebook_id:this.purchaseInfo.id,paid_with_point:!1},{headers:{Authorization:`Bearer ${e}`}}).then(()=>{alert("Buy book successfully"),close()})})}).render(this.$refs.paypalContainer)},close(){this.$emit("close")}}},_withScopeId$1=e=>(pushScopeId("data-v-bac10101"),e=e(),popScopeId(),e),_hoisted_1$5={class:"modal-content"},_hoisted_2$5={class:"main-wrapper"},_hoisted_3$4={class:"checkout-container"},_hoisted_4$4={class:"main-title"},_hoisted_5$4={class:"payment-section"},_hoisted_6$4=_withScopeId$1(()=>createBaseVNode("h2",null,"Pay with PayPal or Visa",-1)),_hoisted_7$4={ref:"paypalContainer",class:"paypal-button-wrapper"};function _sfc_render$4(e,t,n,s,i,r){return n.visible?(openBlock(),createElementBlock("div",{key:0,class:"modal-overlay",onClick:t[1]||(t[1]=withModifiers((...o)=>r.close&&r.close(...o),["self"]))},[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$5,[createBaseVNode("div",_hoisted_3$4,[createBaseVNode("h1",_hoisted_4$4,"You want to buy "+toDisplayString(n.purchaseInfo.title),1),createBaseVNode("h2",null,"Price: $ "+toDisplayString(n.purchaseInfo.price),1),createBaseVNode("div",_hoisted_5$4,[_hoisted_6$4,createBaseVNode("div",_hoisted_7$4,null,512)])]),createBaseVNode("button",{class:"close-button",onClick:t[0]||(t[0]=(...o)=>r.close&&r.close(...o)),style:{display:"flex","justify-self":"end"}}," Close ")])])])):createCommentVNode("",!0)}const BookPurchaseModal=_export_sfc(_sfc_main$5,[["render",_sfc_render$4],["__scopeId","data-v-bac10101"]]),offerProduct_vue_vue_type_style_index_0_lang="",_sfc_main$4={name:"thinh",components:{theHeader,theFooter,BookPurchaseModal},data(){return{product:{},relatedProducts:[],selectedSizes:"",selectedToppings:[],quantity:1,userId:"",totalPrice:0,orderDetails:{},region:"",showModal:!1}},created(){this.userId=localStorage.getItem("userId"),this.getProduct(),this.region=getRegion()},methods:{getProduct(){console.log("item id",this.$route.params.id),instance.get("/ebook/getEbooks").then(e=>{console.log(e.data),this.product=e.data.find(t=>t.id==this.$route.params.id),this.relatedProducts=e.data.filter(t=>t.type===this.product.type&&t.id!==this.product.id).slice(0,5)})},changePage(){this.getProduct(),this.selectedSizes="option1",this.selectedToppings=[],this.quantity=1},async cartPage(e){if(!this.userId)alert("Vui Long Dang Nhap");else if(this.region=="japan"){const t=localStorage.getItem("token"),n=localStorage.getItem("userId"),s=await instance.get(`/ebook/getUserBalance/${n}`,{headers:{Authorization:`Bearer ${t}`}});console.log("user balance",s.data.balance),e.point_price>s.data.balance?alert("Account's Balance is not enough to buy"):await instance.post("/ebook/makePurchase",{user_id:Number(n),ebook_id:e.id,paid_with_point:!0},{headers:{Authorization:`Bearer ${t}`}}).then(()=>{alert("Buy book successfully"),location.reload()})}else this.showModal=!0},increaseQuantity(){this.quantity++},decreaseQuantity(){this.quantity>1&&this.quantity--},AddToBasket(){this.userId?(this.orderDetails.orderId=this.product._id,this.orderDetails.userId=this.userId,this.orderDetails.quantity=this.quantity,this.orderDetails.totalPrice=this.totalPrice,this.orderDetails.size=this.selectedSizes,this.orderDetails.toppings=this.selectedToppings,this.orderDetails.name=this.product.name,instance.post("/orderDetail",this.orderDetails).then(e=>{this.getProduct(),this.selectedSizes="option1",this.selectedToppings=[],this.quantity=1}).catch(e=>{console.log(e)})):alert("Vui Long Dang Nhap")}},mounted(){},computed:{calculateTotal(){let e=this.product.price;this.selectedSizes==="option1"?e=this.product.price:this.selectedSizes!=="option1"&&(e=this.selectedSizes.price+this.product.price),this.selectedSizes||(e=this.product.price);const t=this.selectedToppings.reduce((n,s)=>n+s.price,0);return this.totalPrice=(e+t)*this.quantity,(e+t)*this.quantity}}},_hoisted_1$4={class:"container thisProduct"},_hoisted_2$4={class:"thisproduct-container"},_hoisted_3$3=["src"],_hoisted_4$3={class:"container card-info-thisProduct",style:{width:"900px"}},_hoisted_5$3={key:0,style:{display:"flex","justify-content":"flex-start",color:"black","font-size":"1.5rem"}},_hoisted_6$3={key:1,style:{display:"flex","justify-content":"flex-start",color:"black","font-size":"1.5rem"}},_hoisted_7$3={class:"Order-product",style:{display:"flex"}},_hoisted_8$3=createBaseVNode("h5",null,"Mua Sách",-1),_hoisted_9$2=[_hoisted_8$3],_hoisted_10$2={class:"product-related-info"},_hoisted_11$1=createBaseVNode("div",null,[createBaseVNode("h4",null,"Related Books")],-1),_hoisted_12={class:"container collections",style:{display:"block"}},_hoisted_13=createBaseVNode("div",{class:"product-title"},null,-1),_hoisted_14={class:"card-products"},_hoisted_15={class:"menu-list-collectiions",style:{display:"flex","justify-content":"space-evenly"}},_hoisted_16=["src"],_hoisted_17={class:"card-info"},_hoisted_18={key:0,style:{"font-size":"1.2rem"}},_hoisted_19={key:1,style:{"font-size":"1.2rem"}};function _sfc_render$3(e,t,n,s,i,r){const o=resolveComponent("theHeader"),b=resolveComponent("BookPurchaseModal"),u=resolveComponent("router-link"),c=resolveComponent("theFooter");return openBlock(),createElementBlock(Fragment,null,[createVNode(o),createVNode(b,{purchaseInfo:i.product,visible:i.showModal,onClose:t[0]||(t[0]=l=>i.showModal=!1)},null,8,["purchaseInfo","visible"]),createBaseVNode("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("div",null,[createBaseVNode("img",{class:"card-thumb",src:i.product.imgUrl,style:{width:"570px",height:"570px"}},null,8,_hoisted_3$3)]),createBaseVNode("div",_hoisted_4$3,[createBaseVNode("h1",null,toDisplayString(i.product.title),1),i.region==="japan"?(openBlock(),createElementBlock("p",_hoisted_5$3," Point: "+toDisplayString(i.product.point_price),1)):(openBlock(),createElementBlock("p",_hoisted_6$3," Price: $ "+toDisplayString(i.product.price),1)),createBaseVNode("div",_hoisted_7$3,[createBaseVNode("button",{type:"button",class:"btn-order",onClick:t[1]||(t[1]=l=>r.cartPage(i.product))},_hoisted_9$2)])])])]),createBaseVNode("div",_hoisted_10$2,[_hoisted_11$1,createBaseVNode("div",_hoisted_12,[_hoisted_13,createBaseVNode("div",_hoisted_14,[createBaseVNode("div",_hoisted_15,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.relatedProducts,l=>(openBlock(),createElementBlock("div",{class:"card",key:l.id,style:{width:"200px",height:"200px"},onClick:t[2]||(t[2]=A=>r.changePage())},[createVNode(u,{to:{name:"offerProduct",params:{id:l.id},components:l},style:{"text-decoration":"none"}},{default:withCtx(()=>[createBaseVNode("img",{class:"card-thumb",src:l.imgUrl,style:{width:"200px",height:"200px"}},null,8,_hoisted_16),createBaseVNode("div",_hoisted_17,[createBaseVNode("h6",null,toDisplayString(l.title),1),i.region==="japan"?(openBlock(),createElementBlock("p",_hoisted_18," Point: "+toDisplayString(i.product.point_price),1)):(openBlock(),createElementBlock("p",_hoisted_19," Price: $ "+toDisplayString(i.product.price),1))])]),_:2},1032,["to"])]))),128))])])])]),createVNode(c)],64)}const offerProduct=_export_sfc(_sfc_main$4,[["render",_sfc_render$3]]),sidebar_vue_vue_type_style_index_0_lang="",_sfc_main$3={data(){return{}},method:{}},_hoisted_1$3=createBaseVNode("head",null,[createBaseVNode("meta",{charset:"UTF-8"}),createBaseVNode("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),createBaseVNode("title",null,"Sidebar")],-1),_hoisted_2$3={id:"container",class:"sidebar-container"},_hoisted_3$2={id:"this-sidebar"},_hoisted_4$2=createBaseVNode("a",{class:"dropdown-item",href:"",style:{color:"black","margin-top":"10px"}},"Tất Cả",-1),_hoisted_5$2=createBaseVNode("a",{class:"dropdown-item",href:"",style:{color:"black","margin-top":"10px"}},"Cà Phê",-1),_hoisted_6$2=createBaseVNode("a",{class:"dropdown-item",href:"",style:{color:"black","margin-top":"10px"}},"Trà",-1),_hoisted_7$2=createBaseVNode("a",{class:"dropdown-item",href:"",style:{color:"black","margin-top":"10px"}},"Trà Sữa",-1),_hoisted_8$2=createBaseVNode("a",{class:"dropdown-item",href:"",style:{color:"black","margin-top":"10px"}},"Đá Xay",-1);function _sfc_render$2(e,t,n,s,i,r){const o=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[_hoisted_1$3,createBaseVNode("body",null,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$2,[createVNode(o,{to:"/collections/AllCollections",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[_hoisted_4$2]),_:1}),createVNode(o,{to:"/collections/MyCollection",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[_hoisted_5$2]),_:1}),createVNode(o,{to:"/collections/Tea",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[_hoisted_6$2]),_:1}),createVNode(o,{to:"/collections/MilkTea",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[_hoisted_7$2]),_:1}),createVNode(o,{to:"/collections/Frosty",style:{"text-decoration":"none !important"}},{default:withCtx(()=>[_hoisted_8$2]),_:1})])])])],64)}const sidebar=_export_sfc(_sfc_main$3,[["render",_sfc_render$2]]);function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}),n}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,n){module.exports=t.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Xe;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=Ae,t.bytesToString=W,t.createValidAbsoluteUrl=ke,t.getModificationDate=we,t.getUuid=Ge,t.getVerbosityLevel=oe,t.info=de,t.isArrayBuffer=ue,t.isArrayEqual=Ee,t.isNodeJS=void 0,t.normalizeUnicode=qe,t.objectFromMap=K,t.objectSize=U,t.setVerbosityLevel=V,t.shadow=Re,t.string32=F,t.stringToBytes=w,t.stringToPDFString=pe,t.stringToUTF8String=J,t.unreachable=Y,t.utf8StringToString=Q,t.warn=he;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=n;const s=[1,0,0,1,0,0];t.IDENTITY_MATRIX=s;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const r=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=r;const o=1.35;t.LINE_FACTOR=o;const b=.35;t.LINE_DESCENT_FACTOR=b;const u=b/o;t.BASELINE_FACTOR=u;const c={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=c;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=l;const A="pdfjs_internal_editor_";t.AnnotationEditorPrefix=A;const T={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=T;const R={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=R;const S={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=S;const P={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=P;const x={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=x;const M={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=M;const I={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=I;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=B;const O={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=O;const v={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=v;const C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=C;const z={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=z;const N={O:"PageOpen",C:"PageClose"};t.PageActionEventType=N;const E={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=E;const j={NONE:0,BINARY:1};t.CMapCompressionType=j;const L={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=L;const Z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=Z;let se=E.WARNINGS;function V(be){Number.isInteger(be)&&(se=be)}function oe(){return se}function de(be){se>=E.INFOS&&console.log(`Info: ${be}`)}function he(be){se>=E.WARNINGS&&console.log(`Warning: ${be}`)}function Y(be){throw new Error(be)}function Ae(be,ae){be||Y(ae)}function Se(be){switch(be==null?void 0:be.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ke(be,ae=null,ie=null){if(!be)return null;try{if(ie&&typeof be=="string"){if(ie.addDefaultProtocol&&be.startsWith("www.")){const Te=be.match(/\./g);(Te==null?void 0:Te.length)>=2&&(be=`http://${be}`)}if(ie.tryConvertEncoding)try{be=J(be)}catch{}}const Ce=ae?new URL(be,ae):new URL(be);if(Se(Ce))return Ce}catch{}return null}function Re(be,ae,ie,Ce=!1){return Object.defineProperty(be,ae,{value:ie,enumerable:!Ce,configurable:!0,writable:!1}),ie}const H=function(){function ae(ie,Ce){this.constructor===ae&&Y("Cannot initialize BaseException."),this.message=ie,this.name=Ce}return ae.prototype=new Error,ae.constructor=ae,ae}();t.BaseException=H;class m extends H{constructor(ae,ie){super(ae,"PasswordException"),this.code=ie}}t.PasswordException=m;class _ extends H{constructor(ae,ie){super(ae,"UnknownErrorException"),this.details=ie}}t.UnknownErrorException=_;class g extends H{constructor(ae){super(ae,"InvalidPDFException")}}t.InvalidPDFException=g;class f extends H{constructor(ae){super(ae,"MissingPDFException")}}t.MissingPDFException=f;class y extends H{constructor(ae,ie){super(ae,"UnexpectedResponseException"),this.status=ie}}t.UnexpectedResponseException=y;class k extends H{constructor(ae){super(ae,"FormatError")}}t.FormatError=k;class $ extends H{constructor(ae){super(ae,"AbortException")}}t.AbortException=$;function W(be){(typeof be!="object"||(be==null?void 0:be.length)===void 0)&&Y("Invalid argument for bytesToString");const ae=be.length,ie=8192;if(ae<ie)return String.fromCharCode.apply(null,be);const Ce=[];for(let Te=0;Te<ae;Te+=ie){const st=Math.min(Te+ie,ae),tt=be.subarray(Te,st);Ce.push(String.fromCharCode.apply(null,tt))}return Ce.join("")}function w(be){typeof be!="string"&&Y("Invalid argument for stringToBytes");const ae=be.length,ie=new Uint8Array(ae);for(let Ce=0;Ce<ae;++Ce)ie[Ce]=be.charCodeAt(Ce)&255;return ie}function F(be){return String.fromCharCode(be>>24&255,be>>16&255,be>>8&255,be&255)}function U(be){return Object.keys(be).length}function K(be){const ae=Object.create(null);for(const[ie,Ce]of be)ae[ie]=Ce;return ae}function ne(){const be=new Uint8Array(4);return be[0]=1,new Uint32Array(be.buffer,0,1)[0]===1}function ee(){try{return new Function(""),!0}catch{return!1}}class ye{static get isLittleEndian(){return Re(this,"isLittleEndian",ne())}static get isEvalSupported(){return Re(this,"isEvalSupported",ee())}static get isOffscreenCanvasSupported(){return Re(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Re(this,"platform",{isWin:!1,isMac:!1}):Re(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var ae,ie;return Re(this,"isCSSRoundSupported",(ie=(ae=globalThis.CSS)==null?void 0:ae.supports)==null?void 0:ie.call(ae,"width: round(1.5px, 1px)"))}}t.FeatureTest=ye;const ve=[...Array(256).keys()].map(be=>be.toString(16).padStart(2,"0"));class fe{static makeHexColor(ae,ie,Ce){return`#${ve[ae]}${ve[ie]}${ve[Ce]}`}static scaleMinMax(ae,ie){let Ce;ae[0]?(ae[0]<0&&(Ce=ie[0],ie[0]=ie[1],ie[1]=Ce),ie[0]*=ae[0],ie[1]*=ae[0],ae[3]<0&&(Ce=ie[2],ie[2]=ie[3],ie[3]=Ce),ie[2]*=ae[3],ie[3]*=ae[3]):(Ce=ie[0],ie[0]=ie[2],ie[2]=Ce,Ce=ie[1],ie[1]=ie[3],ie[3]=Ce,ae[1]<0&&(Ce=ie[2],ie[2]=ie[3],ie[3]=Ce),ie[2]*=ae[1],ie[3]*=ae[1],ae[2]<0&&(Ce=ie[0],ie[0]=ie[1],ie[1]=Ce),ie[0]*=ae[2],ie[1]*=ae[2]),ie[0]+=ae[4],ie[1]+=ae[4],ie[2]+=ae[5],ie[3]+=ae[5]}static transform(ae,ie){return[ae[0]*ie[0]+ae[2]*ie[1],ae[1]*ie[0]+ae[3]*ie[1],ae[0]*ie[2]+ae[2]*ie[3],ae[1]*ie[2]+ae[3]*ie[3],ae[0]*ie[4]+ae[2]*ie[5]+ae[4],ae[1]*ie[4]+ae[3]*ie[5]+ae[5]]}static applyTransform(ae,ie){const Ce=ae[0]*ie[0]+ae[1]*ie[2]+ie[4],Te=ae[0]*ie[1]+ae[1]*ie[3]+ie[5];return[Ce,Te]}static applyInverseTransform(ae,ie){const Ce=ie[0]*ie[3]-ie[1]*ie[2],Te=(ae[0]*ie[3]-ae[1]*ie[2]+ie[2]*ie[5]-ie[4]*ie[3])/Ce,st=(-ae[0]*ie[1]+ae[1]*ie[0]+ie[4]*ie[1]-ie[5]*ie[0])/Ce;return[Te,st]}static getAxialAlignedBoundingBox(ae,ie){const Ce=this.applyTransform(ae,ie),Te=this.applyTransform(ae.slice(2,4),ie),st=this.applyTransform([ae[0],ae[3]],ie),tt=this.applyTransform([ae[2],ae[1]],ie);return[Math.min(Ce[0],Te[0],st[0],tt[0]),Math.min(Ce[1],Te[1],st[1],tt[1]),Math.max(Ce[0],Te[0],st[0],tt[0]),Math.max(Ce[1],Te[1],st[1],tt[1])]}static inverseTransform(ae){const ie=ae[0]*ae[3]-ae[1]*ae[2];return[ae[3]/ie,-ae[1]/ie,-ae[2]/ie,ae[0]/ie,(ae[2]*ae[5]-ae[4]*ae[3])/ie,(ae[4]*ae[1]-ae[5]*ae[0])/ie]}static singularValueDecompose2dScale(ae){const ie=[ae[0],ae[2],ae[1],ae[3]],Ce=ae[0]*ie[0]+ae[1]*ie[2],Te=ae[0]*ie[1]+ae[1]*ie[3],st=ae[2]*ie[0]+ae[3]*ie[2],tt=ae[2]*ie[1]+ae[3]*ie[3],ce=(Ce+tt)/2,Fe=Math.sqrt((Ce+tt)**2-4*(Ce*tt-st*Te))/2,Ue=ce+Fe||1,Me=ce-Fe||1;return[Math.sqrt(Ue),Math.sqrt(Me)]}static normalizeRect(ae){const ie=ae.slice(0);return ae[0]>ae[2]&&(ie[0]=ae[2],ie[2]=ae[0]),ae[1]>ae[3]&&(ie[1]=ae[3],ie[3]=ae[1]),ie}static intersect(ae,ie){const Ce=Math.max(Math.min(ae[0],ae[2]),Math.min(ie[0],ie[2])),Te=Math.min(Math.max(ae[0],ae[2]),Math.max(ie[0],ie[2]));if(Ce>Te)return null;const st=Math.max(Math.min(ae[1],ae[3]),Math.min(ie[1],ie[3])),tt=Math.min(Math.max(ae[1],ae[3]),Math.max(ie[1],ie[3]));return st>tt?null:[Ce,st,Te,tt]}static bezierBoundingBox(ae,ie,Ce,Te,st,tt,ce,Fe){const Ue=[],Me=[[],[]];let He,je,Ze,Pe,Je,$e,q,d;for(let le=0;le<2;++le){if(le===0?(je=6*ae-12*Ce+6*st,He=-3*ae+9*Ce-9*st+3*ce,Ze=3*Ce-3*ae):(je=6*ie-12*Te+6*tt,He=-3*ie+9*Te-9*tt+3*Fe,Ze=3*Te-3*ie),Math.abs(He)<1e-12){if(Math.abs(je)<1e-12)continue;Pe=-Ze/je,0<Pe&&Pe<1&&Ue.push(Pe);continue}q=je*je-4*Ze*He,d=Math.sqrt(q),!(q<0)&&(Je=(-je+d)/(2*He),0<Je&&Je<1&&Ue.push(Je),$e=(-je-d)/(2*He),0<$e&&$e<1&&Ue.push($e))}let D=Ue.length,G;const te=D;for(;D--;)Pe=Ue[D],G=1-Pe,Me[0][D]=G*G*G*ae+3*G*G*Pe*Ce+3*G*Pe*Pe*st+Pe*Pe*Pe*ce,Me[1][D]=G*G*G*ie+3*G*G*Pe*Te+3*G*Pe*Pe*tt+Pe*Pe*Pe*Fe;return Me[0][te]=ae,Me[1][te]=ie,Me[0][te+1]=ce,Me[1][te+1]=Fe,Me[0].length=Me[1].length=te+2,[Math.min(...Me[0]),Math.min(...Me[1]),Math.max(...Me[0]),Math.max(...Me[1])]}}t.Util=fe;const me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function pe(be){if(be[0]>="ï"){let ie;if(be[0]==="þ"&&be[1]==="ÿ"?ie="utf-16be":be[0]==="ÿ"&&be[1]==="þ"?ie="utf-16le":be[0]==="ï"&&be[1]==="»"&&be[2]==="¿"&&(ie="utf-8"),ie)try{const Ce=new TextDecoder(ie,{fatal:!0}),Te=w(be);return Ce.decode(Te)}catch(Ce){he(`stringToPDFString: "${Ce}".`)}}const ae=[];for(let ie=0,Ce=be.length;ie<Ce;ie++){const Te=me[be.charCodeAt(ie)];ae.push(Te?String.fromCharCode(Te):be.charAt(ie))}return ae.join("")}function J(be){return decodeURIComponent(escape(be))}function Q(be){return unescape(encodeURIComponent(be))}function ue(be){return typeof be=="object"&&(be==null?void 0:be.byteLength)!==void 0}function Ee(be,ae){if(be.length!==ae.length)return!1;for(let ie=0,Ce=be.length;ie<Ce;ie++)if(be[ie]!==ae[ie])return!1;return!0}function we(be=new Date){return[be.getUTCFullYear().toString(),(be.getUTCMonth()+1).toString().padStart(2,"0"),be.getUTCDate().toString().padStart(2,"0"),be.getUTCHours().toString().padStart(2,"0"),be.getUTCMinutes().toString().padStart(2,"0"),be.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ne{constructor(){X(this,Xe,!1);this.promise=new Promise((ae,ie)=>{this.resolve=Ce=>{ge(this,Xe,!0),ae(Ce)},this.reject=Ce=>{ge(this,Xe,!0),ie(Ce)}})}get settled(){return a(this,Xe)}}Xe=new WeakMap,t.PromiseCapability=Ne;let Be=null,Ve=null;function qe(be){return Be||(Be=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ve=new Map([["ﬅ","ſt"]])),be.replaceAll(Be,(ae,ie,Ce)=>ie?ie.normalize("NFKC"):Ve.get(Ce))}function Ge(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const be=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(be);else for(let ae=0;ae<32;ae++)be[ae]=Math.floor(Math.random()*255);return W(be)}const ze="pdfjs_internal_id_";t.AnnotationPrefix=ze},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,n,s,i,ht,o,xt,u,c,l,A,T,R,S,P,x,Ct,I,B,Ut,v,C;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(N){if(typeof N=="string"||N instanceof URL?N={url:N}:(0,_util.isArrayBuffer)(N)&&(N={data:N}),typeof N!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!N.url&&!N.data&&!N.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const E=new PDFDocumentLoadingTask,{docId:j}=E,L=N.url?getUrlProp(N.url):null,Z=N.data?getDataProp(N.data):null,se=N.httpHeaders||null,V=N.withCredentials===!0,oe=N.password??null,de=N.range instanceof PDFDataRangeTransport?N.range:null,he=Number.isInteger(N.rangeChunkSize)&&N.rangeChunkSize>0?N.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Y=N.worker instanceof PDFWorker?N.worker:null;const Ae=N.verbosity,Se=typeof N.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(N.docBaseUrl)?N.docBaseUrl:null,ke=typeof N.cMapUrl=="string"?N.cMapUrl:null,Re=N.cMapPacked!==!1,H=N.CMapReaderFactory||DefaultCMapReaderFactory,m=typeof N.standardFontDataUrl=="string"?N.standardFontDataUrl:null,_=N.StandardFontDataFactory||DefaultStandardFontDataFactory,g=N.stopAtErrors!==!0,f=Number.isInteger(N.maxImageSize)&&N.maxImageSize>-1?N.maxImageSize:-1,y=N.isEvalSupported!==!1,k=typeof N.isOffscreenCanvasSupported=="boolean"?N.isOffscreenCanvasSupported:!_util.isNodeJS,$=Number.isInteger(N.canvasMaxAreaInBytes)?N.canvasMaxAreaInBytes:-1,W=typeof N.disableFontFace=="boolean"?N.disableFontFace:_util.isNodeJS,w=N.fontExtraProperties===!0,F=N.enableXfa===!0,U=N.ownerDocument||globalThis.document,K=N.disableRange===!0,ne=N.disableStream===!0,ee=N.disableAutoFetch===!0,ye=N.pdfBug===!0,ve=de?de.length:N.length??NaN,fe=typeof N.useSystemFonts=="boolean"?N.useSystemFonts:!_util.isNodeJS&&!W,me=typeof N.useWorkerFetch=="boolean"?N.useWorkerFetch:H===_display_utils.DOMCMapReaderFactory&&_===_display_utils.DOMStandardFontDataFactory&&ke&&m&&(0,_display_utils.isValidFetchUrl)(ke,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(m,document.baseURI),pe=N.canvasFactory||new DefaultCanvasFactory({ownerDocument:U}),J=N.filterFactory||new DefaultFilterFactory({docId:j,ownerDocument:U}),Q=null;(0,_util.setVerbosityLevel)(Ae);const ue={canvasFactory:pe,filterFactory:J};if(me||(ue.cMapReaderFactory=new H({baseUrl:ke,isCompressed:Re}),ue.standardFontDataFactory=new _({baseUrl:m})),!Y){const Ne={verbosity:Ae,port:_worker_options.GlobalWorkerOptions.workerPort};Y=Ne.port?PDFWorker.fromPort(Ne):new PDFWorker(Ne),E._worker=Y}const Ee={docId:j,apiVersion:"3.11.174",data:Z,password:oe,disableAutoFetch:ee,rangeChunkSize:he,length:ve,docBaseUrl:Se,enableXfa:F,evaluatorOptions:{maxImageSize:f,disableFontFace:W,ignoreErrors:g,isEvalSupported:y,isOffscreenCanvasSupported:k,canvasMaxAreaInBytes:$,fontExtraProperties:w,useSystemFonts:fe,cMapUrl:me?ke:null,standardFontDataUrl:me?m:null}},we={ignoreErrors:g,isEvalSupported:y,disableFontFace:W,fontExtraProperties:w,enableXfa:F,ownerDocument:U,disableAutoFetch:ee,pdfBug:ye,styleElement:Q};return Y.promise.then(function(){if(E.destroyed)throw new Error("Loading aborted");const Ne=_fetchDocument(Y,Ee),Be=new Promise(function(Ve){let qe;de?qe=new _transport_stream.PDFDataTransportStream({length:ve,initialData:de.initialData,progressiveDone:de.progressiveDone,contentDispositionFilename:de.contentDispositionFilename,disableRange:K,disableStream:ne},de):Z||(qe=(ze=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ze):(0,_display_utils.isValidFetchUrl)(ze.url)?new _displayFetch_stream.PDFFetchStream(ze):new _displayNetwork.PDFNetworkStream(ze))({url:L,length:ve,httpHeaders:se,withCredentials:V,rangeChunkSize:he,disableRange:K,disableStream:ne})),Ve(qe)});return Promise.all([Ne,Be]).then(function([Ve,qe]){if(E.destroyed)throw new Error("Loading aborted");const Ge=new _message_handler.MessageHandler(j,Ve,Y.port),ze=new WorkerTransport(Ge,E,qe,we,ue);E._transport=ze,Ge.send("Ready",null)})}).catch(E._capability.reject),E}async function _fetchDocument(N,E){if(N.destroyed)throw new Error("Worker was destroyed");const j=await N.messageHandler.sendWithPromise("GetDocRequest",E,E.data?[E.data.buffer]:null);if(N.destroyed)throw new Error("Worker was destroyed");return j}function getUrlProp(N){if(N instanceof URL)return N.href;try{return new URL(N,window.location).href}catch{if(_util.isNodeJS&&typeof N=="string")return N}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(N){if(_util.isNodeJS&&typeof Buffer<"u"&&N instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(N instanceof Uint8Array&&N.byteLength===N.buffer.byteLength)return N;if(typeof N=="string")return(0,_util.stringToBytes)(N);if(typeof N=="object"&&!isNaN(N==null?void 0:N.length)||(0,_util.isArrayBuffer)(N))return new Uint8Array(N);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${_t(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var E,j,L;this.destroyed=!0;try{(E=this._worker)!=null&&E.port&&(this._worker._pendingDestroy=!0),await((j=this._transport)==null?void 0:j.destroy())}catch(Z){throw(L=this._worker)!=null&&L.port&&delete this._worker._pendingDestroy,Z}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,X(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(E,j,L=!1,Z=null){this.length=E,this.initialData=j,this.progressiveDone=L,this.contentDispositionFilename=Z,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(E){this._rangeListeners.push(E)}addProgressListener(E){this._progressListeners.push(E)}addProgressiveReadListener(E){this._progressiveReadListeners.push(E)}addProgressiveDoneListener(E){this._progressiveDoneListeners.push(E)}onDataRange(E,j){for(const L of this._rangeListeners)L(E,j)}onDataProgress(E,j){this._readyCapability.promise.then(()=>{for(const L of this._progressListeners)L(E,j)})}onDataProgressiveRead(E){this._readyCapability.promise.then(()=>{for(const j of this._progressiveReadListeners)j(E)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const E of this._progressiveDoneListeners)E()})}transportReady(){this._readyCapability.resolve()}requestDataRange(E,j){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(E,j){this._pdfInfo=E,this._transport=j,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(L=>{if(!L)return L;const Z=[];for(const se in L)Z.push(...L[se]);return Z}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(E){return this._transport.getPage(E)}getPageIndex(E){return this._transport.getPageIndex(E)}getDestinations(){return this._transport.getDestinations()}getDestination(E){return this._transport.getDestination(E)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(E=!1){return this._transport.startCleanup(E||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(E,j,L,Z=!1){X(this,i);X(this,o);X(this,n,null);X(this,s,!1);this._pageIndex=E,this._pageInfo=j,this._transport=L,this._stats=Z?new _display_utils.StatTimer:null,this._pdfBug=Z,this.commonObjs=L.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:E,rotation:j=this.rotate,offsetX:L=0,offsetY:Z=0,dontFlip:se=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:E,rotation:j,offsetX:L,offsetY:Z,dontFlip:se})}getAnnotations({intent:E="display"}={}){const j=this._transport.getRenderingIntent(E);return this._transport.getAnnotations(this._pageIndex,j.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var E;return((E=this._transport._htmlForXfa)==null?void 0:E.children[this._pageIndex])||null}render({canvasContext:E,viewport:j,intent:L="display",annotationMode:Z=_util.AnnotationMode.ENABLE,transform:se=null,background:V=null,optionalContentConfigPromise:oe=null,annotationCanvasMap:de=null,pageColors:he=null,printAnnotationStorage:Y=null}){var _,g;(_=this._stats)==null||_.time("Overall");const Ae=this._transport.getRenderingIntent(L,Z,Y);ge(this,s,!1),re(this,o,xt).call(this),oe||(oe=this._transport.getOptionalContentConfig());let Se=this._intentStates.get(Ae.cacheKey);Se||(Se=Object.create(null),this._intentStates.set(Ae.cacheKey,Se)),Se.streamReaderCancelTimeout&&(clearTimeout(Se.streamReaderCancelTimeout),Se.streamReaderCancelTimeout=null);const ke=!!(Ae.renderingIntent&_util.RenderingIntentFlag.PRINT);Se.displayReadyCapability||(Se.displayReadyCapability=new _util.PromiseCapability,Se.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(Ae));const Re=f=>{var y,k;Se.renderTasks.delete(H),(this._maybeCleanupAfterRender||ke)&&ge(this,s,!0),re(this,i,ht).call(this,!ke),f?(H.capability.reject(f),this._abortOperatorList({intentState:Se,reason:f instanceof Error?f:new Error(f)})):H.capability.resolve(),(y=this._stats)==null||y.timeEnd("Rendering"),(k=this._stats)==null||k.timeEnd("Overall")},H=new InternalRenderTask({callback:Re,params:{canvasContext:E,viewport:j,transform:se,background:V},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:de,operatorList:Se.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ke,pdfBug:this._pdfBug,pageColors:he});(Se.renderTasks||(Se.renderTasks=new Set)).add(H);const m=H.task;return Promise.all([Se.displayReadyCapability.promise,oe]).then(([f,y])=>{var k;if(this.destroyed){Re();return}(k=this._stats)==null||k.time("Rendering"),H.initializeGraphics({transparency:f,optionalContentConfig:y}),H.operatorListChanged()}).catch(Re),m}getOperatorList({intent:E="display",annotationMode:j=_util.AnnotationMode.ENABLE,printAnnotationStorage:L=null}={}){var de;function Z(){V.operatorList.lastChunk&&(V.opListReadCapability.resolve(V.operatorList),V.renderTasks.delete(oe))}const se=this._transport.getRenderingIntent(E,j,L,!0);let V=this._intentStates.get(se.cacheKey);V||(V=Object.create(null),this._intentStates.set(se.cacheKey,V));let oe;return V.opListReadCapability||(oe=Object.create(null),oe.operatorListChanged=Z,V.opListReadCapability=new _util.PromiseCapability,(V.renderTasks||(V.renderTasks=new Set)).add(oe),V.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(de=this._stats)==null||de.time("Page Request"),this._pumpOperatorList(se)),V.opListReadCapability.promise}streamTextContent({includeMarkedContent:E=!1,disableNormalization:j=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:E===!0,disableNormalization:j===!0},{highWaterMark:100,size(Z){return Z.items.length}})}getTextContent(E={}){if(this._transport._htmlForXfa)return this.getXfa().then(L=>_xfa_text.XfaText.textContent(L));const j=this.streamTextContent(E);return new Promise(function(L,Z){function se(){V.read().then(function({value:de,done:he}){if(he){L(oe);return}Object.assign(oe.styles,de.styles),oe.items.push(...de.items),se()},Z)}const V=j.getReader(),oe={items:[],styles:Object.create(null)};se()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const E=[];for(const j of this._intentStates.values())if(this._abortOperatorList({intentState:j,reason:new Error("Page was destroyed."),force:!0}),!j.opListReadCapability)for(const L of j.renderTasks)E.push(L.completed),L.cancel();return this.objs.clear(),ge(this,s,!1),re(this,o,xt).call(this),Promise.all(E)}cleanup(E=!1){ge(this,s,!0);const j=re(this,i,ht).call(this,!1);return E&&j&&this._stats&&(this._stats=new _display_utils.StatTimer),j}_startRenderPage(E,j){var Z,se;const L=this._intentStates.get(j);L&&((Z=this._stats)==null||Z.timeEnd("Page Request"),(se=L.displayReadyCapability)==null||se.resolve(E))}_renderPageChunk(E,j){for(let L=0,Z=E.length;L<Z;L++)j.operatorList.fnArray.push(E.fnArray[L]),j.operatorList.argsArray.push(E.argsArray[L]);j.operatorList.lastChunk=E.lastChunk,j.operatorList.separateAnnots=E.separateAnnots;for(const L of j.renderTasks)L.operatorListChanged();E.lastChunk&&re(this,i,ht).call(this,!0)}_pumpOperatorList({renderingIntent:E,cacheKey:j,annotationStorageSerializable:L}){const{map:Z,transfers:se}=L,oe=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:E,cacheKey:j,annotationStorage:Z},se).getReader(),de=this._intentStates.get(j);de.streamReader=oe;const he=()=>{oe.read().then(({value:Y,done:Ae})=>{if(Ae){de.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Y,de),he())},Y=>{if(de.streamReader=null,!this._transport.destroyed){if(de.operatorList){de.operatorList.lastChunk=!0;for(const Ae of de.renderTasks)Ae.operatorListChanged();re(this,i,ht).call(this,!0)}if(de.displayReadyCapability)de.displayReadyCapability.reject(Y);else if(de.opListReadCapability)de.opListReadCapability.reject(Y);else throw Y}})};he()}_abortOperatorList({intentState:E,reason:j,force:L=!1}){if(E.streamReader){if(E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null),!L){if(E.renderTasks.size>0)return;if(j instanceof _display_utils.RenderingCancelledException){let Z=RENDERING_CANCELLED_TIMEOUT;j.extraDelay>0&&j.extraDelay<1e3&&(Z+=j.extraDelay),E.streamReaderCancelTimeout=setTimeout(()=>{E.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:E,reason:j,force:!0})},Z);return}}if(E.streamReader.cancel(new _util.AbortException(j.message)).catch(()=>{}),E.streamReader=null,!this._transport.destroyed){for(const[Z,se]of this._intentStates)if(se===E){this._intentStates.delete(Z);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,s=new WeakMap,i=new WeakSet,ht=function(E=!1){if(re(this,o,xt).call(this),!a(this,s)||this.destroyed)return!1;if(E)return ge(this,n,setTimeout(()=>{ge(this,n,null),re(this,i,ht).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:j,operatorList:L}of this._intentStates.values())if(j.size>0||!L.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ge(this,s,!1),!0},o=new WeakSet,xt=function(){a(this,n)&&(clearTimeout(a(this,n)),ge(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){X(this,u,new Set);X(this,c,Promise.resolve())}postMessage(E,j){const L={data:structuredClone(E,j?{transfer:j}:null)};a(this,c).then(()=>{for(const Z of a(this,u))Z.call(this,L)})}addEventListener(E,j){a(this,u).add(j)}removeEventListener(E,j){a(this,u).delete(j)}terminate(){a(this,u).clear()}}u=new WeakMap,c=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const N=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;N&&(PDFWorkerUtil.fallbackWorkerSrc=N.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(N,E){let j;try{if(j=new URL(N),!j.origin||j.origin==="null")return!1}catch{return!1}const L=new URL(E,j);return j.origin===L.origin},PDFWorkerUtil.createCDNWrapper=function(N){const E=`importScripts("${N}");`;return URL.createObjectURL(new Blob([E]))}}const _PDFWorker=class _PDFWorker{constructor({name:N=null,port:E=null,verbosity:j=(0,_util.getVerbosityLevel)()}={}){var L;if(this.name=N,this.destroyed=!1,this.verbosity=j,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,E){if((L=a(_PDFWorker,A))!=null&&L.has(E))throw new Error("Cannot use more than one PDFWorker per port.");(a(_PDFWorker,A)||ge(_PDFWorker,A,new WeakMap)).set(E,this),this._initializeFromPort(E);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(N){this._port=N,this._messageHandler=new _message_handler.MessageHandler("main","worker",N),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:N}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,N)||(N=PDFWorkerUtil.createCDNWrapper(new URL(N,window.location).href));const E=new Worker(N),j=new _message_handler.MessageHandler("main","worker",E),L=()=>{E.removeEventListener("error",Z),j.destroy(),E.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Z=()=>{this._webWorker||L()};E.addEventListener("error",Z),j.on("test",V=>{if(E.removeEventListener("error",Z),this.destroyed){L();return}V?(this._messageHandler=j,this._port=E,this._webWorker=E,this._readyCapability.resolve(),j.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),j.destroy(),E.terminate())}),j.on("ready",V=>{if(E.removeEventListener("error",Z),this.destroyed){L();return}try{se()}catch{this._setupFakeWorker()}});const se=()=>{const V=new Uint8Array;j.send("test",V,[V.buffer])};se();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(N=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const E=new LoopbackPort;this._port=E;const j=`fake${PDFWorkerUtil.fakeWorkerId++}`,L=new _message_handler.MessageHandler(j+"_worker",j,E);N.setup(L,E);const Z=new _message_handler.MessageHandler(j,j+"_worker",E);this._messageHandler=Z,this._readyCapability.resolve(),Z.send("configure",{verbosity:this.verbosity})}).catch(N=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${N.message}".`))})}destroy(){var N;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(N=a(_PDFWorker,A))==null||N.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(N){var j;if(!(N!=null&&N.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const E=(j=a(this,A))==null?void 0:j.get(N.port);if(E){if(E._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return E}return new _PDFWorker(N)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var N;try{return((N=globalThis.pdfjsWorker)==null?void 0:N.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};A=new WeakMap,X(_PDFWorker,A,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(E,j,L,Z,se){X(this,x);X(this,T,new Map);X(this,R,new Map);X(this,S,new Map);X(this,P,null);this.messageHandler=E,this.loadingTask=j,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Z.ownerDocument,styleElement:Z.styleElement}),this._params=Z,this.canvasFactory=se.canvasFactory,this.filterFactory=se.filterFactory,this.cMapReaderFactory=se.cMapReaderFactory,this.standardFontDataFactory=se.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=L,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(E,j=_util.AnnotationMode.ENABLE,L=null,Z=!1){let se=_util.RenderingIntentFlag.DISPLAY,V=_annotation_storage.SerializableEmpty;switch(E){case"any":se=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":se=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${E}`)}switch(j){case _util.AnnotationMode.DISABLE:se+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:se+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:se+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,V=(se&_util.RenderingIntentFlag.PRINT&&L instanceof _annotation_storage.PrintAnnotationStorage?L:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${j}`)}return Z&&(se+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:se,cacheKey:`${se}_${V.hash}`,annotationStorageSerializable:V}}destroy(){var L;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(L=a(this,P))==null||L.reject(new Error("Worker was destroyed during onPassword callback"));const E=[];for(const Z of a(this,R).values())E.push(Z._destroy());a(this,R).clear(),a(this,S).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const j=this.messageHandler.sendWithPromise("Terminate",null);return E.push(j),Promise.all(E).then(()=>{var Z;this.commonObjs.clear(),this.fontLoader.clear(),a(this,T).clear(),this.filterFactory.destroy(),(Z=this._networkStream)==null||Z.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:E,loadingTask:j}=this;E.on("GetReader",(L,Z)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=se=>{this._lastProgress={loaded:se.loaded,total:se.total}},Z.onPull=()=>{this._fullReader.read().then(function({value:se,done:V}){if(V){Z.close();return}(0,_util.assert)(se instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Z.enqueue(new Uint8Array(se),1,[se])}).catch(se=>{Z.error(se)})},Z.onCancel=se=>{this._fullReader.cancel(se),Z.ready.catch(V=>{if(!this.destroyed)throw V})}}),E.on("ReaderHeadersReady",L=>{const Z=new _util.PromiseCapability,se=this._fullReader;return se.headersReady.then(()=>{var V;(!se.isStreamingSupported||!se.isRangeSupported)&&(this._lastProgress&&((V=j.onProgress)==null||V.call(j,this._lastProgress)),se.onProgress=oe=>{var de;(de=j.onProgress)==null||de.call(j,{loaded:oe.loaded,total:oe.total})}),Z.resolve({isStreamingSupported:se.isStreamingSupported,isRangeSupported:se.isRangeSupported,contentLength:se.contentLength})},Z.reject),Z.promise}),E.on("GetRangeReader",(L,Z)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const se=this._networkStream.getRangeReader(L.begin,L.end);if(!se){Z.close();return}Z.onPull=()=>{se.read().then(function({value:V,done:oe}){if(oe){Z.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Z.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{Z.error(V)})},Z.onCancel=V=>{se.cancel(V),Z.ready.catch(oe=>{if(!this.destroyed)throw oe})}}),E.on("GetDoc",({pdfInfo:L})=>{this._numPages=L.numPages,this._htmlForXfa=L.htmlForXfa,delete L.htmlForXfa,j._capability.resolve(new PDFDocumentProxy(L,this))}),E.on("DocException",function(L){let Z;switch(L.name){case"PasswordException":Z=new _util.PasswordException(L.message,L.code);break;case"InvalidPDFException":Z=new _util.InvalidPDFException(L.message);break;case"MissingPDFException":Z=new _util.MissingPDFException(L.message);break;case"UnexpectedResponseException":Z=new _util.UnexpectedResponseException(L.message,L.status);break;case"UnknownErrorException":Z=new _util.UnknownErrorException(L.message,L.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}j._capability.reject(Z)}),E.on("PasswordRequest",L=>{if(ge(this,P,new _util.PromiseCapability),j.onPassword){const Z=se=>{se instanceof Error?a(this,P).reject(se):a(this,P).resolve({password:se})};try{j.onPassword(Z,L.code)}catch(se){a(this,P).reject(se)}}else a(this,P).reject(new _util.PasswordException(L.message,L.code));return a(this,P).promise}),E.on("DataLoaded",L=>{var Z;(Z=j.onProgress)==null||Z.call(j,{loaded:L.length,total:L.length}),this.downloadInfoCapability.resolve(L)}),E.on("StartRenderPage",L=>{if(this.destroyed)return;a(this,R).get(L.pageIndex)._startRenderPage(L.transparency,L.cacheKey)}),E.on("commonobj",([L,Z,se])=>{var V;if(!this.destroyed&&!this.commonObjs.has(L))switch(Z){case"Font":const oe=this._params;if("error"in se){const Y=se.error;(0,_util.warn)(`Error during font loading: ${Y}`),this.commonObjs.resolve(L,Y);break}const de=oe.pdfBug&&((V=globalThis.FontInspector)!=null&&V.enabled)?(Y,Ae)=>globalThis.FontInspector.fontAdded(Y,Ae):null,he=new _font_loader.FontFaceObject(se,{isEvalSupported:oe.isEvalSupported,disableFontFace:oe.disableFontFace,ignoreErrors:oe.ignoreErrors,inspectFont:de});this.fontLoader.bind(he).catch(Y=>E.sendWithPromise("FontFallback",{id:L})).finally(()=>{!oe.fontExtraProperties&&he.data&&(he.data=null),this.commonObjs.resolve(L,he)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(L,se);break;default:throw new Error(`Got unknown common object type ${Z}`)}}),E.on("obj",([L,Z,se,V])=>{var de;if(this.destroyed)return;const oe=a(this,R).get(Z);if(!oe.objs.has(L))switch(se){case"Image":if(oe.objs.resolve(L,V),V){let he;if(V.bitmap){const{width:Y,height:Ae}=V;he=Y*Ae*4}else he=((de=V.data)==null?void 0:de.length)||0;he>_util.MAX_IMAGE_SIZE_TO_CACHE&&(oe._maybeCleanupAfterRender=!0)}break;case"Pattern":oe.objs.resolve(L,V);break;default:throw new Error(`Got unknown object type ${se}`)}}),E.on("DocProgress",L=>{var Z;this.destroyed||(Z=j.onProgress)==null||Z.call(j,{loaded:L.loaded,total:L.total})}),E.on("FetchBuiltInCMap",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(L):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),E.on("FetchStandardFontData",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(L):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var L;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:E,transfers:j}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:E,filename:((L=this._fullReader)==null?void 0:L.filename)??null},j).finally(()=>{this.annotationStorage.resetModified()})}getPage(E){if(!Number.isInteger(E)||E<=0||E>this._numPages)return Promise.reject(new Error("Invalid page request."));const j=E-1,L=a(this,S).get(j);if(L)return L;const Z=this.messageHandler.sendWithPromise("GetPage",{pageIndex:j}).then(se=>{if(this.destroyed)throw new Error("Transport destroyed");const V=new PDFPageProxy(j,se,this,this._params.pdfBug);return a(this,R).set(j,V),V});return a(this,S).set(j,Z),Z}getPageIndex(E){return typeof E!="object"||E===null||!Number.isInteger(E.num)||E.num<0||!Number.isInteger(E.gen)||E.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:E.num,gen:E.gen})}getAnnotations(E,j){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:E,intent:j})}getFieldObjects(){return re(this,x,Ct).call(this,"GetFieldObjects")}hasJSActions(){return re(this,x,Ct).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(E){return typeof E!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:E})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return re(this,x,Ct).call(this,"GetDocJSActions")}getPageJSActions(E){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:E})}getStructTree(E){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:E})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(E=>new _optional_content_config.OptionalContentConfig(E))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const E="GetMetadata",j=a(this,T).get(E);if(j)return j;const L=this.messageHandler.sendWithPromise(E,null).then(Z=>{var se,V;return{info:Z[0],metadata:Z[1]?new _metadata.Metadata(Z[1]):null,contentDispositionFilename:((se=this._fullReader)==null?void 0:se.filename)??null,contentLength:((V=this._fullReader)==null?void 0:V.contentLength)??null}});return a(this,T).set(E,L),L}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(E=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const j of a(this,R).values())if(!j.cleanup())throw new Error(`startCleanup: Page ${j.pageNumber} is currently rendering.`);this.commonObjs.clear(),E||this.fontLoader.clear(),a(this,T).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:E,enableXfa:j}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:E,enableXfa:j})}}T=new WeakMap,R=new WeakMap,S=new WeakMap,P=new WeakMap,x=new WeakSet,Ct=function(E,j=null){const L=a(this,T).get(E);if(L)return L;const Z=this.messageHandler.sendWithPromise(E,j);return a(this,T).set(E,Z),Z};class PDFObjects{constructor(){X(this,B);X(this,I,Object.create(null))}get(E,j=null){if(j){const Z=re(this,B,Ut).call(this,E);return Z.capability.promise.then(()=>j(Z.data)),null}const L=a(this,I)[E];if(!(L!=null&&L.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${E}.`);return L.data}has(E){const j=a(this,I)[E];return(j==null?void 0:j.capability.settled)||!1}resolve(E,j=null){const L=re(this,B,Ut).call(this,E);L.data=j,L.capability.resolve()}clear(){var E;for(const j in a(this,I)){const{data:L}=a(this,I)[j];(E=L==null?void 0:L.bitmap)==null||E.close()}ge(this,I,Object.create(null))}}I=new WeakMap,B=new WeakSet,Ut=function(E){var j;return(j=a(this,I))[E]||(j[E]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(E){X(this,v,null);ge(this,v,E),this.onContinue=null}get promise(){return a(this,v).capability.promise}cancel(E=0){a(this,v).cancel(null,E)}get separateAnnots(){const{separateAnnots:E}=a(this,v).operatorList;if(!E)return!1;const{annotationCanvasMap:j}=a(this,v);return E.form||E.canvas&&(j==null?void 0:j.size)>0}}v=new WeakMap,exports.RenderTask=RenderTask;const z=class z{constructor({callback:E,params:j,objs:L,commonObjs:Z,annotationCanvasMap:se,operatorList:V,pageIndex:oe,canvasFactory:de,filterFactory:he,useRequestAnimationFrame:Y=!1,pdfBug:Ae=!1,pageColors:Se=null}){this.callback=E,this.params=j,this.objs=L,this.commonObjs=Z,this.annotationCanvasMap=se,this.operatorListIdx=null,this.operatorList=V,this._pageIndex=oe,this.canvasFactory=de,this.filterFactory=he,this._pdfBug=Ae,this.pageColors=Se,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Y===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=j.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:E=!1,optionalContentConfig:j}){var oe,de;if(this.cancelled)return;if(this._canvas){if(a(z,C).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(z,C).add(this._canvas)}this._pdfBug&&((oe=globalThis.StepperManager)!=null&&oe.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:L,viewport:Z,transform:se,background:V}=this.params;this.gfx=new _canvas.CanvasGraphics(L,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:j},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:se,viewport:Z,transparency:E,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,(de=this.graphicsReadyCallback)==null||de.call(this)}cancel(E=null,j=0){var L;this.running=!1,this.cancelled=!0,(L=this.gfx)==null||L.endDrawing(),a(z,C).delete(this._canvas),this.callback(E||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,j))}operatorListChanged(){var E;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(E=this.stepper)==null||E.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(z,C).delete(this._canvas),this.callback())))}};C=new WeakMap,X(z,C,new WeakSet);let InternalRenderTask=z;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,t,n)=>{var c,l,A,vs,R;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var s=n(1),i=n(4),r=n(8);const o=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=o;class b{constructor(){X(this,A);X(this,c,!1);X(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(P,x){const M=a(this,l).get(P);return M===void 0?x:Object.assign(x,M)}getRawValue(P){return a(this,l).get(P)}remove(P){if(a(this,l).delete(P),a(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const x of a(this,l).values())if(x instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(P,x){const M=a(this,l).get(P);let I=!1;if(M!==void 0)for(const[B,O]of Object.entries(x))M[B]!==O&&(I=!0,M[B]=O);else I=!0,a(this,l).set(P,x);I&&re(this,A,vs).call(this),x instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(x.constructor._type)}has(P){return a(this,l).has(P)}getAll(){return a(this,l).size>0?(0,s.objectFromMap)(a(this,l)):null}setAll(P){for(const[x,M]of Object.entries(P))this.setValue(x,M)}get size(){return a(this,l).size}resetModified(){a(this,c)&&(ge(this,c,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new u(this)}get serializable(){if(a(this,l).size===0)return o;const P=new Map,x=new r.MurmurHash3_64,M=[],I=Object.create(null);let B=!1;for(const[O,v]of a(this,l)){const C=v instanceof i.AnnotationEditor?v.serialize(!1,I):v;C&&(P.set(O,C),x.update(`${O}:${JSON.stringify(C)}`),B||(B=!!C.bitmap))}if(B)for(const O of P.values())O.bitmap&&M.push(O.bitmap);return P.size>0?{map:P,hash:x.hexdigest(),transfers:M}:o}}c=new WeakMap,l=new WeakMap,A=new WeakSet,vs=function(){a(this,c)||(ge(this,c,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=b;class u extends b{constructor(x){super();X(this,R,void 0);const{map:M,hash:I,transfers:B}=x.serializable,O=structuredClone(M,B?{transfer:B}:null);ge(this,R,{map:O,hash:I,transfers:B})}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,R)}}R=new WeakMap,t.PrintAnnotationStorage=u},(e,t,n)=>{var u,c,l,A,T,R,S,P,x,M,I,B,O,v,C,Ht,N,Vt,j,jt,Z,zt,V,Es,de,Ss,Y,ws,Se,Wt,Re,xs;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var s=n(5),i=n(1),r=n(6);const m=class m{constructor(g){X(this,C);X(this,N);X(this,Z);X(this,V);X(this,de);X(this,Y);X(this,Se);X(this,Re);X(this,u,"");X(this,c,!1);X(this,l,null);X(this,A,null);X(this,T,null);X(this,R,!1);X(this,S,null);X(this,P,this.focusin.bind(this));X(this,x,this.focusout.bind(this));X(this,M,!1);X(this,I,!1);X(this,B,!1);nt(this,"_initialOptions",Object.create(null));nt(this,"_uiManager",null);nt(this,"_focusEventsAllowed",!0);nt(this,"_l10nPromise",null);X(this,O,!1);X(this,v,m._zIndex++);this.constructor===m&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=g.isCentered,this._structTreeParentId=null;const{rotation:f,rawDims:{pageWidth:y,pageHeight:k,pageX:$,pageY:W}}=this.parent.viewport;this.rotation=f,this.pageRotation=(360+f-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[y,k],this.pageTranslation=[$,W];const[w,F]=this.parentDimensions;this.x=g.x/w,this.y=g.y/F,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const f=new b({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});f.annotationElementId=g.annotationElementId,f.deleted=!0,f._uiManager.addToAnnotationStorage(f)}static initialize(g,f=null){if(m._l10nPromise||(m._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(k=>[k,g.get(k)]))),f!=null&&f.strings)for(const k of f.strings)m._l10nPromise.set(k,g.get(k));if(m._borderLineWidth!==-1)return;const y=getComputedStyle(document.documentElement);m._borderLineWidth=parseFloat(y.getPropertyValue("--outline-width"))||0}static updateDefaultParams(g,f){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(g){return!1}static paste(g,f){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,O)}set _isDraggable(g){var f;ge(this,O,g),(f=this.div)==null||f.classList.toggle("draggable",g)}center(){const[g,f]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*f/(g*2),this.y+=this.width*g/(f*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*f/(g*2),this.y-=this.width*g/(f*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,v)}setParent(g){g!==null&&(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions),this.parent=g}focusin(g){this._focusEventsAllowed&&(a(this,M)?ge(this,M,!1):this.parent.setSelected(this))}focusout(g){var y;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const f=g.relatedTarget;f!=null&&f.closest(`#${this.id}`)||(g.preventDefault(),(y=this.parent)!=null&&y.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(g,f,y,k){const[$,W]=this.parentDimensions;[y,k]=this.screenToPageTranslation(y,k),this.x=(g+y)/$,this.y=(f+k)/W,this.fixAndSetPosition()}translate(g,f){re(this,C,Ht).call(this,this.parentDimensions,g,f)}translateInPage(g,f){re(this,C,Ht).call(this,this.pageDimensions,g,f),this.div.scrollIntoView({block:"nearest"})}drag(g,f){const[y,k]=this.parentDimensions;if(this.x+=g/y,this.y+=f/k,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:U,y:K}=this.div.getBoundingClientRect();this.parent.findNewParent(this,U,K)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:$,y:W}=this;const[w,F]=re(this,N,Vt).call(this);$+=w,W+=F,this.div.style.left=`${(100*$).toFixed(2)}%`,this.div.style.top=`${(100*W).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[g,f]=this.pageDimensions;let{x:y,y:k,width:$,height:W}=this;switch($*=g,W*=f,y*=g,k*=f,this.rotation){case 0:y=Math.max(0,Math.min(g-$,y)),k=Math.max(0,Math.min(f-W,k));break;case 90:y=Math.max(0,Math.min(g-W,y)),k=Math.min(f,Math.max($,k));break;case 180:y=Math.min(g,Math.max($,y)),k=Math.min(f,Math.max(W,k));break;case 270:y=Math.min(g,Math.max(W,y)),k=Math.max(0,Math.min(f-$,k));break}this.x=y/=g,this.y=k/=f;const[w,F]=re(this,N,Vt).call(this);y+=w,k+=F;const{style:U}=this.div;U.left=`${(100*y).toFixed(2)}%`,U.top=`${(100*k).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(g,f){var y;return re(y=m,j,jt).call(y,g,f,this.parentRotation)}pageTranslationToScreen(g,f){var y;return re(y=m,j,jt).call(y,g,f,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:g,pageDimensions:[f,y]}=this,k=f*g,$=y*g;return i.FeatureTest.isCSSRoundSupported?[Math.round(k),Math.round($)]:[k,$]}setDims(g,f){var $;const[y,k]=this.parentDimensions;this.div.style.width=`${(100*g/y).toFixed(2)}%`,a(this,R)||(this.div.style.height=`${(100*f/k).toFixed(2)}%`),($=a(this,l))==null||$.classList.toggle("small",g<m.SMALL_EDITOR_SIZE||f<m.SMALL_EDITOR_SIZE)}fixDims(){const{style:g}=this.div,{height:f,width:y}=g,k=y.endsWith("%"),$=!a(this,R)&&f.endsWith("%");if(k&&$)return;const[W,w]=this.parentDimensions;k||(g.width=`${(100*parseFloat(y)/W).toFixed(2)}%`),!a(this,R)&&!$&&(g.height=`${(100*parseFloat(f)/w).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(a(this,l))return;const g=ge(this,l,document.createElement("button"));g.className="altText";const f=await m._l10nPromise.get("editor_alt_text_button_label");g.textContent=f,g.setAttribute("aria-label",f),g.tabIndex="0",g.addEventListener("contextmenu",r.noContextMenu),g.addEventListener("pointerdown",y=>y.stopPropagation()),g.addEventListener("click",y=>{y.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),g.addEventListener("keydown",y=>{y.target===g&&y.key==="Enter"&&(y.preventDefault(),this._uiManager.editAltText(this))}),re(this,Se,Wt).call(this),this.div.append(g),m.SMALL_EDITOR_SIZE||(m.SMALL_EDITOR_SIZE=Math.min(128,Math.round(g.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:a(this,u),decorative:a(this,c)}}set altTextData({altText:g,decorative:f}){a(this,u)===g&&a(this,c)===f||(ge(this,u,g),ge(this,c,f),re(this,Se,Wt).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",a(this,P)),this.div.addEventListener("focusout",a(this,x));const[g,f]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*f/g).toFixed(2)}%`,this.div.style.maxHeight=`${(100*g/f).toFixed(2)}%`);const[y,k]=this.getInitialTranslation();return this.translate(y,k),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(g){const{isMac:f}=i.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&f){g.preventDefault();return}ge(this,M,!0),re(this,Re,xs).call(this,g)}moveInDOM(){var g;(g=this.parent)==null||g.moveEditorInDOM(this)}_setParentAndPosition(g,f,y){g.changeParent(this),this.x=f,this.y=y,this.fixAndSetPosition()}getRect(g,f){const y=this.parentScale,[k,$]=this.pageDimensions,[W,w]=this.pageTranslation,F=g/y,U=f/y,K=this.x*k,ne=this.y*$,ee=this.width*k,ye=this.height*$;switch(this.rotation){case 0:return[K+F+W,$-ne-U-ye+w,K+F+ee+W,$-ne-U+w];case 90:return[K+U+W,$-ne+F+w,K+U+ye+W,$-ne+F+ee+w];case 180:return[K-F-ee+W,$-ne+U+w,K-F+W,$-ne+U+ye+w];case 270:return[K-U-ye+W,$-ne-F-ee+w,K-U+W,$-ne-F+w];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,f){const[y,k,$,W]=g,w=$-y,F=W-k;switch(this.rotation){case 0:return[y,f-W,w,F];case 90:return[y,f-k,F,w];case 180:return[$,f-k,w,F];case 270:return[$,f-W,F,w];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ge(this,B,!0)}disableEditMode(){ge(this,B,!1)}isInEditMode(){return a(this,B)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var g,f;(g=this.div)==null||g.addEventListener("focusin",a(this,P)),(f=this.div)==null||f.addEventListener("focusout",a(this,x))}serialize(g=!1,f=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(g,f,y){const k=new this.prototype.constructor({parent:f,id:f.getNextId(),uiManager:y});k.rotation=g.rotation;const[$,W]=k.pageDimensions,[w,F,U,K]=k.getRectInCurrentCoords(g.rect,W);return k.x=w/$,k.y=F/W,k.width=U/$,k.height=K/W,k}remove(){var g;this.div.removeEventListener("focusin",a(this,P)),this.div.removeEventListener("focusout",a(this,x)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(g=a(this,l))==null||g.remove(),ge(this,l,null),ge(this,A,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(re(this,V,Es).call(this),a(this,S).classList.remove("hidden"))}select(){var g;this.makeResizable(),(g=this.div)==null||g.classList.add("selectedEditor")}unselect(){var g,f,y;(g=a(this,S))==null||g.classList.add("hidden"),(f=this.div)==null||f.classList.remove("selectedEditor"),(y=this.div)!=null&&y.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(g,f){}disableEditing(){a(this,l)&&(a(this,l).hidden=!0)}enableEditing(){a(this,l)&&(a(this,l).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return a(this,I)}set isEditing(g){ge(this,I,g),this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(g,f){ge(this,R,!0);const y=g/f,{style:k}=this.div;k.aspectRatio=y,k.height="auto"}static get MIN_SIZE(){return 16}};u=new WeakMap,c=new WeakMap,l=new WeakMap,A=new WeakMap,T=new WeakMap,R=new WeakMap,S=new WeakMap,P=new WeakMap,x=new WeakMap,M=new WeakMap,I=new WeakMap,B=new WeakMap,O=new WeakMap,v=new WeakMap,C=new WeakSet,Ht=function([g,f],y,k){[y,k]=this.screenToPageTranslation(y,k),this.x+=y/g,this.y+=k/f,this.fixAndSetPosition()},N=new WeakSet,Vt=function(){const[g,f]=this.parentDimensions,{_borderLineWidth:y}=m,k=y/g,$=y/f;switch(this.rotation){case 90:return[-k,$];case 180:return[k,$];case 270:return[k,-$];default:return[-k,-$]}},j=new WeakSet,jt=function(g,f,y){switch(y){case 90:return[f,-g];case 180:return[-g,-f];case 270:return[-f,g];default:return[g,f]}},Z=new WeakSet,zt=function(g){switch(g){case 90:{const[f,y]=this.pageDimensions;return[0,-f/y,y/f,0]}case 180:return[-1,0,0,-1];case 270:{const[f,y]=this.pageDimensions;return[0,f/y,-y/f,0]}default:return[1,0,0,1]}},V=new WeakSet,Es=function(){if(a(this,S))return;ge(this,S,document.createElement("div")),a(this,S).classList.add("resizers");const g=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||g.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const f of g){const y=document.createElement("div");a(this,S).append(y),y.classList.add("resizer",f),y.addEventListener("pointerdown",re(this,de,Ss).bind(this,f)),y.addEventListener("contextmenu",r.noContextMenu)}this.div.prepend(a(this,S))},de=new WeakSet,Ss=function(g,f){f.preventDefault();const{isMac:y}=i.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&y)return;const k=re(this,Y,ws).bind(this,g),$=this._isDraggable;this._isDraggable=!1;const W={passive:!0,capture:!0};window.addEventListener("pointermove",k,W);const w=this.x,F=this.y,U=this.width,K=this.height,ne=this.parent.div.style.cursor,ee=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(f.target).cursor;const ye=()=>{this._isDraggable=$,window.removeEventListener("pointerup",ye),window.removeEventListener("blur",ye),window.removeEventListener("pointermove",k,W),this.parent.div.style.cursor=ne,this.div.style.cursor=ee;const ve=this.x,fe=this.y,me=this.width,pe=this.height;ve===w&&fe===F&&me===U&&pe===K||this.addCommands({cmd:()=>{this.width=me,this.height=pe,this.x=ve,this.y=fe;const[J,Q]=this.parentDimensions;this.setDims(J*me,Q*pe),this.fixAndSetPosition()},undo:()=>{this.width=U,this.height=K,this.x=w,this.y=F;const[J,Q]=this.parentDimensions;this.setDims(J*U,Q*K),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ye),window.addEventListener("blur",ye)},Y=new WeakSet,ws=function(g,f){const[y,k]=this.parentDimensions,$=this.x,W=this.y,w=this.width,F=this.height,U=m.MIN_SIZE/y,K=m.MIN_SIZE/k,ne=Ce=>Math.round(Ce*1e4)/1e4,ee=re(this,Z,zt).call(this,this.rotation),ye=(Ce,Te)=>[ee[0]*Ce+ee[2]*Te,ee[1]*Ce+ee[3]*Te],ve=re(this,Z,zt).call(this,360-this.rotation),fe=(Ce,Te)=>[ve[0]*Ce+ve[2]*Te,ve[1]*Ce+ve[3]*Te];let me,pe,J=!1,Q=!1;switch(g){case"topLeft":J=!0,me=(Ce,Te)=>[0,0],pe=(Ce,Te)=>[Ce,Te];break;case"topMiddle":me=(Ce,Te)=>[Ce/2,0],pe=(Ce,Te)=>[Ce/2,Te];break;case"topRight":J=!0,me=(Ce,Te)=>[Ce,0],pe=(Ce,Te)=>[0,Te];break;case"middleRight":Q=!0,me=(Ce,Te)=>[Ce,Te/2],pe=(Ce,Te)=>[0,Te/2];break;case"bottomRight":J=!0,me=(Ce,Te)=>[Ce,Te],pe=(Ce,Te)=>[0,0];break;case"bottomMiddle":me=(Ce,Te)=>[Ce/2,Te],pe=(Ce,Te)=>[Ce/2,0];break;case"bottomLeft":J=!0,me=(Ce,Te)=>[0,Te],pe=(Ce,Te)=>[Ce,0];break;case"middleLeft":Q=!0,me=(Ce,Te)=>[0,Te/2],pe=(Ce,Te)=>[Ce,Te/2];break}const ue=me(w,F),Ee=pe(w,F);let we=ye(...Ee);const Ne=ne($+we[0]),Be=ne(W+we[1]);let Ve=1,qe=1,[Ge,ze]=this.screenToPageTranslation(f.movementX,f.movementY);if([Ge,ze]=fe(Ge/y,ze/k),J){const Ce=Math.hypot(w,F);Ve=qe=Math.max(Math.min(Math.hypot(Ee[0]-ue[0]-Ge,Ee[1]-ue[1]-ze)/Ce,1/w,1/F),U/w,K/F)}else Q?Ve=Math.max(U,Math.min(1,Math.abs(Ee[0]-ue[0]-Ge)))/w:qe=Math.max(K,Math.min(1,Math.abs(Ee[1]-ue[1]-ze)))/F;const Xe=ne(w*Ve),be=ne(F*qe);we=ye(...pe(Xe,be));const ae=Ne-we[0],ie=Be-we[1];this.width=Xe,this.height=be,this.x=ae,this.y=ie,this.setDims(y*Xe,k*be),this.fixAndSetPosition()},Se=new WeakSet,Wt=async function(){var y;const g=a(this,l);if(!g)return;if(!a(this,u)&&!a(this,c)){g.classList.remove("done"),(y=a(this,A))==null||y.remove();return}m._l10nPromise.get("editor_alt_text_edit_button_label").then(k=>{g.setAttribute("aria-label",k)});let f=a(this,A);if(!f){ge(this,A,f=document.createElement("span")),f.className="tooltip",f.setAttribute("role","tooltip");const k=f.id=`alt-text-tooltip-${this.id}`;g.setAttribute("aria-describedby",k);const $=100;g.addEventListener("mouseenter",()=>{ge(this,T,setTimeout(()=>{ge(this,T,null),a(this,A).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},$))}),g.addEventListener("mouseleave",()=>{var W;clearTimeout(a(this,T)),ge(this,T,null),(W=a(this,A))==null||W.classList.remove("show")})}g.classList.add("done"),f.innerText=a(this,c)?await m._l10nPromise.get("editor_alt_text_decorative_tooltip"):a(this,u),f.parentNode||g.append(f)},Re=new WeakSet,xs=function(g){if(!this._isDraggable)return;const f=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let y,k;f&&(y={passive:!0,capture:!0},k=W=>{const[w,F]=this.screenToPageTranslation(W.movementX,W.movementY);this._uiManager.dragSelectedEditors(w,F)},window.addEventListener("pointermove",k,y));const $=()=>{if(window.removeEventListener("pointerup",$),window.removeEventListener("blur",$),f&&window.removeEventListener("pointermove",k,y),ge(this,M,!1),!this._uiManager.endDragSession()){const{isMac:W}=i.FeatureTest.platform;g.ctrlKey&&!W||g.shiftKey||g.metaKey&&W?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",$),window.addEventListener("blur",$)},X(m,j),nt(m,"_borderLineWidth",-1),nt(m,"_colorManager",new s.ColorManager),nt(m,"_zIndex",1),nt(m,"SMALL_EDITOR_SIZE",0);let o=m;t.AnnotationEditor=o;class b extends o{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,n)=>{var R,S,P,x,M,qt,O,v,C,z,N,Cs,L,Z,se,V,oe,de,he,Y,Ae,Se,ke,Re,H,m,_,g,f,y,k,$,W,w,F,U,K,ne,ee,ye,ve,fe,me,pe,J,Q,ue,Ps,we,Gt,Be,Kt,qe,Pt,ze,Xt,be,Yt,ie,at,Te,bt,tt,Ts,Fe,Rs,Me,Jt,je,yt,Pe,Qt;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=r,t.opacityToHex=o;var s=n(1),i=n(6);function r(q,d,D){for(const G of D)d.addEventListener(G,q[G].bind(q))}function o(q){return Math.round(Math.min(255,Math.max(1,255*q))).toString(16).padStart(2,"0")}class b{constructor(){X(this,R,0)}getId(){return`${s.AnnotationEditorPrefix}${_t(this,R)._++}`}}R=new WeakMap;const B=class B{constructor(){X(this,M);X(this,S,(0,s.getUuid)());X(this,P,0);X(this,x,null)}static get _isSVGFittingCanvas(){const d='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',G=new OffscreenCanvas(1,3).getContext("2d"),te=new Image;te.src=d;const le=te.decode().then(()=>(G.drawImage(te,0,0,1,1,0,0,1,3),new Uint32Array(G.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",le)}async getFromFile(d){const{lastModified:D,name:G,size:te,type:le}=d;return re(this,M,qt).call(this,`${D}_${G}_${te}_${le}`,d)}async getFromUrl(d){return re(this,M,qt).call(this,d,d)}async getFromId(d){a(this,x)||ge(this,x,new Map);const D=a(this,x).get(d);return D?D.bitmap?(D.refCounter+=1,D):D.file?this.getFromFile(D.file):this.getFromUrl(D.url):null}getSvgUrl(d){const D=a(this,x).get(d);return D!=null&&D.isSvg?D.svgUrl:null}deleteId(d){a(this,x)||ge(this,x,new Map);const D=a(this,x).get(d);D&&(D.refCounter-=1,D.refCounter===0&&(D.bitmap=null))}isValidId(d){return d.startsWith(`image_${a(this,S)}_`)}};S=new WeakMap,P=new WeakMap,x=new WeakMap,M=new WeakSet,qt=async function(d,D){a(this,x)||ge(this,x,new Map);let G=a(this,x).get(d);if(G===null)return null;if(G!=null&&G.bitmap)return G.refCounter+=1,G;try{G||(G={bitmap:null,id:`image_${a(this,S)}_${_t(this,P)._++}`,refCounter:0,isSvg:!1});let te;if(typeof D=="string"){G.url=D;const le=await fetch(D);if(!le.ok)throw new Error(le.statusText);te=await le.blob()}else te=G.file=D;if(te.type==="image/svg+xml"){const le=B._isSVGFittingCanvas,_e=new FileReader,xe=new Image,Ie=new Promise((Oe,Ke)=>{xe.onload=()=>{G.bitmap=xe,G.isSvg=!0,Oe()},_e.onload=async()=>{const De=G.svgUrl=_e.result;xe.src=await le?`${De}#svgView(preserveAspectRatio(none))`:De},xe.onerror=_e.onerror=Ke});_e.readAsDataURL(te),await Ie}else G.bitmap=await createImageBitmap(te);G.refCounter=1}catch(te){console.error(te),G=null}return a(this,x).set(d,G),G&&a(this,x).set(G.id,G),G};let u=B;class c{constructor(d=128){X(this,O,[]);X(this,v,!1);X(this,C,void 0);X(this,z,-1);ge(this,C,d)}add({cmd:d,undo:D,mustExec:G,type:te=NaN,overwriteIfSameType:le=!1,keepUndo:_e=!1}){if(G&&d(),a(this,v))return;const xe={cmd:d,undo:D,type:te};if(a(this,z)===-1){a(this,O).length>0&&(a(this,O).length=0),ge(this,z,0),a(this,O).push(xe);return}if(le&&a(this,O)[a(this,z)].type===te){_e&&(xe.undo=a(this,O)[a(this,z)].undo),a(this,O)[a(this,z)]=xe;return}const Ie=a(this,z)+1;Ie===a(this,C)?a(this,O).splice(0,1):(ge(this,z,Ie),Ie<a(this,O).length&&a(this,O).splice(Ie)),a(this,O).push(xe)}undo(){a(this,z)!==-1&&(ge(this,v,!0),a(this,O)[a(this,z)].undo(),ge(this,v,!1),ge(this,z,a(this,z)-1))}redo(){a(this,z)<a(this,O).length-1&&(ge(this,z,a(this,z)+1),ge(this,v,!0),a(this,O)[a(this,z)].cmd(),ge(this,v,!1))}hasSomethingToUndo(){return a(this,z)!==-1}hasSomethingToRedo(){return a(this,z)<a(this,O).length-1}destroy(){ge(this,O,null)}}O=new WeakMap,v=new WeakMap,C=new WeakMap,z=new WeakMap,t.CommandManager=c;class l{constructor(d){X(this,N);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:D}=s.FeatureTest.platform;for(const[G,te,le={}]of d)for(const _e of G){const xe=_e.startsWith("mac+");D&&xe?(this.callbacks.set(_e.slice(4),{callback:te,options:le}),this.allKeys.add(_e.split("+").at(-1))):!D&&!xe&&(this.callbacks.set(_e,{callback:te,options:le}),this.allKeys.add(_e.split("+").at(-1)))}}exec(d,D){if(!this.allKeys.has(D.key))return;const G=this.callbacks.get(re(this,N,Cs).call(this,D));if(!G)return;const{callback:te,options:{bubbles:le=!1,args:_e=[],checker:xe=null}}=G;xe&&!xe(d,D)||(te.bind(d,..._e)(),le||(D.stopPropagation(),D.preventDefault()))}}N=new WeakSet,Cs=function(d){d.altKey&&this.buffer.push("alt"),d.ctrlKey&&this.buffer.push("ctrl"),d.metaKey&&this.buffer.push("meta"),d.shiftKey&&this.buffer.push("shift"),this.buffer.push(d.key);const D=this.buffer.join("+");return this.buffer.length=0,D},t.KeyboardManager=l;const j=class j{get _colors(){const d=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(d),(0,s.shadow)(this,"_colors",d)}convert(d){const D=(0,i.getRGB)(d);if(!window.matchMedia("(forced-colors: active)").matches)return D;for(const[G,te]of this._colors)if(te.every((le,_e)=>le===D[_e]))return j._colorsMapping.get(G);return D}getHexCode(d){const D=this._colors.get(d);return D?s.Util.makeHexColor(...D):d}};nt(j,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let A=j;t.ColorManager=A;const $e=class $e{constructor(d,D,G,te,le,_e){X(this,ue);X(this,we);X(this,Be);X(this,qe);X(this,ze);X(this,be);X(this,ie);X(this,Te);X(this,tt);X(this,Fe);X(this,Me);X(this,je);X(this,Pe);X(this,L,null);X(this,Z,new Map);X(this,se,new Map);X(this,V,null);X(this,oe,null);X(this,de,new c);X(this,he,0);X(this,Y,new Set);X(this,Ae,null);X(this,Se,null);X(this,ke,new Set);X(this,Re,null);X(this,H,new b);X(this,m,!1);X(this,_,!1);X(this,g,null);X(this,f,s.AnnotationEditorType.NONE);X(this,y,new Set);X(this,k,null);X(this,$,this.blur.bind(this));X(this,W,this.focus.bind(this));X(this,w,this.copy.bind(this));X(this,F,this.cut.bind(this));X(this,U,this.paste.bind(this));X(this,K,this.keydown.bind(this));X(this,ne,this.onEditingAction.bind(this));X(this,ee,this.onPageChanging.bind(this));X(this,ye,this.onScaleChanging.bind(this));X(this,ve,this.onRotationChanging.bind(this));X(this,fe,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});X(this,me,[0,0]);X(this,pe,null);X(this,J,null);X(this,Q,null);ge(this,J,d),ge(this,Q,D),ge(this,V,G),this._eventBus=te,this._eventBus._on("editingaction",a(this,ne)),this._eventBus._on("pagechanging",a(this,ee)),this._eventBus._on("scalechanging",a(this,ye)),this._eventBus._on("rotationchanging",a(this,ve)),ge(this,oe,le.annotationStorage),ge(this,Re,le.filterFactory),ge(this,k,_e),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const d=$e.prototype,D=le=>{const{activeElement:_e}=document;return _e&&a(le,J).contains(_e)&&le.hasSomethingToControl()},G=this.TRANSLATE_SMALL,te=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],d.selectAll],[["ctrl+z","mac+meta+z"],d.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],d.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],d.delete],[["Escape","mac+Escape"],d.unselectAll],[["ArrowLeft","mac+ArrowLeft"],d.translateSelectedEditors,{args:[-G,0],checker:D}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],d.translateSelectedEditors,{args:[-te,0],checker:D}],[["ArrowRight","mac+ArrowRight"],d.translateSelectedEditors,{args:[G,0],checker:D}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],d.translateSelectedEditors,{args:[te,0],checker:D}],[["ArrowUp","mac+ArrowUp"],d.translateSelectedEditors,{args:[0,-G],checker:D}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],d.translateSelectedEditors,{args:[0,-te],checker:D}],[["ArrowDown","mac+ArrowDown"],d.translateSelectedEditors,{args:[0,G],checker:D}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],d.translateSelectedEditors,{args:[0,te],checker:D}]]))}destroy(){re(this,qe,Pt).call(this),re(this,we,Gt).call(this),this._eventBus._off("editingaction",a(this,ne)),this._eventBus._off("pagechanging",a(this,ee)),this._eventBus._off("scalechanging",a(this,ye)),this._eventBus._off("rotationchanging",a(this,ve));for(const d of a(this,se).values())d.destroy();a(this,se).clear(),a(this,Z).clear(),a(this,ke).clear(),ge(this,L,null),a(this,y).clear(),a(this,de).destroy(),a(this,V).destroy()}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",a(this,k)?a(this,Re).addHCMFilter(a(this,k).foreground,a(this,k).background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(a(this,J)).direction)}editAltText(d){var D;(D=a(this,V))==null||D.editAltText(this,d)}onPageChanging({pageNumber:d}){ge(this,he,d-1)}focusMainContainer(){a(this,J).focus()}findParent(d,D){for(const G of a(this,se).values()){const{x:te,y:le,width:_e,height:xe}=G.div.getBoundingClientRect();if(d>=te&&d<=te+_e&&D>=le&&D<=le+xe)return G}return null}disableUserSelect(d=!1){a(this,Q).classList.toggle("noUserSelect",d)}addShouldRescale(d){a(this,ke).add(d)}removeShouldRescale(d){a(this,ke).delete(d)}onScaleChanging({scale:d}){this.commitOrRemove(),this.viewParameters.realScale=d*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const D of a(this,ke))D.onScaleChanging()}onRotationChanging({pagesRotation:d}){this.commitOrRemove(),this.viewParameters.rotation=d}addToAnnotationStorage(d){!d.isEmpty()&&a(this,oe)&&!a(this,oe).has(d.id)&&a(this,oe).setValue(d.id,d)}blur(){if(!this.hasSelection)return;const{activeElement:d}=document;for(const D of a(this,y))if(D.div.contains(d)){ge(this,g,[D,d]),D._focusEventsAllowed=!1;break}}focus(){if(!a(this,g))return;const[d,D]=a(this,g);ge(this,g,null),D.addEventListener("focusin",()=>{d._focusEventsAllowed=!0},{once:!0}),D.focus()}addEditListeners(){re(this,Be,Kt).call(this),re(this,ze,Xt).call(this)}removeEditListeners(){re(this,qe,Pt).call(this),re(this,be,Yt).call(this)}copy(d){var G;if(d.preventDefault(),(G=a(this,L))==null||G.commitOrRemove(),!this.hasSelection)return;const D=[];for(const te of a(this,y)){const le=te.serialize(!0);le&&D.push(le)}D.length!==0&&d.clipboardData.setData("application/pdfjs",JSON.stringify(D))}cut(d){this.copy(d),this.delete()}paste(d){d.preventDefault();const{clipboardData:D}=d;for(const le of D.items)for(const _e of a(this,Se))if(_e.isHandlingMimeForPasting(le.type)){_e.paste(le,this.currentLayer);return}let G=D.getData("application/pdfjs");if(!G)return;try{G=JSON.parse(G)}catch(le){(0,s.warn)(`paste: "${le.message}".`);return}if(!Array.isArray(G))return;this.unselectAll();const te=this.currentLayer;try{const le=[];for(const Ie of G){const Oe=te.deserialize(Ie);if(!Oe)return;le.push(Oe)}const _e=()=>{for(const Ie of le)re(this,Me,Jt).call(this,Ie);re(this,Pe,Qt).call(this,le)},xe=()=>{for(const Ie of le)Ie.remove()};this.addCommands({cmd:_e,undo:xe,mustExec:!0})}catch(le){(0,s.warn)(`paste: "${le.message}".`)}}keydown(d){var D;(D=this.getActive())!=null&&D.shouldGetKeyboardEvents()||$e._keyboardManager.exec(this,d)}onEditingAction(d){["undo","redo","delete","selectAll"].includes(d.name)&&this[d.name]()}setEditingState(d){d?(re(this,ue,Ps).call(this),re(this,Be,Kt).call(this),re(this,ze,Xt).call(this),re(this,ie,at).call(this,{isEditing:a(this,f)!==s.AnnotationEditorType.NONE,isEmpty:re(this,je,yt).call(this),hasSomethingToUndo:a(this,de).hasSomethingToUndo(),hasSomethingToRedo:a(this,de).hasSomethingToRedo(),hasSelectedEditor:!1})):(re(this,we,Gt).call(this),re(this,qe,Pt).call(this),re(this,be,Yt).call(this),re(this,ie,at).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(d){if(!a(this,Se)){ge(this,Se,d);for(const D of a(this,Se))re(this,Te,bt).call(this,D.defaultPropertiesToUpdate)}}getId(){return a(this,H).getId()}get currentLayer(){return a(this,se).get(a(this,he))}getLayer(d){return a(this,se).get(d)}get currentPageIndex(){return a(this,he)}addLayer(d){a(this,se).set(d.pageIndex,d),a(this,m)?d.enable():d.disable()}removeLayer(d){a(this,se).delete(d.pageIndex)}updateMode(d,D=null){if(a(this,f)!==d){if(ge(this,f,d),d===s.AnnotationEditorType.NONE){this.setEditingState(!1),re(this,Fe,Rs).call(this);return}this.setEditingState(!0),re(this,tt,Ts).call(this),this.unselectAll();for(const G of a(this,se).values())G.updateMode(d);if(D){for(const G of a(this,Z).values())if(G.annotationElementId===D){this.setSelected(G),G.enterInEditMode();break}}}}updateToolbar(d){d!==a(this,f)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:d})}updateParams(d,D){if(a(this,Se)){if(d===s.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(d);return}for(const G of a(this,y))G.updateParams(d,D);for(const G of a(this,Se))G.updateDefaultParams(d,D)}}enableWaiting(d=!1){if(a(this,_)!==d){ge(this,_,d);for(const D of a(this,se).values())d?D.disableClick():D.enableClick(),D.div.classList.toggle("waiting",d)}}getEditors(d){const D=[];for(const G of a(this,Z).values())G.pageIndex===d&&D.push(G);return D}getEditor(d){return a(this,Z).get(d)}addEditor(d){a(this,Z).set(d.id,d)}removeEditor(d){var D;a(this,Z).delete(d.id),this.unselect(d),(!d.annotationElementId||!a(this,Y).has(d.annotationElementId))&&((D=a(this,oe))==null||D.remove(d.id))}addDeletedAnnotationElement(d){a(this,Y).add(d.annotationElementId),d.deleted=!0}isDeletedAnnotationElement(d){return a(this,Y).has(d)}removeDeletedAnnotationElement(d){a(this,Y).delete(d.annotationElementId),d.deleted=!1}setActiveEditor(d){a(this,L)!==d&&(ge(this,L,d),d&&re(this,Te,bt).call(this,d.propertiesToUpdate))}toggleSelected(d){if(a(this,y).has(d)){a(this,y).delete(d),d.unselect(),re(this,ie,at).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,y).add(d),d.select(),re(this,Te,bt).call(this,d.propertiesToUpdate),re(this,ie,at).call(this,{hasSelectedEditor:!0})}setSelected(d){for(const D of a(this,y))D!==d&&D.unselect();a(this,y).clear(),a(this,y).add(d),d.select(),re(this,Te,bt).call(this,d.propertiesToUpdate),re(this,ie,at).call(this,{hasSelectedEditor:!0})}isSelected(d){return a(this,y).has(d)}unselect(d){d.unselect(),a(this,y).delete(d),re(this,ie,at).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,y).size!==0}undo(){a(this,de).undo(),re(this,ie,at).call(this,{hasSomethingToUndo:a(this,de).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:re(this,je,yt).call(this)})}redo(){a(this,de).redo(),re(this,ie,at).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,de).hasSomethingToRedo(),isEmpty:re(this,je,yt).call(this)})}addCommands(d){a(this,de).add(d),re(this,ie,at).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:re(this,je,yt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const d=[...a(this,y)],D=()=>{for(const te of d)te.remove()},G=()=>{for(const te of d)re(this,Me,Jt).call(this,te)};this.addCommands({cmd:D,undo:G,mustExec:!0})}commitOrRemove(){var d;(d=a(this,L))==null||d.commitOrRemove()}hasSomethingToControl(){return a(this,L)||this.hasSelection}selectAll(){for(const d of a(this,y))d.commit();re(this,Pe,Qt).call(this,a(this,Z).values())}unselectAll(){if(a(this,L)){a(this,L).commitOrRemove();return}if(this.hasSelection){for(const d of a(this,y))d.unselect();a(this,y).clear(),re(this,ie,at).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(d,D,G=!1){if(G||this.commitOrRemove(),!this.hasSelection)return;a(this,me)[0]+=d,a(this,me)[1]+=D;const[te,le]=a(this,me),_e=[...a(this,y)],xe=1e3;a(this,pe)&&clearTimeout(a(this,pe)),ge(this,pe,setTimeout(()=>{ge(this,pe,null),a(this,me)[0]=a(this,me)[1]=0,this.addCommands({cmd:()=>{for(const Ie of _e)a(this,Z).has(Ie.id)&&Ie.translateInPage(te,le)},undo:()=>{for(const Ie of _e)a(this,Z).has(Ie.id)&&Ie.translateInPage(-te,-le)},mustExec:!1})},xe));for(const Ie of _e)Ie.translateInPage(d,D)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ge(this,Ae,new Map);for(const d of a(this,y))a(this,Ae).set(d,{savedX:d.x,savedY:d.y,savedPageIndex:d.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Ae))return!1;this.disableUserSelect(!1);const d=a(this,Ae);ge(this,Ae,null);let D=!1;for(const[{x:te,y:le,pageIndex:_e},xe]of d)xe.newX=te,xe.newY=le,xe.newPageIndex=_e,D||(D=te!==xe.savedX||le!==xe.savedY||_e!==xe.savedPageIndex);if(!D)return!1;const G=(te,le,_e,xe)=>{if(a(this,Z).has(te.id)){const Ie=a(this,se).get(xe);Ie?te._setParentAndPosition(Ie,le,_e):(te.pageIndex=xe,te.x=le,te.y=_e)}};return this.addCommands({cmd:()=>{for(const[te,{newX:le,newY:_e,newPageIndex:xe}]of d)G(te,le,_e,xe)},undo:()=>{for(const[te,{savedX:le,savedY:_e,savedPageIndex:xe}]of d)G(te,le,_e,xe)},mustExec:!0}),!0}dragSelectedEditors(d,D){if(a(this,Ae))for(const G of a(this,Ae).keys())G.drag(d,D)}rebuild(d){if(d.parent===null){const D=this.getLayer(d.pageIndex);D?(D.changeParent(d),D.addOrRebuild(d)):(this.addEditor(d),this.addToAnnotationStorage(d),d.rebuild())}else d.parent.addOrRebuild(d)}isActive(d){return a(this,L)===d}getActive(){return a(this,L)}getMode(){return a(this,f)}get imageManager(){return(0,s.shadow)(this,"imageManager",new u)}};L=new WeakMap,Z=new WeakMap,se=new WeakMap,V=new WeakMap,oe=new WeakMap,de=new WeakMap,he=new WeakMap,Y=new WeakMap,Ae=new WeakMap,Se=new WeakMap,ke=new WeakMap,Re=new WeakMap,H=new WeakMap,m=new WeakMap,_=new WeakMap,g=new WeakMap,f=new WeakMap,y=new WeakMap,k=new WeakMap,$=new WeakMap,W=new WeakMap,w=new WeakMap,F=new WeakMap,U=new WeakMap,K=new WeakMap,ne=new WeakMap,ee=new WeakMap,ye=new WeakMap,ve=new WeakMap,fe=new WeakMap,me=new WeakMap,pe=new WeakMap,J=new WeakMap,Q=new WeakMap,ue=new WeakSet,Ps=function(){window.addEventListener("focus",a(this,W)),window.addEventListener("blur",a(this,$))},we=new WeakSet,Gt=function(){window.removeEventListener("focus",a(this,W)),window.removeEventListener("blur",a(this,$))},Be=new WeakSet,Kt=function(){window.addEventListener("keydown",a(this,K),{capture:!0})},qe=new WeakSet,Pt=function(){window.removeEventListener("keydown",a(this,K),{capture:!0})},ze=new WeakSet,Xt=function(){document.addEventListener("copy",a(this,w)),document.addEventListener("cut",a(this,F)),document.addEventListener("paste",a(this,U))},be=new WeakSet,Yt=function(){document.removeEventListener("copy",a(this,w)),document.removeEventListener("cut",a(this,F)),document.removeEventListener("paste",a(this,U))},ie=new WeakSet,at=function(d){Object.entries(d).some(([G,te])=>a(this,fe)[G]!==te)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,fe),d)})},Te=new WeakSet,bt=function(d){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:d})},tt=new WeakSet,Ts=function(){if(!a(this,m)){ge(this,m,!0);for(const d of a(this,se).values())d.enable()}},Fe=new WeakSet,Rs=function(){if(this.unselectAll(),a(this,m)){ge(this,m,!1);for(const d of a(this,se).values())d.disable()}},Me=new WeakSet,Jt=function(d){const D=a(this,se).get(d.pageIndex);D?D.addOrRebuild(d):this.addEditor(d)},je=new WeakSet,yt=function(){if(a(this,Z).size===0)return!0;if(a(this,Z).size===1)for(const d of a(this,Z).values())return d.isEmpty();return!1},Pe=new WeakSet,Qt=function(d){a(this,y).clear();for(const D of d)D.isEmpty()||(a(this,y).add(D),D.select());re(this,ie,at).call(this,{hasSelectedEditor:!0})},nt($e,"TRANSLATE_SMALL",1),nt($e,"TRANSLATE_BIG",10);let T=$e;t.AnnotationEditorUIManager=T},(e,t,n)=>{var he,Y,Ae,Se,ke,Re,H,m,_,g,f,y,ft,$,pt,w,Zt,U,Tt,ne,Rt,ye,At,fe,vt;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=z,t.getColorValues=Z,t.getCurrentTransform=se,t.getCurrentTransformInverse=V,t.getFilenameFromUrl=M,t.getPdfFilenameFromUrl=I,t.getRGB=L,t.getXfaPageViewport=j,t.isDataScheme=P,t.isPdfFile=x,t.isValidFetchUrl=O,t.loadScript=C,t.noContextMenu=v,t.setLayerDimensions=oe;var s=n(7),i=n(1);const r="http://www.w3.org/2000/svg",de=class de{};nt(de,"CSS",96),nt(de,"PDF",72),nt(de,"PDF_TO_CSS_UNITS",de.CSS/de.PDF);let o=de;t.PixelsPerInch=o;class b extends s.BaseFilterFactory{constructor({docId:Q,ownerDocument:ue=globalThis.document}={}){super();X(this,y);X(this,$);X(this,w);X(this,U);X(this,ne);X(this,ye);X(this,fe);X(this,he,void 0);X(this,Y,void 0);X(this,Ae,void 0);X(this,Se,void 0);X(this,ke,void 0);X(this,Re,void 0);X(this,H,void 0);X(this,m,void 0);X(this,_,void 0);X(this,g,void 0);X(this,f,0);ge(this,Ae,Q),ge(this,Se,ue)}addFilter(Q){if(!Q)return"none";let ue=a(this,y,ft).get(Q);if(ue)return ue;let Ee,we,Ne,Be;if(Q.length===1){const ze=Q[0],Xe=new Array(256);for(let be=0;be<256;be++)Xe[be]=ze[be]/255;Be=Ee=we=Ne=Xe.join(",")}else{const[ze,Xe,be]=Q,ae=new Array(256),ie=new Array(256),Ce=new Array(256);for(let Te=0;Te<256;Te++)ae[Te]=ze[Te]/255,ie[Te]=Xe[Te]/255,Ce[Te]=be[Te]/255;Ee=ae.join(","),we=ie.join(","),Ne=Ce.join(","),Be=`${Ee}${we}${Ne}`}if(ue=a(this,y,ft).get(Be),ue)return a(this,y,ft).set(Q,ue),ue;const Ve=`g_${a(this,Ae)}_transfer_map_${_t(this,f)._++}`,qe=`url(#${Ve})`;a(this,y,ft).set(Q,qe),a(this,y,ft).set(Be,qe);const Ge=re(this,U,Tt).call(this,Ve);return re(this,ye,At).call(this,Ee,we,Ne,Ge),qe}addHCMFilter(Q,ue){var Xe;const Ee=`${Q}-${ue}`;if(a(this,Re)===Ee)return a(this,H);if(ge(this,Re,Ee),ge(this,H,"none"),(Xe=a(this,ke))==null||Xe.remove(),!Q||!ue)return a(this,H);const we=re(this,fe,vt).call(this,Q);Q=i.Util.makeHexColor(...we);const Ne=re(this,fe,vt).call(this,ue);if(ue=i.Util.makeHexColor(...Ne),a(this,$,pt).style.color="",Q==="#000000"&&ue==="#ffffff"||Q===ue)return a(this,H);const Be=new Array(256);for(let be=0;be<=255;be++){const ae=be/255;Be[be]=ae<=.03928?ae/12.92:((ae+.055)/1.055)**2.4}const Ve=Be.join(","),qe=`g_${a(this,Ae)}_hcm_filter`,Ge=ge(this,m,re(this,U,Tt).call(this,qe));re(this,ye,At).call(this,Ve,Ve,Ve,Ge),re(this,w,Zt).call(this,Ge);const ze=(be,ae)=>{const ie=we[be]/255,Ce=Ne[be]/255,Te=new Array(ae+1);for(let st=0;st<=ae;st++)Te[st]=ie+st/ae*(Ce-ie);return Te.join(",")};return re(this,ye,At).call(this,ze(0,5),ze(1,5),ze(2,5),Ge),ge(this,H,`url(#${qe})`),a(this,H)}addHighlightHCMFilter(Q,ue,Ee,we){var Ce;const Ne=`${Q}-${ue}-${Ee}-${we}`;if(a(this,_)===Ne)return a(this,g);if(ge(this,_,Ne),ge(this,g,"none"),(Ce=a(this,m))==null||Ce.remove(),!Q||!ue)return a(this,g);const[Be,Ve]=[Q,ue].map(re(this,fe,vt).bind(this));let qe=Math.round(.2126*Be[0]+.7152*Be[1]+.0722*Be[2]),Ge=Math.round(.2126*Ve[0]+.7152*Ve[1]+.0722*Ve[2]),[ze,Xe]=[Ee,we].map(re(this,fe,vt).bind(this));Ge<qe&&([qe,Ge,ze,Xe]=[Ge,qe,Xe,ze]),a(this,$,pt).style.color="";const be=(Te,st,tt)=>{const ce=new Array(256),Fe=(Ge-qe)/tt,Ue=Te/255,Me=(st-Te)/(255*tt);let He=0;for(let je=0;je<=tt;je++){const Ze=Math.round(qe+je*Fe),Pe=Ue+je*Me;for(let Je=He;Je<=Ze;Je++)ce[Je]=Pe;He=Ze+1}for(let je=He;je<256;je++)ce[je]=ce[He-1];return ce.join(",")},ae=`g_${a(this,Ae)}_hcm_highlight_filter`,ie=ge(this,m,re(this,U,Tt).call(this,ae));return re(this,w,Zt).call(this,ie),re(this,ye,At).call(this,be(ze[0],Xe[0],5),be(ze[1],Xe[1],5),be(ze[2],Xe[2],5),ie),ge(this,g,`url(#${ae})`),a(this,g)}destroy(Q=!1){Q&&(a(this,H)||a(this,g))||(a(this,Y)&&(a(this,Y).parentNode.parentNode.remove(),ge(this,Y,null)),a(this,he)&&(a(this,he).clear(),ge(this,he,null)),ge(this,f,0))}}he=new WeakMap,Y=new WeakMap,Ae=new WeakMap,Se=new WeakMap,ke=new WeakMap,Re=new WeakMap,H=new WeakMap,m=new WeakMap,_=new WeakMap,g=new WeakMap,f=new WeakMap,y=new WeakSet,ft=function(){return a(this,he)||ge(this,he,new Map)},$=new WeakSet,pt=function(){if(!a(this,Y)){const Q=a(this,Se).createElement("div"),{style:ue}=Q;ue.visibility="hidden",ue.contain="strict",ue.width=ue.height=0,ue.position="absolute",ue.top=ue.left=0,ue.zIndex=-1;const Ee=a(this,Se).createElementNS(r,"svg");Ee.setAttribute("width",0),Ee.setAttribute("height",0),ge(this,Y,a(this,Se).createElementNS(r,"defs")),Q.append(Ee),Ee.append(a(this,Y)),a(this,Se).body.append(Q)}return a(this,Y)},w=new WeakSet,Zt=function(Q){const ue=a(this,Se).createElementNS(r,"feColorMatrix");ue.setAttribute("type","matrix"),ue.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Q.append(ue)},U=new WeakSet,Tt=function(Q){const ue=a(this,Se).createElementNS(r,"filter");return ue.setAttribute("color-interpolation-filters","sRGB"),ue.setAttribute("id",Q),a(this,$,pt).append(ue),ue},ne=new WeakSet,Rt=function(Q,ue,Ee){const we=a(this,Se).createElementNS(r,ue);we.setAttribute("type","discrete"),we.setAttribute("tableValues",Ee),Q.append(we)},ye=new WeakSet,At=function(Q,ue,Ee,we){const Ne=a(this,Se).createElementNS(r,"feComponentTransfer");we.append(Ne),re(this,ne,Rt).call(this,Ne,"feFuncR",Q),re(this,ne,Rt).call(this,Ne,"feFuncG",ue),re(this,ne,Rt).call(this,Ne,"feFuncB",Ee)},fe=new WeakSet,vt=function(Q){return a(this,$,pt).style.color=Q,L(getComputedStyle(a(this,$,pt)).getPropertyValue("color"))},t.DOMFilterFactory=b;class u extends s.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,Q){const ue=this._document.createElement("canvas");return ue.width=J,ue.height=Q,ue}}t.DOMCanvasFactory=u;async function c(pe,J=!1){if(O(pe,document.baseURI)){const Q=await fetch(pe);if(!Q.ok)throw new Error(Q.statusText);return J?new Uint8Array(await Q.arrayBuffer()):(0,i.stringToBytes)(await Q.text())}return new Promise((Q,ue)=>{const Ee=new XMLHttpRequest;Ee.open("GET",pe,!0),J&&(Ee.responseType="arraybuffer"),Ee.onreadystatechange=()=>{if(Ee.readyState===XMLHttpRequest.DONE){if(Ee.status===200||Ee.status===0){let we;if(J&&Ee.response?we=new Uint8Array(Ee.response):!J&&Ee.responseText&&(we=(0,i.stringToBytes)(Ee.responseText)),we){Q(we);return}}ue(new Error(Ee.statusText))}},Ee.send(null)})}class l extends s.BaseCMapReaderFactory{_fetchData(J,Q){return c(J,this.isCompressed).then(ue=>({cMapData:ue,compressionType:Q}))}}t.DOMCMapReaderFactory=l;class A extends s.BaseStandardFontDataFactory{_fetchData(J){return c(J,!0)}}t.DOMStandardFontDataFactory=A;class T extends s.BaseSVGFactory{_createSVG(J){return document.createElementNS(r,J)}}t.DOMSVGFactory=T;class R{constructor({viewBox:J,scale:Q,rotation:ue,offsetX:Ee=0,offsetY:we=0,dontFlip:Ne=!1}){this.viewBox=J,this.scale=Q,this.rotation=ue,this.offsetX=Ee,this.offsetY=we;const Be=(J[2]+J[0])/2,Ve=(J[3]+J[1])/2;let qe,Ge,ze,Xe;switch(ue%=360,ue<0&&(ue+=360),ue){case 180:qe=-1,Ge=0,ze=0,Xe=1;break;case 90:qe=0,Ge=1,ze=1,Xe=0;break;case 270:qe=0,Ge=-1,ze=-1,Xe=0;break;case 0:qe=1,Ge=0,ze=0,Xe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ne&&(ze=-ze,Xe=-Xe);let be,ae,ie,Ce;qe===0?(be=Math.abs(Ve-J[1])*Q+Ee,ae=Math.abs(Be-J[0])*Q+we,ie=(J[3]-J[1])*Q,Ce=(J[2]-J[0])*Q):(be=Math.abs(Be-J[0])*Q+Ee,ae=Math.abs(Ve-J[1])*Q+we,ie=(J[2]-J[0])*Q,Ce=(J[3]-J[1])*Q),this.transform=[qe*Q,Ge*Q,ze*Q,Xe*Q,be-qe*Q*Be-ze*Q*Ve,ae-Ge*Q*Be-Xe*Q*Ve],this.width=ie,this.height=Ce}get rawDims(){const{viewBox:J}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:Q=this.rotation,offsetX:ue=this.offsetX,offsetY:Ee=this.offsetY,dontFlip:we=!1}={}){return new R({viewBox:this.viewBox.slice(),scale:J,rotation:Q,offsetX:ue,offsetY:Ee,dontFlip:we})}convertToViewportPoint(J,Q){return i.Util.applyTransform([J,Q],this.transform)}convertToViewportRectangle(J){const Q=i.Util.applyTransform([J[0],J[1]],this.transform),ue=i.Util.applyTransform([J[2],J[3]],this.transform);return[Q[0],Q[1],ue[0],ue[1]]}convertToPdfPoint(J,Q){return i.Util.applyInverseTransform([J,Q],this.transform)}}t.PageViewport=R;class S extends i.BaseException{constructor(J,Q=0){super(J,"RenderingCancelledException"),this.extraDelay=Q}}t.RenderingCancelledException=S;function P(pe){const J=pe.length;let Q=0;for(;Q<J&&pe[Q].trim()==="";)Q++;return pe.substring(Q,Q+5).toLowerCase()==="data:"}function x(pe){return typeof pe=="string"&&/\.pdf$/i.test(pe)}function M(pe,J=!1){return J||([pe]=pe.split(/[#?]/,1)),pe.substring(pe.lastIndexOf("/")+1)}function I(pe,J="document.pdf"){if(typeof pe!="string")return J;if(P(pe))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const Q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ue=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ee=Q.exec(pe);let we=ue.exec(Ee[1])||ue.exec(Ee[2])||ue.exec(Ee[3]);if(we&&(we=we[0],we.includes("%")))try{we=ue.exec(decodeURIComponent(we))[0]}catch{}return we||J}class B{constructor(){nt(this,"started",Object.create(null));nt(this,"times",[])}time(J){J in this.started&&(0,i.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,i.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let Q=0;for(const{name:ue}of this.times)Q=Math.max(ue.length,Q);for(const{name:ue,start:Ee,end:we}of this.times)J.push(`${ue.padEnd(Q)} ${we-Ee}ms
`);return J.join("")}}t.StatTimer=B;function O(pe,J){try{const{protocol:Q}=J?new URL(pe,J):new URL(pe);return Q==="http:"||Q==="https:"}catch{return!1}}function v(pe){pe.preventDefault()}function C(pe,J=!1){return new Promise((Q,ue)=>{const Ee=document.createElement("script");Ee.src=pe,Ee.onload=function(we){J&&Ee.remove(),Q(we)},Ee.onerror=function(){ue(new Error(`Cannot load script at: ${Ee.src}`))},(document.head||document.documentElement).append(Ee)})}function z(pe){console.log("Deprecated API usage: "+pe)}let N;class E{static toDateObject(J){if(!J||typeof J!="string")return null;N||(N=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Q=N.exec(J);if(!Q)return null;const ue=parseInt(Q[1],10);let Ee=parseInt(Q[2],10);Ee=Ee>=1&&Ee<=12?Ee-1:0;let we=parseInt(Q[3],10);we=we>=1&&we<=31?we:1;let Ne=parseInt(Q[4],10);Ne=Ne>=0&&Ne<=23?Ne:0;let Be=parseInt(Q[5],10);Be=Be>=0&&Be<=59?Be:0;let Ve=parseInt(Q[6],10);Ve=Ve>=0&&Ve<=59?Ve:0;const qe=Q[7]||"Z";let Ge=parseInt(Q[8],10);Ge=Ge>=0&&Ge<=23?Ge:0;let ze=parseInt(Q[9],10)||0;return ze=ze>=0&&ze<=59?ze:0,qe==="-"?(Ne+=Ge,Be+=ze):qe==="+"&&(Ne-=Ge,Be-=ze),new Date(Date.UTC(ue,Ee,we,Ne,Be,Ve))}}t.PDFDateString=E;function j(pe,{scale:J=1,rotation:Q=0}){const{width:ue,height:Ee}=pe.attributes.style,we=[0,0,parseInt(ue),parseInt(Ee)];return new R({viewBox:we,scale:J,rotation:Q})}function L(pe){if(pe.startsWith("#")){const J=parseInt(pe.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return pe.startsWith("rgb(")?pe.slice(4,-1).split(",").map(J=>parseInt(J)):pe.startsWith("rgba(")?pe.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,i.warn)(`Not a valid color format: "${pe}"`),[0,0,0])}function Z(pe){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const Q of pe.keys()){J.style.color=Q;const ue=window.getComputedStyle(J).color;pe.set(Q,L(ue))}J.remove()}function se(pe){const{a:J,b:Q,c:ue,d:Ee,e:we,f:Ne}=pe.getTransform();return[J,Q,ue,Ee,we,Ne]}function V(pe){const{a:J,b:Q,c:ue,d:Ee,e:we,f:Ne}=pe.getTransform().invertSelf();return[J,Q,ue,Ee,we,Ne]}function oe(pe,J,Q=!1,ue=!0){if(J instanceof R){const{pageWidth:Ee,pageHeight:we}=J.rawDims,{style:Ne}=pe,Be=i.FeatureTest.isCSSRoundSupported,Ve=`var(--scale-factor) * ${Ee}px`,qe=`var(--scale-factor) * ${we}px`,Ge=Be?`round(${Ve}, 1px)`:`calc(${Ve})`,ze=Be?`round(${qe}, 1px)`:`calc(${qe})`;!Q||J.rotation%180===0?(Ne.width=Ge,Ne.height=ze):(Ne.width=ze,Ne.height=Ge)}ue&&pe.setAttribute("data-main-rotation",J.rotation)}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var s=n(1);class i{constructor(){this.constructor===i&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,A){return"none"}addHighlightHCMFilter(l,A,T,R){return"none"}destroy(l=!1){}}t.BaseFilterFactory=i;class r{constructor(){this.constructor===r&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,A){if(l<=0||A<=0)throw new Error("Invalid canvas size");const T=this._createCanvas(l,A);return{canvas:T,context:T.getContext("2d")}}reset(l,A,T){if(!l.canvas)throw new Error("Canvas is not specified");if(A<=0||T<=0)throw new Error("Invalid canvas size");l.canvas.width=A,l.canvas.height=T}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,A){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=r;class o{constructor({baseUrl:l=null,isCompressed:A=!0}){this.constructor===o&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=A}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const A=this.baseUrl+l+(this.isCompressed?".bcmap":""),T=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(A,T).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${A}`)})}_fetchData(l,A){(0,s.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=o;class b{constructor({baseUrl:l=null}){this.constructor===b&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const A=`${this.baseUrl}${l}`;return this._fetchData(A).catch(T=>{throw new Error(`Unable to load font data at: ${A}`)})}_fetchData(l){(0,s.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=b;class u{constructor(){this.constructor===u&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,A,T=!1){if(l<=0||A<=0)throw new Error("Invalid SVG dimensions");const R=this._createSVG("svg:svg");return R.setAttribute("version","1.1"),T||(R.setAttribute("width",`${l}px`),R.setAttribute("height",`${A}px`)),R.setAttribute("preserveAspectRatio","none"),R.setAttribute("viewBox",`0 0 ${l} ${A}`),R}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,s.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=u},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var s=n(1);const i=3285377520,r=4294901760,o=65535;class b{constructor(c){this.h1=c?c&4294967295:i,this.h2=c?c&4294967295:i}update(c){let l,A;if(typeof c=="string"){l=new Uint8Array(c.length*2),A=0;for(let z=0,N=c.length;z<N;z++){const E=c.charCodeAt(z);E<=255?l[A++]=E:(l[A++]=E>>>8,l[A++]=E&255)}}else if((0,s.isArrayBuffer)(c))l=c.slice(),A=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const T=A>>2,R=A-T*4,S=new Uint32Array(l.buffer,0,T);let P=0,x=0,M=this.h1,I=this.h2;const B=3432918353,O=461845907,v=B&o,C=O&o;for(let z=0;z<T;z++)z&1?(P=S[z],P=P*B&r|P*v&o,P=P<<15|P>>>17,P=P*O&r|P*C&o,M^=P,M=M<<13|M>>>19,M=M*5+3864292196):(x=S[z],x=x*B&r|x*v&o,x=x<<15|x>>>17,x=x*O&r|x*C&o,I^=x,I=I<<13|I>>>19,I=I*5+3864292196);switch(P=0,R){case 3:P^=l[T*4+2]<<16;case 2:P^=l[T*4+1]<<8;case 1:P^=l[T*4],P=P*B&r|P*v&o,P=P<<15|P>>>17,P=P*O&r|P*C&o,T&1?M^=P:I^=P}this.h1=M,this.h2=I}hexdigest(){let c=this.h1,l=this.h2;return c^=l>>>1,c=c*3981806797&r|c*36045&o,l=l*4283543511&r|((l<<16|c>>>16)*2950163797&r)>>>16,c^=l>>>1,c=c*444984403&r|c*60499&o,l=l*3301882366&r|((l<<16|c>>>16)*3120437893&r)>>>16,c^=l>>>1,(c>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=b},(e,t,n)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var s=n(1);class i{constructor({ownerDocument:u=globalThis.document,styleElement:c=null}){X(this,o,new Set);this._document=u,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(u){this.nativeFontFaces.add(u),this._document.fonts.add(u)}removeNativeFontFace(u){this.nativeFontFaces.delete(u),this._document.fonts.delete(u)}insertRule(u){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const c=this.styleElement.sheet;c.insertRule(u,c.cssRules.length)}clear(){for(const u of this.nativeFontFaces)this._document.fonts.delete(u);this.nativeFontFaces.clear(),a(this,o).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(u){if(!(!u||a(this,o).has(u.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:c,src:l,style:A}=u,T=new FontFace(c,l,A);this.addNativeFontFace(T);try{await T.load(),a(this,o).add(c)}catch{(0,s.warn)(`Cannot load system font: ${u.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(T)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(u){if(u.attached||u.missingFile&&!u.systemFontInfo)return;if(u.attached=!0,u.systemFontInfo){await this.loadSystemFont(u.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=u.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(A){throw(0,s.warn)(`Failed to load font '${l.family}': '${A}'.`),u.disableFontFace=!0,A}}return}const c=u.createFontFaceRule();if(c){if(this.insertRule(c),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const A=this._queueLoadingCallback(l);this._prepareFontLoadEvent(u,A)})}}get isFontLoadingAPISupported(){var c;const u=!!((c=this._document)!=null&&c.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",u)}get isSyncFontLoadingSupported(){let u=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(u=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",u)}_queueLoadingCallback(u){function c(){for((0,s.assert)(!A.done,"completeRequest() cannot be called twice."),A.done=!0;l.length>0&&l[0].done;){const T=l.shift();setTimeout(T.callback,0)}}const{loadingRequests:l}=this,A={done:!1,complete:c,callback:u};return l.push(A),A}get _loadTestFont(){const u=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",u)}_prepareFontLoadEvent(u,c){function l(L,Z){return L.charCodeAt(Z)<<24|L.charCodeAt(Z+1)<<16|L.charCodeAt(Z+2)<<8|L.charCodeAt(Z+3)&255}function A(L,Z,se,V){const oe=L.substring(0,Z),de=L.substring(Z+se);return oe+V+de}let T,R;const S=this._document.createElement("canvas");S.width=1,S.height=1;const P=S.getContext("2d");let x=0;function M(L,Z){if(++x>30){(0,s.warn)("Load test font never loaded."),Z();return}if(P.font="30px "+L,P.fillText(".",0,20),P.getImageData(0,0,1,1).data[3]>0){Z();return}setTimeout(M.bind(null,L,Z))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let B=this._loadTestFont;B=A(B,976,I.length,I);const v=16,C=1482184792;let z=l(B,v);for(T=0,R=I.length-3;T<R;T+=4)z=z-C+l(I,T)|0;T<I.length&&(z=z-C+l(I+"XXX",T)|0),B=A(B,v,4,(0,s.string32)(z));const N=`url(data:font/opentype;base64,${btoa(B)});`,E=`@font-face {font-family:"${I}";src:${N}}`;this.insertRule(E);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const L of[u.loadedName,I]){const Z=this._document.createElement("span");Z.textContent="Hi",Z.style.fontFamily=L,j.append(Z)}this._document.body.append(j),M(I,()=>{j.remove(),c.complete()})}}o=new WeakMap,t.FontLoader=i;class r{constructor(u,{isEvalSupported:c=!0,disableFontFace:l=!1,ignoreErrors:A=!1,inspectFont:T=null}){this.compiledGlyphs=Object.create(null);for(const R in u)this[R]=u[R];this.isEvalSupported=c!==!1,this.disableFontFace=l===!0,this.ignoreErrors=A===!0,this._inspectFont=T}createNativeFontFace(){var c;if(!this.data||this.disableFontFace)return null;let u;if(!this.cssFontInfo)u=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),u=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(c=this._inspectFont)==null||c.call(this,this),u}createFontFaceRule(){var A;if(!this.data||this.disableFontFace)return null;const u=(0,s.bytesToString)(this.data),c=`url(data:${this.mimetype};base64,${btoa(u)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${c}}`;else{let T=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(T+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${T}src:${c}}`}return(A=this._inspectFont)==null||A.call(this,this,c),l}getPathGenerator(u,c){if(this.compiledGlyphs[c]!==void 0)return this.compiledGlyphs[c];let l;try{l=u.get(this.loadedName+"_path_"+c)}catch(A){if(!this.ignoreErrors)throw A;return(0,s.warn)(`getPathGenerator - ignoring character: "${A}".`),this.compiledGlyphs[c]=function(T,R){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const A=[];for(const T of l){const R=T.args!==void 0?T.args.join(","):"";A.push("c.",T.cmd,"(",R,`);
`)}return this.compiledGlyphs[c]=new Function("c","size",A.join(""))}return this.compiledGlyphs[c]=function(A,T){for(const R of l)R.cmd==="scale"&&(R.args=[T,-T]),A[R.cmd].apply(A,R.args)}}}t.FontFaceObject=r},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var s=n(7);n(1);const i=function(c){return new Promise((l,A)=>{require$$5.readFile(c,(R,S)=>{if(R||!S){A(new Error(R));return}l(new Uint8Array(S))})})};class r extends s.BaseFilterFactory{}t.NodeFilterFactory=r;class o extends s.BaseCanvasFactory{_createCanvas(l,A){return require$$5.createCanvas(l,A)}}t.NodeCanvasFactory=o;class b extends s.BaseCMapReaderFactory{_fetchData(l,A){return i(l).then(T=>({cMapData:T,compressionType:A}))}}t.NodeCMapReaderFactory=b;class u extends s.BaseStandardFontDataFactory{_fetchData(l){return i(l)}}t.NodeStandardFontDataFactory=u},(e,t,n)=>{var Y,es,Se,ts;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var s=n(1),i=n(6),r=n(12),o=n(13);const b=16,u=100,c=4096,l=15,A=10,T=1e3,R=16;function S(H,m){if(H._removeMirroring)throw new Error("Context is already forwarding operations.");H.__originalSave=H.save,H.__originalRestore=H.restore,H.__originalRotate=H.rotate,H.__originalScale=H.scale,H.__originalTranslate=H.translate,H.__originalTransform=H.transform,H.__originalSetTransform=H.setTransform,H.__originalResetTransform=H.resetTransform,H.__originalClip=H.clip,H.__originalMoveTo=H.moveTo,H.__originalLineTo=H.lineTo,H.__originalBezierCurveTo=H.bezierCurveTo,H.__originalRect=H.rect,H.__originalClosePath=H.closePath,H.__originalBeginPath=H.beginPath,H._removeMirroring=()=>{H.save=H.__originalSave,H.restore=H.__originalRestore,H.rotate=H.__originalRotate,H.scale=H.__originalScale,H.translate=H.__originalTranslate,H.transform=H.__originalTransform,H.setTransform=H.__originalSetTransform,H.resetTransform=H.__originalResetTransform,H.clip=H.__originalClip,H.moveTo=H.__originalMoveTo,H.lineTo=H.__originalLineTo,H.bezierCurveTo=H.__originalBezierCurveTo,H.rect=H.__originalRect,H.closePath=H.__originalClosePath,H.beginPath=H.__originalBeginPath,delete H._removeMirroring},H.save=function(){m.save(),this.__originalSave()},H.restore=function(){m.restore(),this.__originalRestore()},H.translate=function(g,f){m.translate(g,f),this.__originalTranslate(g,f)},H.scale=function(g,f){m.scale(g,f),this.__originalScale(g,f)},H.transform=function(g,f,y,k,$,W){m.transform(g,f,y,k,$,W),this.__originalTransform(g,f,y,k,$,W)},H.setTransform=function(g,f,y,k,$,W){m.setTransform(g,f,y,k,$,W),this.__originalSetTransform(g,f,y,k,$,W)},H.resetTransform=function(){m.resetTransform(),this.__originalResetTransform()},H.rotate=function(g){m.rotate(g),this.__originalRotate(g)},H.clip=function(g){m.clip(g),this.__originalClip(g)},H.moveTo=function(_,g){m.moveTo(_,g),this.__originalMoveTo(_,g)},H.lineTo=function(_,g){m.lineTo(_,g),this.__originalLineTo(_,g)},H.bezierCurveTo=function(_,g,f,y,k,$){m.bezierCurveTo(_,g,f,y,k,$),this.__originalBezierCurveTo(_,g,f,y,k,$)},H.rect=function(_,g,f,y){m.rect(_,g,f,y),this.__originalRect(_,g,f,y)},H.closePath=function(){m.closePath(),this.__originalClosePath()},H.beginPath=function(){m.beginPath(),this.__originalBeginPath()}}class P{constructor(m){this.canvasFactory=m,this.cache=Object.create(null)}getCanvas(m,_,g){let f;return this.cache[m]!==void 0?(f=this.cache[m],this.canvasFactory.reset(f,_,g)):(f=this.canvasFactory.create(_,g),this.cache[m]=f),f}delete(m){delete this.cache[m]}clear(){for(const m in this.cache){const _=this.cache[m];this.canvasFactory.destroy(_),delete this.cache[m]}}}function x(H,m,_,g,f,y,k,$,W,w){const[F,U,K,ne,ee,ye]=(0,i.getCurrentTransform)(H);if(U===0&&K===0){const me=k*F+ee,pe=Math.round(me),J=$*ne+ye,Q=Math.round(J),ue=(k+W)*F+ee,Ee=Math.abs(Math.round(ue)-pe)||1,we=($+w)*ne+ye,Ne=Math.abs(Math.round(we)-Q)||1;return H.setTransform(Math.sign(F),0,0,Math.sign(ne),pe,Q),H.drawImage(m,_,g,f,y,0,0,Ee,Ne),H.setTransform(F,U,K,ne,ee,ye),[Ee,Ne]}if(F===0&&ne===0){const me=$*K+ee,pe=Math.round(me),J=k*U+ye,Q=Math.round(J),ue=($+w)*K+ee,Ee=Math.abs(Math.round(ue)-pe)||1,we=(k+W)*U+ye,Ne=Math.abs(Math.round(we)-Q)||1;return H.setTransform(0,Math.sign(U),Math.sign(K),0,pe,Q),H.drawImage(m,_,g,f,y,0,0,Ne,Ee),H.setTransform(F,U,K,ne,ee,ye),[Ne,Ee]}H.drawImage(m,_,g,f,y,k,$,W,w);const ve=Math.hypot(F,U),fe=Math.hypot(K,ne);return[ve*W,fe*w]}function M(H){const{width:m,height:_}=H;if(m>T||_>T)return null;const g=1e3,f=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),y=m+1;let k=new Uint8Array(y*(_+1)),$,W,w;const F=m+7&-8;let U=new Uint8Array(F*_),K=0;for(const fe of H.data){let me=128;for(;me>0;)U[K++]=fe&me?0:255,me>>=1}let ne=0;for(K=0,U[K]!==0&&(k[0]=1,++ne),W=1;W<m;W++)U[K]!==U[K+1]&&(k[W]=U[K]?2:1,++ne),K++;for(U[K]!==0&&(k[W]=2,++ne),$=1;$<_;$++){K=$*F,w=$*y,U[K-F]!==U[K]&&(k[w]=U[K]?1:8,++ne);let fe=(U[K]?4:0)+(U[K-F]?8:0);for(W=1;W<m;W++)fe=(fe>>2)+(U[K+1]?4:0)+(U[K-F+1]?8:0),f[fe]&&(k[w+W]=f[fe],++ne),K++;if(U[K-F]!==U[K]&&(k[w+W]=U[K]?2:4,++ne),ne>g)return null}for(K=F*(_-1),w=$*y,U[K]!==0&&(k[w]=8,++ne),W=1;W<m;W++)U[K]!==U[K+1]&&(k[w+W]=U[K]?4:8,++ne),K++;if(U[K]!==0&&(k[w+W]=4,++ne),ne>g)return null;const ee=new Int32Array([0,y,-1,0,-y,0,0,0,1]),ye=new Path2D;for($=0;ne&&$<=_;$++){let fe=$*y;const me=fe+m;for(;fe<me&&!k[fe];)fe++;if(fe===me)continue;ye.moveTo(fe%y,$);const pe=fe;let J=k[fe];do{const Q=ee[J];do fe+=Q;while(!k[fe]);const ue=k[fe];ue!==5&&ue!==10?(J=ue,k[fe]=0):(J=ue&51*J>>4,k[fe]&=J>>2|J<<2),ye.lineTo(fe%y,fe/y|0),k[fe]||--ne}while(pe!==fe);--$}return U=null,k=null,function(fe){fe.save(),fe.scale(1/m,-1/_),fe.translate(0,-_),fe.fill(ye),fe.beginPath(),fe.restore()}}class I{constructor(m,_){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,m,_])}clone(){const m=Object.create(this);return m.clipBox=this.clipBox.slice(),m}setCurrentPoint(m,_){this.x=m,this.y=_}updatePathMinMax(m,_,g){[_,g]=s.Util.applyTransform([_,g],m),this.minX=Math.min(this.minX,_),this.minY=Math.min(this.minY,g),this.maxX=Math.max(this.maxX,_),this.maxY=Math.max(this.maxY,g)}updateRectMinMax(m,_){const g=s.Util.applyTransform(_,m),f=s.Util.applyTransform(_.slice(2),m);this.minX=Math.min(this.minX,g[0],f[0]),this.minY=Math.min(this.minY,g[1],f[1]),this.maxX=Math.max(this.maxX,g[0],f[0]),this.maxY=Math.max(this.maxY,g[1],f[1])}updateScalingPathMinMax(m,_){s.Util.scaleMinMax(m,_),this.minX=Math.min(this.minX,_[0]),this.maxX=Math.max(this.maxX,_[1]),this.minY=Math.min(this.minY,_[2]),this.maxY=Math.max(this.maxY,_[3])}updateCurvePathMinMax(m,_,g,f,y,k,$,W,w,F){const U=s.Util.bezierBoundingBox(_,g,f,y,k,$,W,w);if(F){F[0]=Math.min(F[0],U[0],U[2]),F[1]=Math.max(F[1],U[0],U[2]),F[2]=Math.min(F[2],U[1],U[3]),F[3]=Math.max(F[3],U[1],U[3]);return}this.updateRectMinMax(m,U)}getPathBoundingBox(m=r.PathType.FILL,_=null){const g=[this.minX,this.minY,this.maxX,this.maxY];if(m===r.PathType.STROKE){_||(0,s.unreachable)("Stroke bounding box must include transform.");const f=s.Util.singularValueDecompose2dScale(_),y=f[0]*this.lineWidth/2,k=f[1]*this.lineWidth/2;g[0]-=y,g[1]-=k,g[2]+=y,g[3]+=k}return g}updateClipFromPath(){const m=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(m||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(m){this.clipBox=m,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(m=r.PathType.FILL,_=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(m,_))}}function B(H,m){if(typeof ImageData<"u"&&m instanceof ImageData){H.putImageData(m,0,0);return}const _=m.height,g=m.width,f=_%R,y=(_-f)/R,k=f===0?y:y+1,$=H.createImageData(g,R);let W=0,w;const F=m.data,U=$.data;let K,ne,ee,ye;if(m.kind===s.ImageKind.GRAYSCALE_1BPP){const ve=F.byteLength,fe=new Uint32Array(U.buffer,0,U.byteLength>>2),me=fe.length,pe=g+7>>3,J=4294967295,Q=s.FeatureTest.isLittleEndian?4278190080:255;for(K=0;K<k;K++){for(ee=K<y?R:f,w=0,ne=0;ne<ee;ne++){const ue=ve-W;let Ee=0;const we=ue>pe?g:ue*8-7,Ne=we&-8;let Be=0,Ve=0;for(;Ee<Ne;Ee+=8)Ve=F[W++],fe[w++]=Ve&128?J:Q,fe[w++]=Ve&64?J:Q,fe[w++]=Ve&32?J:Q,fe[w++]=Ve&16?J:Q,fe[w++]=Ve&8?J:Q,fe[w++]=Ve&4?J:Q,fe[w++]=Ve&2?J:Q,fe[w++]=Ve&1?J:Q;for(;Ee<we;Ee++)Be===0&&(Ve=F[W++],Be=128),fe[w++]=Ve&Be?J:Q,Be>>=1}for(;w<me;)fe[w++]=0;H.putImageData($,0,K*R)}}else if(m.kind===s.ImageKind.RGBA_32BPP){for(ne=0,ye=g*R*4,K=0;K<y;K++)U.set(F.subarray(W,W+ye)),W+=ye,H.putImageData($,0,ne),ne+=R;K<k&&(ye=g*f*4,U.set(F.subarray(W,W+ye)),H.putImageData($,0,ne))}else if(m.kind===s.ImageKind.RGB_24BPP)for(ee=R,ye=g*ee,K=0;K<k;K++){for(K>=y&&(ee=f,ye=g*ee),w=0,ne=ye;ne--;)U[w++]=F[W++],U[w++]=F[W++],U[w++]=F[W++],U[w++]=255;H.putImageData($,0,K*R)}else throw new Error(`bad image kind: ${m.kind}`)}function O(H,m){if(m.bitmap){H.drawImage(m.bitmap,0,0);return}const _=m.height,g=m.width,f=_%R,y=(_-f)/R,k=f===0?y:y+1,$=H.createImageData(g,R);let W=0;const w=m.data,F=$.data;for(let U=0;U<k;U++){const K=U<y?R:f;({srcPos:W}=(0,o.convertBlackAndWhiteToRGBA)({src:w,srcPos:W,dest:F,width:g,height:K,nonBlackColor:0})),H.putImageData($,0,U*R)}}function v(H,m){const _=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const g of _)H[g]!==void 0&&(m[g]=H[g]);H.setLineDash!==void 0&&(m.setLineDash(H.getLineDash()),m.lineDashOffset=H.lineDashOffset)}function C(H){if(H.strokeStyle=H.fillStyle="#000000",H.fillRule="nonzero",H.globalAlpha=1,H.lineWidth=1,H.lineCap="butt",H.lineJoin="miter",H.miterLimit=10,H.globalCompositeOperation="source-over",H.font="10px sans-serif",H.setLineDash!==void 0&&(H.setLineDash([]),H.lineDashOffset=0),!s.isNodeJS){const{filter:m}=H;m!=="none"&&m!==""&&(H.filter="none")}}function z(H,m,_,g){const f=H.length;for(let y=3;y<f;y+=4){const k=H[y];if(k===0)H[y-3]=m,H[y-2]=_,H[y-1]=g;else if(k<255){const $=255-k;H[y-3]=H[y-3]*k+m*$>>8,H[y-2]=H[y-2]*k+_*$>>8,H[y-1]=H[y-1]*k+g*$>>8}}}function N(H,m,_){const g=H.length,f=1/255;for(let y=3;y<g;y+=4){const k=_?_[H[y]]:H[y];m[y]=m[y]*k*f|0}}function E(H,m,_){const g=H.length;for(let f=3;f<g;f+=4){const y=H[f-3]*77+H[f-2]*152+H[f-1]*28;m[f]=_?m[f]*_[y>>8]>>8:m[f]*y>>16}}function j(H,m,_,g,f,y,k,$,W,w,F){const U=!!y,K=U?y[0]:0,ne=U?y[1]:0,ee=U?y[2]:0,ye=f==="Luminosity"?E:N,fe=Math.min(g,Math.ceil(1048576/_));for(let me=0;me<g;me+=fe){const pe=Math.min(fe,g-me),J=H.getImageData($-w,me+(W-F),_,pe),Q=m.getImageData($,me+W,_,pe);U&&z(J.data,K,ne,ee),ye(J.data,Q.data,k),m.putImageData(Q,$,me+W)}}function L(H,m,_,g){const f=g[0],y=g[1],k=g[2]-f,$=g[3]-y;k===0||$===0||(j(m.context,_,k,$,m.subtype,m.backdrop,m.transferMap,f,y,m.offsetX,m.offsetY),H.save(),H.globalAlpha=1,H.globalCompositeOperation="source-over",H.setTransform(1,0,0,1,0,0),H.drawImage(_.canvas,0,0),H.restore())}function Z(H,m){const _=s.Util.singularValueDecompose2dScale(H);_[0]=Math.fround(_[0]),_[1]=Math.fround(_[1]);const g=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return m!==void 0?m:_[0]<=g||_[1]<=g}const se=["butt","round","square"],V=["miter","round","bevel"],oe={},de={},Re=class Re{constructor(m,_,g,f,y,{optionalContentConfig:k,markedContentStack:$=null},W,w){X(this,Y);X(this,Se);this.ctx=m,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=_,this.objs=g,this.canvasFactory=f,this.filterFactory=y,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=$||[],this.optionalContentConfig=k,this.cachedCanvases=new P(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=W,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=w,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(m,_=null){return typeof m=="string"?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):_}beginDrawing({transform:m,viewport:_,transparency:g=!1,background:f=null}){const y=this.ctx.canvas.width,k=this.ctx.canvas.height,$=this.ctx.fillStyle;if(this.ctx.fillStyle=f||"#ffffff",this.ctx.fillRect(0,0,y,k),this.ctx.fillStyle=$,g){const W=this.cachedCanvases.getCanvas("transparent",y,k);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx),m&&(this.ctx.transform(...m),this.outputScaleX=m[0],this.outputScaleY=m[0]),this.ctx.transform(..._.transform),this.viewportScale=_.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(m,_,g,f){const y=m.argsArray,k=m.fnArray;let $=_||0;const W=y.length;if(W===$)return $;const w=W-$>A&&typeof g=="function",F=w?Date.now()+l:0;let U=0;const K=this.commonObjs,ne=this.objs;let ee;for(;;){if(f!==void 0&&$===f.nextBreakPoint)return f.breakIt($,g),$;if(ee=k[$],ee!==s.OPS.dependency)this[ee].apply(this,y[$]);else for(const ye of y[$]){const ve=ye.startsWith("g_")?K:ne;if(!ve.has(ye))return ve.get(ye,g),$}if($++,$===W)return $;if(w&&++U>A){if(Date.now()>F)return g(),$;U=0}}}endDrawing(){re(this,Y,es).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const m of this._cachedBitmapsMap.values()){for(const _ of m.values())typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement&&(_.width=_.height=0);m.clear()}this._cachedBitmapsMap.clear(),re(this,Se,ts).call(this)}_scaleImage(m,_){const g=m.width,f=m.height;let y=Math.max(Math.hypot(_[0],_[1]),1),k=Math.max(Math.hypot(_[2],_[3]),1),$=g,W=f,w="prescale1",F,U;for(;y>2&&$>1||k>2&&W>1;){let K=$,ne=W;y>2&&$>1&&(K=$>=16384?Math.floor($/2)-1||1:Math.ceil($/2),y/=$/K),k>2&&W>1&&(ne=W>=16384?Math.floor(W/2)-1||1:Math.ceil(W)/2,k/=W/ne),F=this.cachedCanvases.getCanvas(w,K,ne),U=F.context,U.clearRect(0,0,K,ne),U.drawImage(m,0,0,$,W,0,0,K,ne),m=F.canvas,$=K,W=ne,w=w==="prescale1"?"prescale2":"prescale1"}return{img:m,paintWidth:$,paintHeight:W}}_createMaskCanvas(m){const _=this.ctx,{width:g,height:f}=m,y=this.current.fillColor,k=this.current.patternFill,$=(0,i.getCurrentTransform)(_);let W,w,F,U;if((m.bitmap||m.data)&&m.count>1){const Ee=m.bitmap||m.data.buffer;w=JSON.stringify(k?$:[$.slice(0,4),y]),W=this._cachedBitmapsMap.get(Ee),W||(W=new Map,this._cachedBitmapsMap.set(Ee,W));const we=W.get(w);if(we&&!k){const Ne=Math.round(Math.min($[0],$[2])+$[4]),Be=Math.round(Math.min($[1],$[3])+$[5]);return{canvas:we,offsetX:Ne,offsetY:Be}}F=we}F||(U=this.cachedCanvases.getCanvas("maskCanvas",g,f),O(U.context,m));let K=s.Util.transform($,[1/g,0,0,-1/f,0,0]);K=s.Util.transform(K,[1,0,0,1,0,-f]);const ne=s.Util.applyTransform([0,0],K),ee=s.Util.applyTransform([g,f],K),ye=s.Util.normalizeRect([ne[0],ne[1],ee[0],ee[1]]),ve=Math.round(ye[2]-ye[0])||1,fe=Math.round(ye[3]-ye[1])||1,me=this.cachedCanvases.getCanvas("fillCanvas",ve,fe),pe=me.context,J=Math.min(ne[0],ee[0]),Q=Math.min(ne[1],ee[1]);pe.translate(-J,-Q),pe.transform(...K),F||(F=this._scaleImage(U.canvas,(0,i.getCurrentTransformInverse)(pe)),F=F.img,W&&k&&W.set(w,F)),pe.imageSmoothingEnabled=Z((0,i.getCurrentTransform)(pe),m.interpolate),x(pe,F,0,0,F.width,F.height,0,0,g,f),pe.globalCompositeOperation="source-in";const ue=s.Util.transform((0,i.getCurrentTransformInverse)(pe),[1,0,0,1,-J,-Q]);return pe.fillStyle=k?y.getPattern(_,this,ue,r.PathType.FILL):y,pe.fillRect(0,0,g,f),W&&!k&&(this.cachedCanvases.delete("fillCanvas"),W.set(w,me.canvas)),{canvas:me.canvas,offsetX:Math.round(J),offsetY:Math.round(Q)}}setLineWidth(m){m!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=m,this.ctx.lineWidth=m}setLineCap(m){this.ctx.lineCap=se[m]}setLineJoin(m){this.ctx.lineJoin=V[m]}setMiterLimit(m){this.ctx.miterLimit=m}setDash(m,_){const g=this.ctx;g.setLineDash!==void 0&&(g.setLineDash(m),g.lineDashOffset=_)}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[_,g]of m)switch(_){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g[0],g[1]);break;case"CA":this.current.strokeAlpha=g;break;case"ca":this.current.fillAlpha=g,this.ctx.globalAlpha=g;break;case"BM":this.ctx.globalCompositeOperation=g;break;case"SMask":this.current.activeSMask=g?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(g);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const m=this.inSMaskMode;this.current.activeSMask&&!m?this.beginSMaskMode():!this.current.activeSMask&&m&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const m=this.ctx.canvas.width,_=this.ctx.canvas.height,g="smaskGroupAt"+this.groupLevel,f=this.cachedCanvases.getCanvas(g,m,_);this.suspendedCtx=this.ctx,this.ctx=f.context;const y=this.ctx;y.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),v(this.suspendedCtx,y),S(y,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),v(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(m){if(!this.current.activeSMask)return;m?(m[0]=Math.floor(m[0]),m[1]=Math.floor(m[1]),m[2]=Math.ceil(m[2]),m[3]=Math.ceil(m[3])):m=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const _=this.current.activeSMask,g=this.suspendedCtx;L(g,_,this.ctx,m),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(v(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const m=this.current;this.stateStack.push(m),this.current=m.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),v(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(m,_,g,f,y,k){this.ctx.transform(m,_,g,f,y,k),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(m,_,g){const f=this.ctx,y=this.current;let k=y.x,$=y.y,W,w;const F=(0,i.getCurrentTransform)(f),U=F[0]===0&&F[3]===0||F[1]===0&&F[2]===0,K=U?g.slice(0):null;for(let ne=0,ee=0,ye=m.length;ne<ye;ne++)switch(m[ne]|0){case s.OPS.rectangle:k=_[ee++],$=_[ee++];const ve=_[ee++],fe=_[ee++],me=k+ve,pe=$+fe;f.moveTo(k,$),ve===0||fe===0?f.lineTo(me,pe):(f.lineTo(me,$),f.lineTo(me,pe),f.lineTo(k,pe)),U||y.updateRectMinMax(F,[k,$,me,pe]),f.closePath();break;case s.OPS.moveTo:k=_[ee++],$=_[ee++],f.moveTo(k,$),U||y.updatePathMinMax(F,k,$);break;case s.OPS.lineTo:k=_[ee++],$=_[ee++],f.lineTo(k,$),U||y.updatePathMinMax(F,k,$);break;case s.OPS.curveTo:W=k,w=$,k=_[ee+4],$=_[ee+5],f.bezierCurveTo(_[ee],_[ee+1],_[ee+2],_[ee+3],k,$),y.updateCurvePathMinMax(F,W,w,_[ee],_[ee+1],_[ee+2],_[ee+3],k,$,K),ee+=6;break;case s.OPS.curveTo2:W=k,w=$,f.bezierCurveTo(k,$,_[ee],_[ee+1],_[ee+2],_[ee+3]),y.updateCurvePathMinMax(F,W,w,k,$,_[ee],_[ee+1],_[ee+2],_[ee+3],K),k=_[ee+2],$=_[ee+3],ee+=4;break;case s.OPS.curveTo3:W=k,w=$,k=_[ee+2],$=_[ee+3],f.bezierCurveTo(_[ee],_[ee+1],k,$,k,$),y.updateCurvePathMinMax(F,W,w,_[ee],_[ee+1],k,$,k,$,K),ee+=4;break;case s.OPS.closePath:f.closePath();break}U&&y.updateScalingPathMinMax(F,K),y.setCurrentPoint(k,$)}closePath(){this.ctx.closePath()}stroke(m=!0){const _=this.ctx,g=this.current.strokeColor;_.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof g=="object"&&(g!=null&&g.getPattern)?(_.save(),_.strokeStyle=g.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),r.PathType.STROKE),this.rescaleAndStroke(!1),_.restore()):this.rescaleAndStroke(!0)),m&&this.consumePath(this.current.getClippedPathBoundingBox()),_.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(m=!0){const _=this.ctx,g=this.current.fillColor,f=this.current.patternFill;let y=!1;f&&(_.save(),_.fillStyle=g.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),r.PathType.FILL),y=!0);const k=this.current.getClippedPathBoundingBox();this.contentVisible&&k!==null&&(this.pendingEOFill?(_.fill("evenodd"),this.pendingEOFill=!1):_.fill()),y&&_.restore(),m&&this.consumePath(k)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=oe}eoClip(){this.pendingClip=de}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const m=this.pendingTextPaths,_=this.ctx;if(m===void 0){_.beginPath();return}_.save(),_.beginPath();for(const g of m)_.setTransform(...g.transform),_.translate(g.x,g.y),g.addToPath(_,g.fontSize);_.restore(),_.clip(),_.beginPath(),delete this.pendingTextPaths}setCharSpacing(m){this.current.charSpacing=m}setWordSpacing(m){this.current.wordSpacing=m}setHScale(m){this.current.textHScale=m/100}setLeading(m){this.current.leading=-m}setFont(m,_){var F;const g=this.commonObjs.get(m),f=this.current;if(!g)throw new Error(`Can't find font for ${m}`);if(f.fontMatrix=g.fontMatrix||s.FONT_IDENTITY_MATRIX,(f.fontMatrix[0]===0||f.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+m),_<0?(_=-_,f.fontDirection=-1):f.fontDirection=1,this.current.font=g,this.current.fontSize=_,g.isType3Font)return;const y=g.loadedName||"sans-serif",k=((F=g.systemFontInfo)==null?void 0:F.css)||`"${y}", ${g.fallbackName}`;let $="normal";g.black?$="900":g.bold&&($="bold");const W=g.italic?"italic":"normal";let w=_;_<b?w=b:_>u&&(w=u),this.current.fontSizeScale=_/w,this.ctx.font=`${W} ${$} ${w}px ${k}`}setTextRenderingMode(m){this.current.textRenderingMode=m}setTextRise(m){this.current.textRise=m}moveText(m,_){this.current.x=this.current.lineX+=m,this.current.y=this.current.lineY+=_}setLeadingMoveText(m,_){this.setLeading(-_),this.moveText(m,_)}setTextMatrix(m,_,g,f,y,k){this.current.textMatrix=[m,_,g,f,y,k],this.current.textMatrixScale=Math.hypot(m,_),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(m,_,g,f){const y=this.ctx,k=this.current,$=k.font,W=k.textRenderingMode,w=k.fontSize/k.fontSizeScale,F=W&s.TextRenderingMode.FILL_STROKE_MASK,U=!!(W&s.TextRenderingMode.ADD_TO_PATH_FLAG),K=k.patternFill&&!$.missingFile;let ne;($.disableFontFace||U||K)&&(ne=$.getPathGenerator(this.commonObjs,m)),$.disableFontFace||K?(y.save(),y.translate(_,g),y.beginPath(),ne(y,w),f&&y.setTransform(...f),(F===s.TextRenderingMode.FILL||F===s.TextRenderingMode.FILL_STROKE)&&y.fill(),(F===s.TextRenderingMode.STROKE||F===s.TextRenderingMode.FILL_STROKE)&&y.stroke(),y.restore()):((F===s.TextRenderingMode.FILL||F===s.TextRenderingMode.FILL_STROKE)&&y.fillText(m,_,g),(F===s.TextRenderingMode.STROKE||F===s.TextRenderingMode.FILL_STROKE)&&y.strokeText(m,_,g)),U&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(y),x:_,y:g,fontSize:w,addToPath:ne})}get isFontSubpixelAAEnabled(){const{context:m}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);m.scale(1.5,1),m.fillText("I",0,10);const _=m.getImageData(0,0,10,10).data;let g=!1;for(let f=3;f<_.length;f+=4)if(_[f]>0&&_[f]<255){g=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",g)}showText(m){const _=this.current,g=_.font;if(g.isType3Font)return this.showType3Text(m);const f=_.fontSize;if(f===0)return;const y=this.ctx,k=_.fontSizeScale,$=_.charSpacing,W=_.wordSpacing,w=_.fontDirection,F=_.textHScale*w,U=m.length,K=g.vertical,ne=K?1:-1,ee=g.defaultVMetrics,ye=f*_.fontMatrix[0],ve=_.textRenderingMode===s.TextRenderingMode.FILL&&!g.disableFontFace&&!_.patternFill;y.save(),y.transform(..._.textMatrix),y.translate(_.x,_.y+_.textRise),w>0?y.scale(F,-1):y.scale(F,1);let fe;if(_.patternFill){y.save();const ue=_.fillColor.getPattern(y,this,(0,i.getCurrentTransformInverse)(y),r.PathType.FILL);fe=(0,i.getCurrentTransform)(y),y.restore(),y.fillStyle=ue}let me=_.lineWidth;const pe=_.textMatrixScale;if(pe===0||me===0){const ue=_.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(ue===s.TextRenderingMode.STROKE||ue===s.TextRenderingMode.FILL_STROKE)&&(me=this.getSinglePixelWidth())}else me/=pe;if(k!==1&&(y.scale(k,k),me/=k),y.lineWidth=me,g.isInvalidPDFjsFont){const ue=[];let Ee=0;for(const we of m)ue.push(we.unicode),Ee+=we.width;y.fillText(ue.join(""),0,0),_.x+=Ee*ye*F,y.restore(),this.compose();return}let J=0,Q;for(Q=0;Q<U;++Q){const ue=m[Q];if(typeof ue=="number"){J+=ne*ue*f/1e3;continue}let Ee=!1;const we=(ue.isSpace?W:0)+$,Ne=ue.fontChar,Be=ue.accent;let Ve,qe,Ge=ue.width;if(K){const Xe=ue.vmetric||ee,be=-(ue.vmetric?Xe[1]:Ge*.5)*ye,ae=Xe[2]*ye;Ge=Xe?-Xe[0]:Ge,Ve=be/k,qe=(J+ae)/k}else Ve=J/k,qe=0;if(g.remeasure&&Ge>0){const Xe=y.measureText(Ne).width*1e3/f*k;if(Ge<Xe&&this.isFontSubpixelAAEnabled){const be=Ge/Xe;Ee=!0,y.save(),y.scale(be,1),Ve/=be}else Ge!==Xe&&(Ve+=(Ge-Xe)/2e3*f/k)}if(this.contentVisible&&(ue.isInFont||g.missingFile)){if(ve&&!Be)y.fillText(Ne,Ve,qe);else if(this.paintChar(Ne,Ve,qe,fe),Be){const Xe=Ve+f*Be.offset.x/k,be=qe-f*Be.offset.y/k;this.paintChar(Be.fontChar,Xe,be,fe)}}const ze=K?Ge*ye-we*w:Ge*ye+we*w;J+=ze,Ee&&y.restore()}K?_.y-=J:_.x+=J*F,y.restore(),this.compose()}showType3Text(m){const _=this.ctx,g=this.current,f=g.font,y=g.fontSize,k=g.fontDirection,$=f.vertical?1:-1,W=g.charSpacing,w=g.wordSpacing,F=g.textHScale*k,U=g.fontMatrix||s.FONT_IDENTITY_MATRIX,K=m.length,ne=g.textRenderingMode===s.TextRenderingMode.INVISIBLE;let ee,ye,ve,fe;if(!(ne||y===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,_.save(),_.transform(...g.textMatrix),_.translate(g.x,g.y),_.scale(F,k),ee=0;ee<K;++ee){if(ye=m[ee],typeof ye=="number"){fe=$*ye*y/1e3,this.ctx.translate(fe,0),g.x+=fe*F;continue}const me=(ye.isSpace?w:0)+W,pe=f.charProcOperatorList[ye.operatorListId];if(!pe){(0,s.warn)(`Type3 character "${ye.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ye,this.save(),_.scale(y,y),_.transform(...U),this.executeOperatorList(pe),this.restore()),ve=s.Util.applyTransform([ye.width,0],U)[0]*y+me,_.translate(ve,0),g.x+=ve*F}_.restore(),this.processingType3=null}}setCharWidth(m,_){}setCharWidthAndBounds(m,_,g,f,y,k){this.ctx.rect(g,f,y-g,k-f),this.ctx.clip(),this.endPath()}getColorN_Pattern(m){let _;if(m[0]==="TilingPattern"){const g=m[1],f=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),y={createCanvasGraphics:k=>new Re(k,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};_=new r.TilingPattern(m,g,this.ctx,y,f)}else _=this._getPattern(m[1],m[2]);return _}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(m,_,g){const f=s.Util.makeHexColor(m,_,g);this.ctx.strokeStyle=f,this.current.strokeColor=f}setFillRGBColor(m,_,g){const f=s.Util.makeHexColor(m,_,g);this.ctx.fillStyle=f,this.current.fillColor=f,this.current.patternFill=!1}_getPattern(m,_=null){let g;return this.cachedPatterns.has(m)?g=this.cachedPatterns.get(m):(g=(0,r.getShadingPattern)(this.getObject(m)),this.cachedPatterns.set(m,g)),_&&(g.matrix=_),g}shadingFill(m){if(!this.contentVisible)return;const _=this.ctx;this.save();const g=this._getPattern(m);_.fillStyle=g.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),r.PathType.SHADING);const f=(0,i.getCurrentTransformInverse)(_);if(f){const{width:y,height:k}=_.canvas,[$,W,w,F]=s.Util.getAxialAlignedBoundingBox([0,0,y,k],f);this.ctx.fillRect($,W,w-$,F-W)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(m,_){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(m)&&m.length===6&&this.transform(...m),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),_)){const g=_[2]-_[0],f=_[3]-_[1];this.ctx.rect(_[0],_[1],g,f),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),_),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(m){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const _=this.ctx;m.isolated||(0,s.info)("TODO: Support non-isolated groups."),m.knockout&&(0,s.warn)("Knockout groups not supported.");const g=(0,i.getCurrentTransform)(_);if(m.matrix&&_.transform(...m.matrix),!m.bbox)throw new Error("Bounding box is required.");let f=s.Util.getAxialAlignedBoundingBox(m.bbox,(0,i.getCurrentTransform)(_));const y=[0,0,_.canvas.width,_.canvas.height];f=s.Util.intersect(f,y)||[0,0,0,0];const k=Math.floor(f[0]),$=Math.floor(f[1]);let W=Math.max(Math.ceil(f[2])-k,1),w=Math.max(Math.ceil(f[3])-$,1),F=1,U=1;W>c&&(F=W/c,W=c),w>c&&(U=w/c,w=c),this.current.startNewPathAndClipBox([0,0,W,w]);let K="groupAt"+this.groupLevel;m.smask&&(K+="_smask_"+this.smaskCounter++%2);const ne=this.cachedCanvases.getCanvas(K,W,w),ee=ne.context;ee.scale(1/F,1/U),ee.translate(-k,-$),ee.transform(...g),m.smask?this.smaskStack.push({canvas:ne.canvas,context:ee,offsetX:k,offsetY:$,scaleX:F,scaleY:U,subtype:m.smask.subtype,backdrop:m.smask.backdrop,transferMap:m.smask.transferMap||null,startTransformInverse:null}):(_.setTransform(1,0,0,1,0,0),_.translate(k,$),_.scale(F,U),_.save()),v(_,ee),this.ctx=ee,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(_),this.groupLevel++}endGroup(m){if(!this.contentVisible)return;this.groupLevel--;const _=this.ctx,g=this.groupStack.pop();if(this.ctx=g,this.ctx.imageSmoothingEnabled=!1,m.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const f=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...f);const y=s.Util.getAxialAlignedBoundingBox([0,0,_.canvas.width,_.canvas.height],f);this.ctx.drawImage(_.canvas,0,0),this.ctx.restore(),this.compose(y)}}beginAnnotation(m,_,g,f,y){if(re(this,Y,es).call(this),C(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(_)&&_.length===4){const k=_[2]-_[0],$=_[3]-_[1];if(y&&this.annotationCanvasMap){g=g.slice(),g[4]-=_[0],g[5]-=_[1],_=_.slice(),_[0]=_[1]=0,_[2]=k,_[3]=$;const[W,w]=s.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:F}=this,U=Math.ceil(k*this.outputScaleX*F),K=Math.ceil($*this.outputScaleY*F);this.annotationCanvas=this.canvasFactory.create(U,K);const{canvas:ne,context:ee}=this.annotationCanvas;this.annotationCanvasMap.set(m,ne),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ee,this.ctx.save(),this.ctx.setTransform(W,0,0,-w,0,$*w),C(this.ctx)}else C(this.ctx),this.ctx.rect(_[0],_[1],k,$),this.ctx.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...g),this.transform(...f)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),re(this,Se,ts).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(m){if(!this.contentVisible)return;const _=m.count;m=this.getObject(m.data,m),m.count=_;const g=this.ctx,f=this.processingType3;if(f&&(f.compiled===void 0&&(f.compiled=M(m)),f.compiled)){f.compiled(g);return}const y=this._createMaskCanvas(m),k=y.canvas;g.save(),g.setTransform(1,0,0,1,0,0),g.drawImage(k,y.offsetX,y.offsetY),g.restore(),this.compose()}paintImageMaskXObjectRepeat(m,_,g=0,f=0,y,k){if(!this.contentVisible)return;m=this.getObject(m.data,m);const $=this.ctx;$.save();const W=(0,i.getCurrentTransform)($);$.transform(_,g,f,y,0,0);const w=this._createMaskCanvas(m);$.setTransform(1,0,0,1,w.offsetX-W[4],w.offsetY-W[5]);for(let F=0,U=k.length;F<U;F+=2){const K=s.Util.transform(W,[_,g,f,y,k[F],k[F+1]]),[ne,ee]=s.Util.applyTransform([0,0],K);$.drawImage(w.canvas,ne,ee)}$.restore(),this.compose()}paintImageMaskXObjectGroup(m){if(!this.contentVisible)return;const _=this.ctx,g=this.current.fillColor,f=this.current.patternFill;for(const y of m){const{data:k,width:$,height:W,transform:w}=y,F=this.cachedCanvases.getCanvas("maskCanvas",$,W),U=F.context;U.save();const K=this.getObject(k,y);O(U,K),U.globalCompositeOperation="source-in",U.fillStyle=f?g.getPattern(U,this,(0,i.getCurrentTransformInverse)(_),r.PathType.FILL):g,U.fillRect(0,0,$,W),U.restore(),_.save(),_.transform(...w),_.scale(1,-1),x(_,F.canvas,0,0,$,W,0,-1,1,1),_.restore()}this.compose()}paintImageXObject(m){if(!this.contentVisible)return;const _=this.getObject(m);if(!_){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(_)}paintImageXObjectRepeat(m,_,g,f){if(!this.contentVisible)return;const y=this.getObject(m);if(!y){(0,s.warn)("Dependent image isn't ready yet");return}const k=y.width,$=y.height,W=[];for(let w=0,F=f.length;w<F;w+=2)W.push({transform:[_,0,0,g,f[w],f[w+1]],x:0,y:0,w:k,h:$});this.paintInlineImageXObjectGroup(y,W)}applyTransferMapsToCanvas(m){return this.current.transferMaps!=="none"&&(m.filter=this.current.transferMaps,m.drawImage(m.canvas,0,0),m.filter="none"),m.canvas}applyTransferMapsToBitmap(m){if(this.current.transferMaps==="none")return m.bitmap;const{bitmap:_,width:g,height:f}=m,y=this.cachedCanvases.getCanvas("inlineImage",g,f),k=y.context;return k.filter=this.current.transferMaps,k.drawImage(_,0,0),k.filter="none",y.canvas}paintInlineImageXObject(m){if(!this.contentVisible)return;const _=m.width,g=m.height,f=this.ctx;if(this.save(),!s.isNodeJS){const{filter:$}=f;$!=="none"&&$!==""&&(f.filter="none")}f.scale(1/_,-1/g);let y;if(m.bitmap)y=this.applyTransferMapsToBitmap(m);else if(typeof HTMLElement=="function"&&m instanceof HTMLElement||!m.data)y=m;else{const W=this.cachedCanvases.getCanvas("inlineImage",_,g).context;B(W,m),y=this.applyTransferMapsToCanvas(W)}const k=this._scaleImage(y,(0,i.getCurrentTransformInverse)(f));f.imageSmoothingEnabled=Z((0,i.getCurrentTransform)(f),m.interpolate),x(f,k.img,0,0,k.paintWidth,k.paintHeight,0,-g,_,g),this.compose(),this.restore()}paintInlineImageXObjectGroup(m,_){if(!this.contentVisible)return;const g=this.ctx;let f;if(m.bitmap)f=m.bitmap;else{const y=m.width,k=m.height,W=this.cachedCanvases.getCanvas("inlineImage",y,k).context;B(W,m),f=this.applyTransferMapsToCanvas(W)}for(const y of _)g.save(),g.transform(...y.transform),g.scale(1,-1),x(g,f,y.x,y.y,y.w,y.h,0,-1,1,1),g.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(m){}markPointProps(m,_){}beginMarkedContent(m){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(m,_){m==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(_)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(m){const _=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(m);const g=this.ctx;this.pendingClip&&(_||(this.pendingClip===de?g.clip("evenodd"):g.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),g.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,i.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{const _=Math.abs(m[0]*m[3]-m[2]*m[1]),g=Math.hypot(m[0],m[2]),f=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(g,f)/_}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:m}=this.current,{a:_,b:g,c:f,d:y}=this.ctx.getTransform();let k,$;if(g===0&&f===0){const W=Math.abs(_),w=Math.abs(y);if(W===w)if(m===0)k=$=1/W;else{const F=W*m;k=$=F<1?1/F:1}else if(m===0)k=1/W,$=1/w;else{const F=W*m,U=w*m;k=F<1?1/F:1,$=U<1?1/U:1}}else{const W=Math.abs(_*y-g*f),w=Math.hypot(_,g),F=Math.hypot(f,y);if(m===0)k=F/W,$=w/W;else{const U=m*W;k=F>U?F/U:1,$=w>U?w/U:1}}this._cachedScaleForStroking[0]=k,this._cachedScaleForStroking[1]=$}return this._cachedScaleForStroking}rescaleAndStroke(m){const{ctx:_}=this,{lineWidth:g}=this.current,[f,y]=this.getScaleForStroking();if(_.lineWidth=g||1,f===1&&y===1){_.stroke();return}const k=_.getLineDash();if(m&&_.save(),_.scale(f,y),k.length>0){const $=Math.max(f,y);_.setLineDash(k.map(W=>W/$)),_.lineDashOffset/=$}_.stroke(),m&&_.restore()}isContentVisible(){for(let m=this.markedContentStack.length-1;m>=0;m--)if(!this.markedContentStack[m].visible)return!1;return!0}};Y=new WeakSet,es=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Se=new WeakSet,ts=function(){if(this.pageColors){const m=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(m!=="none"){const _=this.ctx.filter;this.ctx.filter=m,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=_}}};let he=Re;t.CanvasGraphics=he;for(const H in s.OPS)he.prototype[H]!==void 0&&(he.prototype[s.OPS[H]]=he.prototype[H])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=R;var s=n(1),i=n(6);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=r;function o(M,I){if(!I)return;const B=I[2]-I[0],O=I[3]-I[1],v=new Path2D;v.rect(I[0],I[1],B,O),M.clip(v)}class b{constructor(){this.constructor===b&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class u extends b{constructor(I){super(),this._type=I[1],this._bbox=I[2],this._colorStops=I[3],this._p0=I[4],this._p1=I[5],this._r0=I[6],this._r1=I[7],this.matrix=null}_createGradient(I){let B;this._type==="axial"?B=I.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(B=I.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const O of this._colorStops)B.addColorStop(O[0],O[1]);return B}getPattern(I,B,O,v){let C;if(v===r.STROKE||v===r.FILL){const z=B.current.getClippedPathBoundingBox(v,(0,i.getCurrentTransform)(I))||[0,0,0,0],N=Math.ceil(z[2]-z[0])||1,E=Math.ceil(z[3]-z[1])||1,j=B.cachedCanvases.getCanvas("pattern",N,E,!0),L=j.context;L.clearRect(0,0,L.canvas.width,L.canvas.height),L.beginPath(),L.rect(0,0,L.canvas.width,L.canvas.height),L.translate(-z[0],-z[1]),O=s.Util.transform(O,[1,0,0,1,z[0],z[1]]),L.transform(...B.baseTransform),this.matrix&&L.transform(...this.matrix),o(L,this._bbox),L.fillStyle=this._createGradient(L),L.fill(),C=I.createPattern(j.canvas,"no-repeat");const Z=new DOMMatrix(O);C.setTransform(Z)}else o(I,this._bbox),C=this._createGradient(I);return C}}function c(M,I,B,O,v,C,z,N){const E=I.coords,j=I.colors,L=M.data,Z=M.width*4;let se;E[B+1]>E[O+1]&&(se=B,B=O,O=se,se=C,C=z,z=se),E[O+1]>E[v+1]&&(se=O,O=v,v=se,se=z,z=N,N=se),E[B+1]>E[O+1]&&(se=B,B=O,O=se,se=C,C=z,z=se);const V=(E[B]+I.offsetX)*I.scaleX,oe=(E[B+1]+I.offsetY)*I.scaleY,de=(E[O]+I.offsetX)*I.scaleX,he=(E[O+1]+I.offsetY)*I.scaleY,Y=(E[v]+I.offsetX)*I.scaleX,Ae=(E[v+1]+I.offsetY)*I.scaleY;if(oe>=Ae)return;const Se=j[C],ke=j[C+1],Re=j[C+2],H=j[z],m=j[z+1],_=j[z+2],g=j[N],f=j[N+1],y=j[N+2],k=Math.round(oe),$=Math.round(Ae);let W,w,F,U,K,ne,ee,ye;for(let ve=k;ve<=$;ve++){if(ve<he){const Q=ve<oe?0:(oe-ve)/(oe-he);W=V-(V-de)*Q,w=Se-(Se-H)*Q,F=ke-(ke-m)*Q,U=Re-(Re-_)*Q}else{let Q;ve>Ae?Q=1:he===Ae?Q=0:Q=(he-ve)/(he-Ae),W=de-(de-Y)*Q,w=H-(H-g)*Q,F=m-(m-f)*Q,U=_-(_-y)*Q}let fe;ve<oe?fe=0:ve>Ae?fe=1:fe=(oe-ve)/(oe-Ae),K=V-(V-Y)*fe,ne=Se-(Se-g)*fe,ee=ke-(ke-f)*fe,ye=Re-(Re-y)*fe;const me=Math.round(Math.min(W,K)),pe=Math.round(Math.max(W,K));let J=Z*ve+me*4;for(let Q=me;Q<=pe;Q++)fe=(W-Q)/(W-K),fe<0?fe=0:fe>1&&(fe=1),L[J++]=w-(w-ne)*fe|0,L[J++]=F-(F-ee)*fe|0,L[J++]=U-(U-ye)*fe|0,L[J++]=255}}function l(M,I,B){const O=I.coords,v=I.colors;let C,z;switch(I.type){case"lattice":const N=I.verticesPerRow,E=Math.floor(O.length/N)-1,j=N-1;for(C=0;C<E;C++){let L=C*N;for(let Z=0;Z<j;Z++,L++)c(M,B,O[L],O[L+1],O[L+N],v[L],v[L+1],v[L+N]),c(M,B,O[L+N+1],O[L+1],O[L+N],v[L+N+1],v[L+1],v[L+N])}break;case"triangles":for(C=0,z=O.length;C<z;C+=3)c(M,B,O[C],O[C+1],O[C+2],v[C],v[C+1],v[C+2]);break;default:throw new Error("illegal figure")}}class A extends b{constructor(I){super(),this._coords=I[2],this._colors=I[3],this._figures=I[4],this._bounds=I[5],this._bbox=I[7],this._background=I[8],this.matrix=null}_createMeshCanvas(I,B,O){const N=Math.floor(this._bounds[0]),E=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-N,L=Math.ceil(this._bounds[3])-E,Z=Math.min(Math.ceil(Math.abs(j*I[0]*1.1)),3e3),se=Math.min(Math.ceil(Math.abs(L*I[1]*1.1)),3e3),V=j/Z,oe=L/se,de={coords:this._coords,colors:this._colors,offsetX:-N,offsetY:-E,scaleX:1/V,scaleY:1/oe},he=Z+2*2,Y=se+2*2,Ae=O.getCanvas("mesh",he,Y,!1),Se=Ae.context,ke=Se.createImageData(Z,se);if(B){const H=ke.data;for(let m=0,_=H.length;m<_;m+=4)H[m]=B[0],H[m+1]=B[1],H[m+2]=B[2],H[m+3]=255}for(const H of this._figures)l(ke,H,de);return Se.putImageData(ke,2,2),{canvas:Ae.canvas,offsetX:N-2*V,offsetY:E-2*oe,scaleX:V,scaleY:oe}}getPattern(I,B,O,v){o(I,this._bbox);let C;if(v===r.SHADING)C=s.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(I));else if(C=s.Util.singularValueDecompose2dScale(B.baseTransform),this.matrix){const N=s.Util.singularValueDecompose2dScale(this.matrix);C=[C[0]*N[0],C[1]*N[1]]}const z=this._createMeshCanvas(C,v===r.SHADING?null:this._background,B.cachedCanvases);return v!==r.SHADING&&(I.setTransform(...B.baseTransform),this.matrix&&I.transform(...this.matrix)),I.translate(z.offsetX,z.offsetY),I.scale(z.scaleX,z.scaleY),I.createPattern(z.canvas,"no-repeat")}}class T extends b{getPattern(){return"hotpink"}}function R(M){switch(M[0]){case"RadialAxial":return new u(M);case"Mesh":return new A(M);case"Dummy":return new T}throw new Error(`Unknown IR type: ${M[0]}`)}const S={COLORED:1,UNCOLORED:2},x=class x{constructor(I,B,O,v,C){this.operatorList=I[2],this.matrix=I[3]||[1,0,0,1,0,0],this.bbox=I[4],this.xstep=I[5],this.ystep=I[6],this.paintType=I[7],this.tilingType=I[8],this.color=B,this.ctx=O,this.canvasGraphicsFactory=v,this.baseTransform=C}createPatternCanvas(I){const B=this.operatorList,O=this.bbox,v=this.xstep,C=this.ystep,z=this.paintType,N=this.tilingType,E=this.color,j=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+N);const L=O[0],Z=O[1],se=O[2],V=O[3],oe=s.Util.singularValueDecompose2dScale(this.matrix),de=s.Util.singularValueDecompose2dScale(this.baseTransform),he=[oe[0]*de[0],oe[1]*de[1]],Y=this.getSizeAndScale(v,this.ctx.canvas.width,he[0]),Ae=this.getSizeAndScale(C,this.ctx.canvas.height,he[1]),Se=I.cachedCanvases.getCanvas("pattern",Y.size,Ae.size,!0),ke=Se.context,Re=j.createCanvasGraphics(ke);Re.groupLevel=I.groupLevel,this.setFillAndStrokeStyleToContext(Re,z,E);let H=L,m=Z,_=se,g=V;return L<0&&(H=0,_+=Math.abs(L)),Z<0&&(m=0,g+=Math.abs(Z)),ke.translate(-(Y.scale*H),-(Ae.scale*m)),Re.transform(Y.scale,0,0,Ae.scale,0,0),ke.save(),this.clipBbox(Re,H,m,_,g),Re.baseTransform=(0,i.getCurrentTransform)(Re.ctx),Re.executeOperatorList(B),Re.endDrawing(),{canvas:Se.canvas,scaleX:Y.scale,scaleY:Ae.scale,offsetX:H,offsetY:m}}getSizeAndScale(I,B,O){I=Math.abs(I);const v=Math.max(x.MAX_PATTERN_SIZE,B);let C=Math.ceil(I*O);return C>=v?C=v:O=C/I,{scale:O,size:C}}clipBbox(I,B,O,v,C){const z=v-B,N=C-O;I.ctx.rect(B,O,z,N),I.current.updateRectMinMax((0,i.getCurrentTransform)(I.ctx),[B,O,v,C]),I.clip(),I.endPath()}setFillAndStrokeStyleToContext(I,B,O){const v=I.ctx,C=I.current;switch(B){case S.COLORED:const z=this.ctx;v.fillStyle=z.fillStyle,v.strokeStyle=z.strokeStyle,C.fillColor=z.fillStyle,C.strokeColor=z.strokeStyle;break;case S.UNCOLORED:const N=s.Util.makeHexColor(O[0],O[1],O[2]);v.fillStyle=N,v.strokeStyle=N,C.fillColor=N,C.strokeColor=N;break;default:throw new s.FormatError(`Unsupported paint type: ${B}`)}}getPattern(I,B,O,v){let C=O;v!==r.SHADING&&(C=s.Util.transform(C,B.baseTransform),this.matrix&&(C=s.Util.transform(C,this.matrix)));const z=this.createPatternCanvas(B);let N=new DOMMatrix(C);N=N.translate(z.offsetX,z.offsetY),N=N.scale(1/z.scaleX,1/z.scaleY);const E=I.createPattern(z.canvas,"repeat");return E.setTransform(N),E}};nt(x,"MAX_PATTERN_SIZE",3e3);let P=x;t.TilingPattern=P},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=r,t.convertToRGBA=i,t.grayToRGBA=b;var s=n(1);function i(u){switch(u.kind){case s.ImageKind.GRAYSCALE_1BPP:return r(u);case s.ImageKind.RGB_24BPP:return o(u)}return null}function r({src:u,srcPos:c=0,dest:l,width:A,height:T,nonBlackColor:R=4294967295,inverseDecode:S=!1}){const P=s.FeatureTest.isLittleEndian?4278190080:255,[x,M]=S?[R,P]:[P,R],I=A>>3,B=A&7,O=u.length;l=new Uint32Array(l.buffer);let v=0;for(let C=0;C<T;C++){for(const N=c+I;c<N;c++){const E=c<O?u[c]:255;l[v++]=E&128?M:x,l[v++]=E&64?M:x,l[v++]=E&32?M:x,l[v++]=E&16?M:x,l[v++]=E&8?M:x,l[v++]=E&4?M:x,l[v++]=E&2?M:x,l[v++]=E&1?M:x}if(B===0)continue;const z=c<O?u[c++]:255;for(let N=0;N<B;N++)l[v++]=z&1<<7-N?M:x}return{srcPos:c,destPos:v}}function o({src:u,srcPos:c=0,dest:l,destPos:A=0,width:T,height:R}){let S=0;const P=u.length>>2,x=new Uint32Array(u.buffer,c,P);if(s.FeatureTest.isLittleEndian){for(;S<P-2;S+=3,A+=4){const M=x[S],I=x[S+1],B=x[S+2];l[A]=M|4278190080,l[A+1]=M>>>24|I<<8|4278190080,l[A+2]=I>>>16|B<<16|4278190080,l[A+3]=B>>>8|4278190080}for(let M=S*4,I=u.length;M<I;M+=3)l[A++]=u[M]|u[M+1]<<8|u[M+2]<<16|4278190080}else{for(;S<P-2;S+=3,A+=4){const M=x[S],I=x[S+1],B=x[S+2];l[A]=M|255,l[A+1]=M<<24|I>>>8|255,l[A+2]=I<<16|B>>>16|255,l[A+3]=B<<8|255}for(let M=S*4,I=u.length;M<I;M+=3)l[A++]=u[M]<<24|u[M+1]<<16|u[M+2]<<8|255}return{srcPos:c,destPos:A}}function b(u,c){if(s.FeatureTest.isLittleEndian)for(let l=0,A=u.length;l<A;l++)c[l]=u[l]*65793|4278190080;else for(let l=0,A=u.length;l<A;l++)c[l]=u[l]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{var u,ks,l,Fs,T,kt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var s=n(1);const i={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(S){switch(S instanceof Error||typeof S=="object"&&S!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new s.AbortException(S.message);case"MissingPDFException":return new s.MissingPDFException(S.message);case"PasswordException":return new s.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new s.UnknownErrorException(S.message,S.details);default:return new s.UnknownErrorException(S.message,S.toString())}}class b{constructor(P,x,M){X(this,u);X(this,l);X(this,T);this.sourceName=P,this.targetName=x,this.comObj=M,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=I=>{const B=I.data;if(B.targetName!==this.sourceName)return;if(B.stream){re(this,l,Fs).call(this,B);return}if(B.callback){const v=B.callbackId,C=this.callbackCapabilities[v];if(!C)throw new Error(`Cannot resolve callback ${v}`);if(delete this.callbackCapabilities[v],B.callback===i.DATA)C.resolve(B.data);else if(B.callback===i.ERROR)C.reject(o(B.reason));else throw new Error("Unexpected callback case");return}const O=this.actionHandler[B.action];if(!O)throw new Error(`Unknown action from worker: ${B.action}`);if(B.callbackId){const v=this.sourceName,C=B.sourceName;new Promise(function(z){z(O(B.data))}).then(function(z){M.postMessage({sourceName:v,targetName:C,callback:i.DATA,callbackId:B.callbackId,data:z})},function(z){M.postMessage({sourceName:v,targetName:C,callback:i.ERROR,callbackId:B.callbackId,reason:o(z)})});return}if(B.streamId){re(this,u,ks).call(this,B);return}O(B.data)},M.addEventListener("message",this._onComObjOnMessage)}on(P,x){const M=this.actionHandler;if(M[P])throw new Error(`There is already an actionName called "${P}"`);M[P]=x}send(P,x,M){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,data:x},M)}sendWithPromise(P,x,M){const I=this.callbackId++,B=new s.PromiseCapability;this.callbackCapabilities[I]=B;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,callbackId:I,data:x},M)}catch(O){B.reject(O)}return B.promise}sendWithStream(P,x,M,I){const B=this.streamId++,O=this.sourceName,v=this.targetName,C=this.comObj;return new ReadableStream({start:z=>{const N=new s.PromiseCapability;return this.streamControllers[B]={controller:z,startCall:N,pullCall:null,cancelCall:null,isClosed:!1},C.postMessage({sourceName:O,targetName:v,action:P,streamId:B,data:x,desiredSize:z.desiredSize},I),N.promise},pull:z=>{const N=new s.PromiseCapability;return this.streamControllers[B].pullCall=N,C.postMessage({sourceName:O,targetName:v,stream:r.PULL,streamId:B,desiredSize:z.desiredSize}),N.promise},cancel:z=>{(0,s.assert)(z instanceof Error,"cancel must have a valid reason");const N=new s.PromiseCapability;return this.streamControllers[B].cancelCall=N,this.streamControllers[B].isClosed=!0,C.postMessage({sourceName:O,targetName:v,stream:r.CANCEL,streamId:B,reason:o(z)}),N.promise}},M)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}u=new WeakSet,ks=function(P){const x=P.streamId,M=this.sourceName,I=P.sourceName,B=this.comObj,O=this,v=this.actionHandler[P.action],C={enqueue(z,N=1,E){if(this.isCancelled)return;const j=this.desiredSize;this.desiredSize-=N,j>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),B.postMessage({sourceName:M,targetName:I,stream:r.ENQUEUE,streamId:x,chunk:z},E)},close(){this.isCancelled||(this.isCancelled=!0,B.postMessage({sourceName:M,targetName:I,stream:r.CLOSE,streamId:x}),delete O.streamSinks[x])},error(z){(0,s.assert)(z instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,B.postMessage({sourceName:M,targetName:I,stream:r.ERROR,streamId:x,reason:o(z)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:P.desiredSize,ready:null};C.sinkCapability.resolve(),C.ready=C.sinkCapability.promise,this.streamSinks[x]=C,new Promise(function(z){z(v(P.data,C))}).then(function(){B.postMessage({sourceName:M,targetName:I,stream:r.START_COMPLETE,streamId:x,success:!0})},function(z){B.postMessage({sourceName:M,targetName:I,stream:r.START_COMPLETE,streamId:x,reason:o(z)})})},l=new WeakSet,Fs=function(P){const x=P.streamId,M=this.sourceName,I=P.sourceName,B=this.comObj,O=this.streamControllers[x],v=this.streamSinks[x];switch(P.stream){case r.START_COMPLETE:P.success?O.startCall.resolve():O.startCall.reject(o(P.reason));break;case r.PULL_COMPLETE:P.success?O.pullCall.resolve():O.pullCall.reject(o(P.reason));break;case r.PULL:if(!v){B.postMessage({sourceName:M,targetName:I,stream:r.PULL_COMPLETE,streamId:x,success:!0});break}v.desiredSize<=0&&P.desiredSize>0&&v.sinkCapability.resolve(),v.desiredSize=P.desiredSize,new Promise(function(C){var z;C((z=v.onPull)==null?void 0:z.call(v))}).then(function(){B.postMessage({sourceName:M,targetName:I,stream:r.PULL_COMPLETE,streamId:x,success:!0})},function(C){B.postMessage({sourceName:M,targetName:I,stream:r.PULL_COMPLETE,streamId:x,reason:o(C)})});break;case r.ENQUEUE:if((0,s.assert)(O,"enqueue should have stream controller"),O.isClosed)break;O.controller.enqueue(P.chunk);break;case r.CLOSE:if((0,s.assert)(O,"close should have stream controller"),O.isClosed)break;O.isClosed=!0,O.controller.close(),re(this,T,kt).call(this,O,x);break;case r.ERROR:(0,s.assert)(O,"error should have stream controller"),O.controller.error(o(P.reason)),re(this,T,kt).call(this,O,x);break;case r.CANCEL_COMPLETE:P.success?O.cancelCall.resolve():O.cancelCall.reject(o(P.reason)),re(this,T,kt).call(this,O,x);break;case r.CANCEL:if(!v)break;new Promise(function(C){var z;C((z=v.onCancel)==null?void 0:z.call(v,o(P.reason)))}).then(function(){B.postMessage({sourceName:M,targetName:I,stream:r.CANCEL_COMPLETE,streamId:x,success:!0})},function(C){B.postMessage({sourceName:M,targetName:I,stream:r.CANCEL_COMPLETE,streamId:x,reason:o(C)})}),v.sinkCapability.reject(o(P.reason)),v.isCancelled=!0,delete this.streamSinks[x];break;default:throw new Error("Unexpected stream case")}},T=new WeakSet,kt=async function(P,x){var M,I,B;await Promise.allSettled([(M=P.startCall)==null?void 0:M.promise,(I=P.pullCall)==null?void 0:I.promise,(B=P.cancelCall)==null?void 0:B.promise]),delete this.streamControllers[x]},t.MessageHandler=b},(e,t,n)=>{var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var s=n(1);class i{constructor({parsedData:u,rawData:c}){X(this,r,void 0);X(this,o,void 0);ge(this,r,u),ge(this,o,c)}getRaw(){return a(this,o)}get(u){return a(this,r).get(u)??null}getAll(){return(0,s.objectFromMap)(a(this,r))}has(u){return a(this,r).has(u)}}r=new WeakMap,o=new WeakMap,t.Metadata=i},(e,t,n)=>{var u,c,l,A,T,R,ss;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var s=n(1),i=n(8);const r=Symbol("INTERNAL");class o{constructor(x,M){X(this,u,!0);this.name=x,this.intent=M}get visible(){return a(this,u)}_setVisible(x,M){x!==r&&(0,s.unreachable)("Internal method `_setVisible` called."),ge(this,u,M)}}u=new WeakMap;class b{constructor(x){X(this,R);X(this,c,null);X(this,l,new Map);X(this,A,null);X(this,T,null);if(this.name=null,this.creator=null,x!==null){this.name=x.name,this.creator=x.creator,ge(this,T,x.order);for(const M of x.groups)a(this,l).set(M.id,new o(M.name,M.intent));if(x.baseState==="OFF")for(const M of a(this,l).values())M._setVisible(r,!1);for(const M of x.on)a(this,l).get(M)._setVisible(r,!0);for(const M of x.off)a(this,l).get(M)._setVisible(r,!1);ge(this,A,this.getHash())}}isVisible(x){if(a(this,l).size===0)return!0;if(!x)return(0,s.warn)("Optional content group not defined."),!0;if(x.type==="OCG")return a(this,l).has(x.id)?a(this,l).get(x.id).visible:((0,s.warn)(`Optional content group not found: ${x.id}`),!0);if(x.type==="OCMD"){if(x.expression)return re(this,R,ss).call(this,x.expression);if(!x.policy||x.policy==="AnyOn"){for(const M of x.ids){if(!a(this,l).has(M))return(0,s.warn)(`Optional content group not found: ${M}`),!0;if(a(this,l).get(M).visible)return!0}return!1}else if(x.policy==="AllOn"){for(const M of x.ids){if(!a(this,l).has(M))return(0,s.warn)(`Optional content group not found: ${M}`),!0;if(!a(this,l).get(M).visible)return!1}return!0}else if(x.policy==="AnyOff"){for(const M of x.ids){if(!a(this,l).has(M))return(0,s.warn)(`Optional content group not found: ${M}`),!0;if(!a(this,l).get(M).visible)return!0}return!1}else if(x.policy==="AllOff"){for(const M of x.ids){if(!a(this,l).has(M))return(0,s.warn)(`Optional content group not found: ${M}`),!0;if(a(this,l).get(M).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${x.policy}.`),!0}return(0,s.warn)(`Unknown group type ${x.type}.`),!0}setVisibility(x,M=!0){if(!a(this,l).has(x)){(0,s.warn)(`Optional content group not found: ${x}`);return}a(this,l).get(x)._setVisible(r,!!M),ge(this,c,null)}get hasInitialVisibility(){return a(this,A)===null||this.getHash()===a(this,A)}getOrder(){return a(this,l).size?a(this,T)?a(this,T).slice():[...a(this,l).keys()]:null}getGroups(){return a(this,l).size>0?(0,s.objectFromMap)(a(this,l)):null}getGroup(x){return a(this,l).get(x)||null}getHash(){if(a(this,c)!==null)return a(this,c);const x=new i.MurmurHash3_64;for(const[M,I]of a(this,l))x.update(`${M}:${I.visible}`);return ge(this,c,x.hexdigest())}}c=new WeakMap,l=new WeakMap,A=new WeakMap,T=new WeakMap,R=new WeakSet,ss=function(x){const M=x.length;if(M<2)return!0;const I=x[0];for(let B=1;B<M;B++){const O=x[B];let v;if(Array.isArray(O))v=re(this,R,ss).call(this,O);else if(a(this,l).has(O))v=a(this,l).get(O).visible;else return(0,s.warn)(`Optional content group not found: ${O}`),!0;switch(I){case"And":if(!v)return!1;break;case"Or":if(v)return!0;break;case"Not":return!v;default:return!0}}return I==="And"},t.OptionalContentConfig=b},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var s=n(1),i=n(6);class r{constructor({length:c,initialData:l,progressiveDone:A=!1,contentDispositionFilename:T=null,disableRange:R=!1,disableStream:S=!1},P){if((0,s.assert)(P,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=A,this._contentDispositionFilename=T,(l==null?void 0:l.length)>0){const x=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(x)}this._pdfDataRangeTransport=P,this._isStreamingSupported=!S,this._isRangeSupported=!R,this._contentLength=c,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((x,M)=>{this._onReceiveData({begin:x,chunk:M})}),this._pdfDataRangeTransport.addProgressListener((x,M)=>{this._onProgress({loaded:x,total:M})}),this._pdfDataRangeTransport.addProgressiveReadListener(x=>{this._onReceiveData({chunk:x})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:c,chunk:l}){const A=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(c===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(A):this._queuedChunks.push(A);else{const T=this._rangeReaders.some(function(R){return R._begin!==c?!1:(R._enqueue(A),!0)});(0,s.assert)(T,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var c;return((c=this._fullRequestReader)==null?void 0:c._loaded)??0}_onProgress(c){var l,A,T,R;c.total===void 0?(A=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||A.call(l,{loaded:c.loaded}):(R=(T=this._fullRequestReader)==null?void 0:T.onProgress)==null||R.call(T,{loaded:c.loaded,total:c.total})}_onProgressiveDone(){var c;(c=this._fullRequestReader)==null||c.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(c){const l=this._rangeReaders.indexOf(c);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const c=this._queuedChunks;return this._queuedChunks=null,new o(this,c,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(c,l){if(l<=this._progressiveDataLength)return null;const A=new b(this,c,l);return this._pdfDataRangeTransport.requestDataRange(c,l),this._rangeReaders.push(A),A}cancelAllRequests(c){var l;(l=this._fullRequestReader)==null||l.cancel(c);for(const A of this._rangeReaders.slice(0))A.cancel(c);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=r;class o{constructor(c,l,A=!1,T=null){this._stream=c,this._done=A||!1,this._filename=(0,i.isPdfFile)(T)?T:null,this._queuedChunks=l||[],this._loaded=0;for(const R of this._queuedChunks)this._loaded+=R.byteLength;this._requests=[],this._headersReady=Promise.resolve(),c._fullRequestReader=this,this.onProgress=null}_enqueue(c){this._done||(this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunks.push(c),this._loaded+=c.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const c=new s.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class b{constructor(c,l,A){this._stream=c,this._begin=l,this._end=A,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(c){if(!this._done){if(this._requests.length===0)this._queuedChunk=c;else{this._requests.shift().resolve({value:c,done:!1});for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const c=new s.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var s=n(1),i=n(20);function r(A,T,R){return{method:"GET",headers:A,signal:R.signal,mode:"cors",credentials:T?"include":"same-origin",redirect:"follow"}}function o(A){const T=new Headers;for(const R in A){const S=A[R];S!==void 0&&T.append(R,S)}return T}function b(A){return A instanceof Uint8Array?A.buffer:A instanceof ArrayBuffer?A:((0,s.warn)(`getArrayBuffer - unexpected data format: ${A}`),new Uint8Array(A).buffer)}class u{constructor(T){this.source=T,this.isHttp=/^https?:/i.test(T.url),this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T;return((T=this._fullRequestReader)==null?void 0:T._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}getRangeReader(T,R){if(R<=this._progressiveDataLength)return null;const S=new l(this,T,R);return this._rangeRequestReaders.push(S),S}cancelAllRequests(T){var R;(R=this._fullRequestReader)==null||R.cancel(T);for(const S of this._rangeRequestReaders.slice(0))S.cancel(T)}}t.PDFFetchStream=u;class c{constructor(T){this._stream=T,this._reader=null,this._loaded=0,this._filename=null;const R=T.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=new s.PromiseCapability,this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=o(this._stream.httpHeaders);const S=R.url;fetch(S,r(this._headers,this._withCredentials,this._abortController)).then(P=>{if(!(0,i.validateResponseStatus)(P.status))throw(0,i.createResponseStatusError)(P.status,S);this._reader=P.body.getReader(),this._headersCapability.resolve();const x=B=>P.headers.get(B),{allowRangeRequests:M,suggestedLength:I}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=M,this._contentLength=I||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(x),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;await this._headersCapability.promise;const{value:T,done:R}=await this._reader.read();return R?{value:T,done:R}:(this._loaded+=T.byteLength,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded,total:this._contentLength}),{value:b(T),done:!1})}cancel(T){var R;(R=this._reader)==null||R.cancel(T),this._abortController.abort()}}class l{constructor(T,R,S){this._stream=T,this._reader=null,this._loaded=0;const P=T.source;this._withCredentials=P.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!P.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${S-1}`);const x=P.url;fetch(x,r(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,i.validateResponseStatus)(M.status))throw(0,i.createResponseStatusError)(M.status,x);this._readCapability.resolve(),this._reader=M.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;await this._readCapability.promise;const{value:T,done:R}=await this._reader.read();return R?{value:T,done:R}:(this._loaded+=T.byteLength,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded}),{value:b(T),done:!1})}cancel(T){var R;(R=this._reader)==null||R.cancel(T),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=u,t.extractFilenameFromHeader=b,t.validateRangeRequestCapabilities=o,t.validateResponseStatus=c;var s=n(1),i=n(21),r=n(6);function o({getResponseHeader:l,isHttp:A,rangeChunkSize:T,disableRange:R}){const S={allowRangeRequests:!1,suggestedLength:void 0},P=parseInt(l("Content-Length"),10);return!Number.isInteger(P)||(S.suggestedLength=P,P<=2*T)||R||!A||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(S.allowRangeRequests=!0),S}function b(l){const A=l("Content-Disposition");if(A){let T=(0,i.getFilenameFromContentDispositionHeader)(A);if(T.includes("%"))try{T=decodeURIComponent(T)}catch{}if((0,r.isPdfFile)(T))return T}return null}function u(l,A){return l===404||l===0&&A.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+A+'".'):new s.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${A}".`,l)}function c(l){return l===200||l===206}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=i;var s=n(1);function i(r){let o=!0,b=u("filename\\*","i").exec(r);if(b){b=b[1];let P=T(b);return P=unescape(P),P=R(P),P=S(P),l(P)}if(b=A(r),b){const P=S(b);return l(P)}if(b=u("filename","i").exec(r),b){b=b[1];let P=T(b);return P=S(P),l(P)}function u(P,x){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',x)}function c(P,x){if(P){if(!/^[\x00-\xFF]+$/.test(x))return x;try{const M=new TextDecoder(P,{fatal:!0}),I=(0,s.stringToBytes)(x);x=M.decode(I),o=!1}catch{}}return x}function l(P){return o&&/[\x80-\xff]/.test(P)&&(P=c("utf-8",P),o&&(P=c("iso-8859-1",P))),P}function A(P){const x=[];let M;const I=u("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(M=I.exec(P))!==null;){let[,O,v,C]=M;if(O=parseInt(O,10),O in x){if(O===0)break;continue}x[O]=[v,C]}const B=[];for(let O=0;O<x.length&&O in x;++O){let[v,C]=x[O];C=T(C),v&&(C=unescape(C),O===0&&(C=R(C))),B.push(C)}return B.join("")}function T(P){if(P.startsWith('"')){const x=P.slice(1).split('\\"');for(let M=0;M<x.length;++M){const I=x[M].indexOf('"');I!==-1&&(x[M]=x[M].slice(0,I),x.length=M+1),x[M]=x[M].replaceAll(/\\(.)/g,"$1")}P=x.join('"')}return P}function R(P){const x=P.indexOf("'");if(x===-1)return P;const M=P.slice(0,x),B=P.slice(x+1).replace(/^[^']*'/,"");return c(M,B)}function S(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(x,M,I,B){if(I==="q"||I==="Q")return B=B.replaceAll("_"," "),B=B.replaceAll(/=([0-9a-fA-F]{2})/g,function(O,v){return String.fromCharCode(parseInt(v,16))}),c(M,B);try{B=atob(B)}catch{}return c(M,B)})}return""}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var s=n(1),i=n(20);const r=200,o=206;function b(T){const R=T.response;return typeof R!="string"?R:(0,s.stringToBytes)(R).buffer}class u{constructor(R,S={}){this.url=R,this.isHttp=/^https?:/i.test(R),this.httpHeaders=this.isHttp&&S.httpHeaders||Object.create(null),this.withCredentials=S.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(R,S,P){const x={begin:R,end:S};for(const M in P)x[M]=P[M];return this.request(x)}requestFull(R){return this.request(R)}request(R){const S=new XMLHttpRequest,P=this.currXhrId++,x=this.pendingRequests[P]={xhr:S};S.open("GET",this.url),S.withCredentials=this.withCredentials;for(const M in this.httpHeaders){const I=this.httpHeaders[M];I!==void 0&&S.setRequestHeader(M,I)}return this.isHttp&&"begin"in R&&"end"in R?(S.setRequestHeader("Range",`bytes=${R.begin}-${R.end-1}`),x.expectedStatus=o):x.expectedStatus=r,S.responseType="arraybuffer",R.onError&&(S.onerror=function(M){R.onError(S.status)}),S.onreadystatechange=this.onStateChange.bind(this,P),S.onprogress=this.onProgress.bind(this,P),x.onHeadersReceived=R.onHeadersReceived,x.onDone=R.onDone,x.onError=R.onError,x.onProgress=R.onProgress,S.send(null),P}onProgress(R,S){var x;const P=this.pendingRequests[R];P&&((x=P.onProgress)==null||x.call(P,S))}onStateChange(R,S){var O,v,C;const P=this.pendingRequests[R];if(!P)return;const x=P.xhr;if(x.readyState>=2&&P.onHeadersReceived&&(P.onHeadersReceived(),delete P.onHeadersReceived),x.readyState!==4||!(R in this.pendingRequests))return;if(delete this.pendingRequests[R],x.status===0&&this.isHttp){(O=P.onError)==null||O.call(P,x.status);return}const M=x.status||r;if(!(M===r&&P.expectedStatus===o)&&M!==P.expectedStatus){(v=P.onError)==null||v.call(P,x.status);return}const B=b(x);if(M===o){const z=x.getResponseHeader("Content-Range"),N=/bytes (\d+)-(\d+)\/(\d+)/.exec(z);P.onDone({begin:parseInt(N[1],10),chunk:B})}else B?P.onDone({begin:0,chunk:B}):(C=P.onError)==null||C.call(P,x.status)}getRequestXhr(R){return this.pendingRequests[R].xhr}isPendingRequest(R){return R in this.pendingRequests}abortRequest(R){const S=this.pendingRequests[R].xhr;delete this.pendingRequests[R],S.abort()}}class c{constructor(R){this._source=R,this._manager=new u(R.url,{httpHeaders:R.httpHeaders,withCredentials:R.withCredentials}),this._rangeChunkSize=R.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(R){const S=this._rangeRequestReaders.indexOf(R);S>=0&&this._rangeRequestReaders.splice(S,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(R,S){const P=new A(this._manager,R,S);return P.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(P),P}cancelAllRequests(R){var S;(S=this._fullRequestReader)==null||S.cancel(R);for(const P of this._rangeRequestReaders.slice(0))P.cancel(R)}}t.PDFNetworkStream=c;class l{constructor(R,S){this._manager=R;const P={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._fullRequestId=R.requestFull(P),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=S.disableRange||!1,this._contentLength=S.length,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const R=this._fullRequestId,S=this._manager.getRequestXhr(R),P=I=>S.getResponseHeader(I),{allowRangeRequests:x,suggestedLength:M}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});x&&(this._isRangeSupported=!0),this._contentLength=M||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(P),this._isRangeSupported&&this._manager.abortRequest(R),this._headersReceivedCapability.resolve()}_onDone(R){if(R&&(this._requests.length>0?this._requests.shift().resolve({value:R.chunk,done:!1}):this._cachedChunks.push(R.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(R){this._storedError=(0,i.createResponseStatusError)(R,this._url),this._headersReceivedCapability.reject(this._storedError);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(R){var S;(S=this.onProgress)==null||S.call(this,{loaded:R.loaded,total:R.lengthComputable?R.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const R=new s.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0,this._headersReceivedCapability.reject(R);for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class A{constructor(R,S,P){this._manager=R;const x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._requestId=R.requestRange(S,P,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var R;(R=this.onClosed)==null||R.call(this,this)}_onDone(R){const S=R.chunk;this._requests.length>0?this._requests.shift().resolve({value:S,done:!1}):this._queuedChunk=S,this._done=!0;for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(R){this._storedError=(0,i.createResponseStatusError)(R,this._url);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(R){var S;this.isStreamingSupported||(S=this.onProgress)==null||S.call(this,{loaded:R.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const S=this._queuedChunk;return this._queuedChunk=null,{value:S,done:!1}}if(this._done)return{value:void 0,done:!0};const R=new s.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var s=n(1),i=n(20);const r=/^file:\/\/\/[a-zA-Z]:\//;function o(P){const x=require$$5,M=x.parse(P);return M.protocol==="file:"||M.host?M:/^[a-z]:[/\\]/i.test(P)?x.parse(`file:///${P}`):(M.host||(M.protocol="file:"),M)}class b{constructor(x){this.source=x,this.url=o(x.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new R(this):new A(this),this._fullRequestReader}getRangeReader(x,M){if(M<=this._progressiveDataLength)return null;const I=this.isFsUrl?new S(this,x,M):new T(this,x,M);return this._rangeRequestReaders.push(I),I}cancelAllRequests(x){var M;(M=this._fullRequestReader)==null||M.cancel(x);for(const I of this._rangeRequestReaders.slice(0))I.cancel(x)}}t.PDFNodeStream=b;class u{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;const M=x.source;this._contentLength=M.length,this._loaded=0,this._filename=null,this._disableRange=M.disableRange||!1,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!M.disableStream,this._isRangeSupported=!M.disableRange,this._readableStream=null,this._readCapability=new s.PromiseCapability,this._headersCapability=new s.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var I;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=x.length,(I=this.onProgress)==null||I.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",M=>{this._error(M)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class c{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new s.PromiseCapability;const M=x.source;this._isStreamingSupported=!M.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var I;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=x.length,(I=this.onProgress)==null||I.call(this,{loaded:this._loaded}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",M=>{this._error(M)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(P,x){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:x}}class A extends u{constructor(x){super(x);const M=I=>{if(I.statusCode===404){const C=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(I);const B=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:O,suggestedLength:v}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=O,this._contentLength=v||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(B)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(l(this._url,x.httpHeaders),M)}else{const I=require$$5;this._request=I.request(l(this._url,x.httpHeaders),M)}this._request.on("error",I=>{this._storedError=I,this._headersCapability.reject(I)}),this._request.end()}}class T extends c{constructor(x,M,I){super(x),this._httpHeaders={};for(const O in x.httpHeaders){const v=x.httpHeaders[O];v!==void 0&&(this._httpHeaders[O]=v)}this._httpHeaders.Range=`bytes=${M}-${I-1}`;const B=O=>{if(O.statusCode===404){const v=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=v;return}this._setReadableStream(O)};if(this._request=null,this._url.protocol==="http:"){const O=require$$5;this._request=O.request(l(this._url,this._httpHeaders),B)}else{const O=require$$5;this._request=O.request(l(this._url,this._httpHeaders),B)}this._request.on("error",O=>{this._storedError=O}),this._request.end()}}class R extends u{constructor(x){super(x);let M=decodeURIComponent(this._url.path);r.test(this._url.href)&&(M=M.replace(/^\//,""));const I=require$$5;I.lstat(M,(B,O)=>{if(B){B.code==="ENOENT"&&(B=new s.MissingPDFException(`Missing PDF "${M}".`)),this._storedError=B,this._headersCapability.reject(B);return}this._contentLength=O.size,this._setReadableStream(I.createReadStream(M)),this._headersCapability.resolve()})}}class S extends c{constructor(x,M,I){super(x);let B=decodeURIComponent(this._url.path);r.test(this._url.href)&&(B=B.replace(/^\//,""));const O=require$$5;this._setReadableStream(O.createReadStream(B,{start:M,end:I-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var s=n(6),i=n(1);const r={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/1999/xlink",u=["butt","round","square"],c=["miter","round","bevel"],l=function(O,v="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([O],{type:v}));const z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let N=`data:${v};base64,`;for(let E=0,j=O.length;E<j;E+=3){const L=O[E]&255,Z=O[E+1]&255,se=O[E+2]&255,V=L>>2,oe=(L&3)<<4|Z>>4,de=E+1<j?(Z&15)<<2|se>>6:64,he=E+2<j?se&63:64;N+=z[V]+z[oe]+z[de]+z[he]}return N},A=function(){const O=new Uint8Array([137,80,78,71,13,10,26,10]),v=12,C=new Int32Array(256);for(let se=0;se<256;se++){let V=se;for(let oe=0;oe<8;oe++)V=V&1?3988292384^V>>1&2147483647:V>>1&2147483647;C[se]=V}function z(se,V,oe){let de=-1;for(let he=V;he<oe;he++){const Y=(de^se[he])&255,Ae=C[Y];de=de>>>8^Ae}return de^-1}function N(se,V,oe,de){let he=de;const Y=V.length;oe[he]=Y>>24&255,oe[he+1]=Y>>16&255,oe[he+2]=Y>>8&255,oe[he+3]=Y&255,he+=4,oe[he]=se.charCodeAt(0)&255,oe[he+1]=se.charCodeAt(1)&255,oe[he+2]=se.charCodeAt(2)&255,oe[he+3]=se.charCodeAt(3)&255,he+=4,oe.set(V,he),he+=V.length;const Ae=z(oe,de+4,he);oe[he]=Ae>>24&255,oe[he+1]=Ae>>16&255,oe[he+2]=Ae>>8&255,oe[he+3]=Ae&255}function E(se,V,oe){let de=1,he=0;for(let Y=V;Y<oe;++Y)de=(de+(se[Y]&255))%65521,he=(he+de)%65521;return he<<16|de}function j(se){if(!i.isNodeJS)return L(se);try{const V=parseInt(process.versions.node)>=8?se:Buffer.from(se),oe=require$$5.deflateSync(V,{level:9});return oe instanceof Uint8Array?oe:new Uint8Array(oe)}catch(V){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+V)}return L(se)}function L(se){let V=se.length;const oe=65535,de=Math.ceil(V/oe),he=new Uint8Array(2+V+de*5+4);let Y=0;he[Y++]=120,he[Y++]=156;let Ae=0;for(;V>oe;)he[Y++]=0,he[Y++]=255,he[Y++]=255,he[Y++]=0,he[Y++]=0,he.set(se.subarray(Ae,Ae+oe),Y),Y+=oe,Ae+=oe,V-=oe;he[Y++]=1,he[Y++]=V&255,he[Y++]=V>>8&255,he[Y++]=~V&65535&255,he[Y++]=(~V&65535)>>8&255,he.set(se.subarray(Ae),Y),Y+=se.length-Ae;const Se=E(se,0,se.length);return he[Y++]=Se>>24&255,he[Y++]=Se>>16&255,he[Y++]=Se>>8&255,he[Y++]=Se&255,he}function Z(se,V,oe,de){const he=se.width,Y=se.height;let Ae,Se,ke;const Re=se.data;switch(V){case i.ImageKind.GRAYSCALE_1BPP:Se=0,Ae=1,ke=he+7>>3;break;case i.ImageKind.RGB_24BPP:Se=2,Ae=8,ke=he*3;break;case i.ImageKind.RGBA_32BPP:Se=6,Ae=8,ke=he*4;break;default:throw new Error("invalid format")}const H=new Uint8Array((1+ke)*Y);let m=0,_=0;for(let W=0;W<Y;++W)H[m++]=0,H.set(Re.subarray(_,_+ke),m),_+=ke,m+=ke;if(V===i.ImageKind.GRAYSCALE_1BPP&&de){m=0;for(let W=0;W<Y;W++){m++;for(let w=0;w<ke;w++)H[m++]^=255}}const g=new Uint8Array([he>>24&255,he>>16&255,he>>8&255,he&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,Ae,Se,0,0,0]),f=j(H),y=O.length+v*3+g.length+f.length,k=new Uint8Array(y);let $=0;return k.set(O,$),$+=O.length,N("IHDR",g,k,$),$+=v+g.length,N("IDATA",f,k,$),$+=v+f.length,N("IEND",new Uint8Array(0),k,$),l(k,"image/png",oe)}return function(V,oe,de){const he=V.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:V.kind;return Z(V,he,oe,de)}}();class T{constructor(){this.fontSizeScale=1,this.fontWeight=r.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=r.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(v,C){this.x=v,this.y=C}}function R(O){let v=[];const C=[];for(const z of O){if(z.fn==="save"){v.push({fnId:92,fn:"group",items:[]}),C.push(v),v=v.at(-1).items;continue}z.fn==="restore"?v=C.pop():v.push(z)}return v}function S(O){if(Number.isInteger(O))return O.toString();const v=O.toFixed(10);let C=v.length-1;if(v[C]!=="0")return v;do C--;while(v[C]==="0");return v.substring(0,v[C]==="."?C:C+1)}function P(O){if(O[4]===0&&O[5]===0){if(O[1]===0&&O[2]===0)return O[0]===1&&O[3]===1?"":`scale(${S(O[0])} ${S(O[3])})`;if(O[0]===O[3]&&O[1]===-O[2]){const v=Math.acos(O[0])*180/Math.PI;return`rotate(${S(v)})`}}else if(O[0]===1&&O[1]===0&&O[2]===0&&O[3]===1)return`translate(${S(O[4])} ${S(O[5])})`;return`matrix(${S(O[0])} ${S(O[1])} ${S(O[2])} ${S(O[3])} ${S(O[4])} ${S(O[5])})`}let x=0,M=0,I=0;class B{constructor(v,C,z=!1){(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new T,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=v,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!z,this._operatorIdMapping=[];for(const N in i.OPS)this._operatorIdMapping[i.OPS[N]]=N}getObject(v,C=null){return typeof v=="string"?v.startsWith("g_")?this.commonObjs.get(v):this.objs.get(v):C}save(){this.transformStack.push(this.transformMatrix);const v=this.current;this.extraStack.push(v),this.current=v.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(v){this.save(),this.executeOpTree(v),this.restore()}loadDependencies(v){const C=v.fnArray,z=v.argsArray;for(let N=0,E=C.length;N<E;N++)if(C[N]===i.OPS.dependency)for(const j of z[N]){const L=j.startsWith("g_")?this.commonObjs:this.objs,Z=new Promise(se=>{L.get(j,se)});this.current.dependencies.push(Z)}return Promise.all(this.current.dependencies)}transform(v,C,z,N,E,j){const L=[v,C,z,N,E,j];this.transformMatrix=i.Util.transform(this.transformMatrix,L),this.tgrp=null}getSVG(v,C){this.viewport=C;const z=this._initialize(C);return this.loadDependencies(v).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(v)),z))}convertOpList(v){const C=this._operatorIdMapping,z=v.argsArray,N=v.fnArray,E=[];for(let j=0,L=N.length;j<L;j++){const Z=N[j];E.push({fnId:Z,fn:C[Z],args:z[j]})}return R(E)}executeOpTree(v){for(const C of v){const z=C.fn,N=C.fnId,E=C.args;switch(N|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(E);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(E[0],E[1]);break;case i.OPS.setFont:this.setFont(E);break;case i.OPS.showText:this.showText(E[0]);break;case i.OPS.showSpacedText:this.showText(E[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(E[0],E[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(E[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(E[0]);break;case i.OPS.setHScale:this.setHScale(E[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(E[0],E[1],E[2],E[3],E[4],E[5]);break;case i.OPS.setTextRise:this.setTextRise(E[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(E[0]);break;case i.OPS.setLineWidth:this.setLineWidth(E[0]);break;case i.OPS.setLineJoin:this.setLineJoin(E[0]);break;case i.OPS.setLineCap:this.setLineCap(E[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(E[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(E[0],E[1],E[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(E[0],E[1],E[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(E);break;case i.OPS.setFillColorN:this.setFillColorN(E);break;case i.OPS.shadingFill:this.shadingFill(E[0]);break;case i.OPS.setDash:this.setDash(E[0],E[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(E[0]);break;case i.OPS.setFlatness:this.setFlatness(E[0]);break;case i.OPS.setGState:this.setGState(E[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(E[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(E[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(E[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(E[0],E[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(E[0],E[1],E[2],E[3],E[4],E[5]);break;case i.OPS.constructPath:this.constructPath(E[0],E[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,i.warn)(`Unimplemented operator ${z}`);break}}}setWordSpacing(v){this.current.wordSpacing=v}setCharSpacing(v){this.current.charSpacing=v}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(v,C,z,N,E,j){const L=this.current;L.textMatrix=L.lineMatrix=[v,C,z,N,E,j],L.textMatrixScale=Math.hypot(v,C),L.x=L.lineX=0,L.y=L.lineY=0,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${S(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",S(-L.y)),L.txtElement=this.svgFactory.createElement("svg:text"),L.txtElement.append(L.tspan)}beginText(){const v=this.current;v.x=v.lineX=0,v.y=v.lineY=0,v.textMatrix=i.IDENTITY_MATRIX,v.lineMatrix=i.IDENTITY_MATRIX,v.textMatrixScale=1,v.tspan=this.svgFactory.createElement("svg:tspan"),v.txtElement=this.svgFactory.createElement("svg:text"),v.txtgrp=this.svgFactory.createElement("svg:g"),v.xcoords=[],v.ycoords=[]}moveText(v,C){const z=this.current;z.x=z.lineX+=v,z.y=z.lineY+=C,z.xcoords=[],z.ycoords=[],z.tspan=this.svgFactory.createElement("svg:tspan"),z.tspan.setAttributeNS(null,"font-family",z.fontFamily),z.tspan.setAttributeNS(null,"font-size",`${S(z.fontSize)}px`),z.tspan.setAttributeNS(null,"y",S(-z.y))}showText(v){const C=this.current,z=C.font,N=C.fontSize;if(N===0)return;const E=C.fontSizeScale,j=C.charSpacing,L=C.wordSpacing,Z=C.fontDirection,se=C.textHScale*Z,V=z.vertical,oe=V?1:-1,de=z.defaultVMetrics,he=N*C.fontMatrix[0];let Y=0;for(const ke of v){if(ke===null){Y+=Z*L;continue}else if(typeof ke=="number"){Y+=oe*ke*N/1e3;continue}const Re=(ke.isSpace?L:0)+j,H=ke.fontChar;let m,_,g=ke.width;if(V){let y;const k=ke.vmetric||de;y=ke.vmetric?k[1]:g*.5,y=-y*he;const $=k[2]*he;g=k?-k[0]:g,m=y/E,_=(Y+$)/E}else m=Y/E,_=0;(ke.isInFont||z.missingFile)&&(C.xcoords.push(C.x+m),V&&C.ycoords.push(-C.y+_),C.tspan.textContent+=H);const f=V?g*he-Re*Z:g*he+Re*Z;Y+=f}C.tspan.setAttributeNS(null,"x",C.xcoords.map(S).join(" ")),V?C.tspan.setAttributeNS(null,"y",C.ycoords.map(S).join(" ")):C.tspan.setAttributeNS(null,"y",S(-C.y)),V?C.y-=Y:C.x+=Y*se,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${S(C.fontSize)}px`),C.fontStyle!==r.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==r.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);const Ae=C.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(Ae===i.TextRenderingMode.FILL||Ae===i.TextRenderingMode.FILL_STROKE?(C.fillColor!==r.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),Ae===i.TextRenderingMode.STROKE||Ae===i.TextRenderingMode.FILL_STROKE){const ke=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,ke)}let Se=C.textMatrix;C.textRise!==0&&(Se=Se.slice(),Se[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${P(Se)} scale(${S(se)}, -1)`),C.txtElement.setAttributeNS(o,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(v,C){this.setLeading(-C),this.moveText(v,C)}addFontStyle(v){if(!v.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const C=l(v.data,v.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${v.loadedName}"; src: url(${C}); }
`}setFont(v){const C=this.current,z=this.commonObjs.get(v[0]);let N=v[1];C.font=z,this.embedFonts&&!z.missingFile&&!this.embeddedFonts[z.loadedName]&&(this.addFontStyle(z),this.embeddedFonts[z.loadedName]=z),C.fontMatrix=z.fontMatrix||i.FONT_IDENTITY_MATRIX;let E="normal";z.black?E="900":z.bold&&(E="bold");const j=z.italic?"italic":"normal";N<0?(N=-N,C.fontDirection=-1):C.fontDirection=1,C.fontSize=N,C.fontFamily=z.loadedName,C.fontWeight=E,C.fontStyle=j,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",S(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){var C;const v=this.current;v.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((C=v.txtElement)!=null&&C.hasChildNodes())&&(v.element=v.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(v){v>0&&(this.current.lineWidth=v)}setLineCap(v){this.current.lineCap=u[v]}setLineJoin(v){this.current.lineJoin=c[v]}setMiterLimit(v){this.current.miterLimit=v}setStrokeAlpha(v){this.current.strokeAlpha=v}setStrokeRGBColor(v,C,z){this.current.strokeColor=i.Util.makeHexColor(v,C,z)}setFillAlpha(v){this.current.fillAlpha=v}setFillRGBColor(v,C,z){this.current.fillColor=i.Util.makeHexColor(v,C,z),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(v){this.current.strokeColor=this._makeColorN_Pattern(v)}setFillColorN(v){this.current.fillColor=this._makeColorN_Pattern(v)}shadingFill(v){const{width:C,height:z}=this.viewport,N=i.Util.inverseTransform(this.transformMatrix),[E,j,L,Z]=i.Util.getAxialAlignedBoundingBox([0,0,C,z],N),se=this.svgFactory.createElement("svg:rect");se.setAttributeNS(null,"x",E),se.setAttributeNS(null,"y",j),se.setAttributeNS(null,"width",L-E),se.setAttributeNS(null,"height",Z-j),se.setAttributeNS(null,"fill",this._makeShadingPattern(v)),this.current.fillAlpha<1&&se.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(se)}_makeColorN_Pattern(v){return v[0]==="TilingPattern"?this._makeTilingPattern(v):this._makeShadingPattern(v)}_makeTilingPattern(v){const C=v[1],z=v[2],N=v[3]||i.IDENTITY_MATRIX,[E,j,L,Z]=v[4],se=v[5],V=v[6],oe=v[7],de=`shading${I++}`,[he,Y,Ae,Se]=i.Util.normalizeRect([...i.Util.applyTransform([E,j],N),...i.Util.applyTransform([L,Z],N)]),[ke,Re]=i.Util.singularValueDecompose2dScale(N),H=se*ke,m=V*Re,_=this.svgFactory.createElement("svg:pattern");_.setAttributeNS(null,"id",de),_.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_.setAttributeNS(null,"width",H),_.setAttributeNS(null,"height",m),_.setAttributeNS(null,"x",`${he}`),_.setAttributeNS(null,"y",`${Y}`);const g=this.svg,f=this.transformMatrix,y=this.current.fillColor,k=this.current.strokeColor,$=this.svgFactory.create(Ae-he,Se-Y);if(this.svg=$,this.transformMatrix=N,oe===2){const W=i.Util.makeHexColor(...C);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList(z)),this.svg=g,this.transformMatrix=f,this.current.fillColor=y,this.current.strokeColor=k,_.append($.childNodes[0]),this.defs.append(_),`url(#${de})`}_makeShadingPattern(v){switch(typeof v=="string"&&(v=this.objs.get(v)),v[0]){case"RadialAxial":const C=`shading${I++}`,z=v[3];let N;switch(v[1]){case"axial":const E=v[4],j=v[5];N=this.svgFactory.createElement("svg:linearGradient"),N.setAttributeNS(null,"id",C),N.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),N.setAttributeNS(null,"x1",E[0]),N.setAttributeNS(null,"y1",E[1]),N.setAttributeNS(null,"x2",j[0]),N.setAttributeNS(null,"y2",j[1]);break;case"radial":const L=v[4],Z=v[5],se=v[6],V=v[7];N=this.svgFactory.createElement("svg:radialGradient"),N.setAttributeNS(null,"id",C),N.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),N.setAttributeNS(null,"cx",Z[0]),N.setAttributeNS(null,"cy",Z[1]),N.setAttributeNS(null,"r",V),N.setAttributeNS(null,"fx",L[0]),N.setAttributeNS(null,"fy",L[1]),N.setAttributeNS(null,"fr",se);break;default:throw new Error(`Unknown RadialAxial type: ${v[1]}`)}for(const E of z){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",E[0]),j.setAttributeNS(null,"stop-color",E[1]),N.append(j)}return this.defs.append(N),`url(#${C})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${v[0]}`)}}setDash(v,C){this.current.dashArray=v,this.current.dashPhase=C}constructPath(v,C){const z=this.current;let N=z.x,E=z.y,j=[],L=0;for(const Z of v)switch(Z|0){case i.OPS.rectangle:N=C[L++],E=C[L++];const se=C[L++],V=C[L++],oe=N+se,de=E+V;j.push("M",S(N),S(E),"L",S(oe),S(E),"L",S(oe),S(de),"L",S(N),S(de),"Z");break;case i.OPS.moveTo:N=C[L++],E=C[L++],j.push("M",S(N),S(E));break;case i.OPS.lineTo:N=C[L++],E=C[L++],j.push("L",S(N),S(E));break;case i.OPS.curveTo:N=C[L+4],E=C[L+5],j.push("C",S(C[L]),S(C[L+1]),S(C[L+2]),S(C[L+3]),S(N),S(E)),L+=6;break;case i.OPS.curveTo2:j.push("C",S(N),S(E),S(C[L]),S(C[L+1]),S(C[L+2]),S(C[L+3])),N=C[L+2],E=C[L+3],L+=4;break;case i.OPS.curveTo3:N=C[L+2],E=C[L+3],j.push("C",S(C[L]),S(C[L+1]),S(N),S(E),S(N),S(E)),L+=4;break;case i.OPS.closePath:j.push("Z");break}j=j.join(" "),z.path&&v.length>0&&v[0]!==i.OPS.rectangle&&v[0]!==i.OPS.moveTo?j=z.path.getAttributeNS(null,"d")+j:(z.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(z.path)),z.path.setAttributeNS(null,"d",j),z.path.setAttributeNS(null,"fill","none"),z.element=z.path,z.setCurrentPoint(N,E)}endPath(){const v=this.current;if(v.path=null,!this.pendingClip)return;if(!v.element){this.pendingClip=null;return}const C=`clippath${x++}`,z=this.svgFactory.createElement("svg:clipPath");z.setAttributeNS(null,"id",C),z.setAttributeNS(null,"transform",P(this.transformMatrix));const N=v.element.cloneNode(!0);if(this.pendingClip==="evenodd"?N.setAttributeNS(null,"clip-rule","evenodd"):N.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,z.append(N),this.defs.append(z),v.activeClipUrl){v.clipGroup=null;for(const E of this.extraStack)E.clipGroup=null;z.setAttributeNS(null,"clip-path",v.activeClipUrl)}v.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(v){this.pendingClip=v}closePath(){const v=this.current;if(v.path){const C=`${v.path.getAttributeNS(null,"d")}Z`;v.path.setAttributeNS(null,"d",C)}}setLeading(v){this.current.leading=-v}setTextRise(v){this.current.textRise=v}setTextRenderingMode(v){this.current.textRenderingMode=v}setHScale(v){this.current.textHScale=v/100}setRenderingIntent(v){}setFlatness(v){}setGState(v){for(const[C,z]of v)switch(C){case"LW":this.setLineWidth(z);break;case"LC":this.setLineCap(z);break;case"LJ":this.setLineJoin(z);break;case"ML":this.setMiterLimit(z);break;case"D":this.setDash(z[0],z[1]);break;case"RI":this.setRenderingIntent(z);break;case"FL":this.setFlatness(z);break;case"Font":this.setFont(z);break;case"CA":this.setStrokeAlpha(z);break;case"ca":this.setFillAlpha(z);break;default:(0,i.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){const v=this.current;v.element&&(v.element.setAttributeNS(null,"fill",v.fillColor),v.element.setAttributeNS(null,"fill-opacity",v.fillAlpha),this.endPath())}stroke(){const v=this.current;v.element&&(this._setStrokeAttributes(v.element),v.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(v,C=1){const z=this.current;let N=z.dashArray;C!==1&&N.length>0&&(N=N.map(function(E){return C*E})),v.setAttributeNS(null,"stroke",z.strokeColor),v.setAttributeNS(null,"stroke-opacity",z.strokeAlpha),v.setAttributeNS(null,"stroke-miterlimit",S(z.miterLimit)),v.setAttributeNS(null,"stroke-linecap",z.lineCap),v.setAttributeNS(null,"stroke-linejoin",z.lineJoin),v.setAttributeNS(null,"stroke-width",S(C*z.lineWidth)+"px"),v.setAttributeNS(null,"stroke-dasharray",N.map(S).join(" ")),v.setAttributeNS(null,"stroke-dashoffset",S(C*z.dashPhase)+"px")}eoFill(){var v;(v=this.current.element)==null||v.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var v;(v=this.current.element)==null||v.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x","0"),v.setAttributeNS(null,"y","0"),v.setAttributeNS(null,"width","1px"),v.setAttributeNS(null,"height","1px"),v.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(v)}paintImageXObject(v){const C=this.getObject(v);if(!C){(0,i.warn)(`Dependent image with object ID ${v} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(v,C){const z=v.width,N=v.height,E=A(v,this.forceDataSchema,!!C),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",S(z)),j.setAttributeNS(null,"height",S(N)),this.current.element=j,this.clip("nonzero");const L=this.svgFactory.createElement("svg:image");L.setAttributeNS(b,"xlink:href",E),L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y",S(-N)),L.setAttributeNS(null,"width",S(z)+"px"),L.setAttributeNS(null,"height",S(N)+"px"),L.setAttributeNS(null,"transform",`scale(${S(1/z)} ${S(-1/N)})`),C?C.append(L):this._ensureTransformGroup().append(L)}paintImageMaskXObject(v){const C=this.getObject(v.data,v);if(C.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const z=this.current,N=C.width,E=C.height,j=z.fillColor;z.maskId=`mask${M++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",z.maskId);const Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y","0"),Z.setAttributeNS(null,"width",S(N)),Z.setAttributeNS(null,"height",S(E)),Z.setAttributeNS(null,"fill",j),Z.setAttributeNS(null,"mask",`url(#${z.maskId})`),this.defs.append(L),this._ensureTransformGroup().append(Z),this.paintInlineImageXObject(C,L)}paintFormXObjectBegin(v,C){if(Array.isArray(v)&&v.length===6&&this.transform(v[0],v[1],v[2],v[3],v[4],v[5]),C){const z=C[2]-C[0],N=C[3]-C[1],E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x",C[0]),E.setAttributeNS(null,"y",C[1]),E.setAttributeNS(null,"width",S(z)),E.setAttributeNS(null,"height",S(N)),this.current.element=E,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(v){const C=this.svgFactory.create(v.width,v.height),z=this.svgFactory.createElement("svg:defs");C.append(z),this.defs=z;const N=this.svgFactory.createElement("svg:g");return N.setAttributeNS(null,"transform",P(v.transform)),C.append(N),this.svg=N,C}_ensureClipGroup(){if(!this.current.clipGroup){const v=this.svgFactory.createElement("svg:g");v.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(v),this.current.clipGroup=v}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",P(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=B},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(i){const r=[],o={items:r,styles:Object.create(null)};function b(u){var A;if(!u)return;let c=null;const l=u.name;if(l==="#text")c=u.value;else if(n.shouldBuildText(l))(A=u==null?void 0:u.attributes)!=null&&A.textContent?c=u.attributes.textContent:u.value&&(c=u.value);else return;if(c!==null&&r.push({str:c}),!!u.children)for(const T of u.children)b(T)}return b(i),o}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=P,t.updateTextLayer=x;var s=n(1),i=n(6);const r=1e5,o=30,b=.8,u=new Map;function c(M,I){let B;if(I&&s.FeatureTest.isOffscreenCanvasSupported)B=new OffscreenCanvas(M,M).getContext("2d",{alpha:!1});else{const O=document.createElement("canvas");O.width=O.height=M,B=O.getContext("2d",{alpha:!1})}return B}function l(M,I){const B=u.get(M);if(B)return B;const O=c(o,I);O.font=`${o}px ${M}`;const v=O.measureText("");let C=v.fontBoundingBoxAscent,z=Math.abs(v.fontBoundingBoxDescent);if(C){const E=C/(C+z);return u.set(M,E),O.canvas.width=O.canvas.height=0,E}O.strokeStyle="red",O.clearRect(0,0,o,o),O.strokeText("g",0,0);let N=O.getImageData(0,0,o,o).data;z=0;for(let E=N.length-1-3;E>=0;E-=4)if(N[E]>0){z=Math.ceil(E/4/o);break}O.clearRect(0,0,o,o),O.strokeText("A",0,o),N=O.getImageData(0,0,o,o).data,C=0;for(let E=0,j=N.length;E<j;E+=4)if(N[E]>0){C=o-Math.floor(E/4/o);break}if(O.canvas.width=O.canvas.height=0,C){const E=C/(C+z);return u.set(M,E),E}return u.set(M,b),b}function A(M,I,B){const O=document.createElement("span"),v={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};M._textDivs.push(O);const C=s.Util.transform(M._transform,I.transform);let z=Math.atan2(C[1],C[0]);const N=B[I.fontName];N.vertical&&(z+=Math.PI/2);const E=Math.hypot(C[2],C[3]),j=E*l(N.fontFamily,M._isOffscreenCanvasSupported);let L,Z;z===0?(L=C[4],Z=C[5]-j):(L=C[4]+j*Math.sin(z),Z=C[5]-j*Math.cos(z));const se="calc(var(--scale-factor)*",V=O.style;M._container===M._rootContainer?(V.left=`${(100*L/M._pageWidth).toFixed(2)}%`,V.top=`${(100*Z/M._pageHeight).toFixed(2)}%`):(V.left=`${se}${L.toFixed(2)}px)`,V.top=`${se}${Z.toFixed(2)}px)`),V.fontSize=`${se}${E.toFixed(2)}px)`,V.fontFamily=N.fontFamily,v.fontSize=E,O.setAttribute("role","presentation"),O.textContent=I.str,O.dir=I.dir,M._fontInspectorEnabled&&(O.dataset.fontName=I.fontName),z!==0&&(v.angle=z*(180/Math.PI));let oe=!1;if(I.str.length>1)oe=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const de=Math.abs(I.transform[0]),he=Math.abs(I.transform[3]);de!==he&&Math.max(de,he)/Math.min(de,he)>1.5&&(oe=!0)}oe&&(v.canvasWidth=N.vertical?I.height:I.width),M._textDivProperties.set(O,v),M._isReadableStream&&M._layoutText(O)}function T(M){const{div:I,scale:B,properties:O,ctx:v,prevFontSize:C,prevFontFamily:z}=M,{style:N}=I;let E="";if(O.canvasWidth!==0&&O.hasText){const{fontFamily:j}=N,{canvasWidth:L,fontSize:Z}=O;(C!==Z||z!==j)&&(v.font=`${Z*B}px ${j}`,M.prevFontSize=Z,M.prevFontFamily=j);const{width:se}=v.measureText(I.textContent);se>0&&(E=`scaleX(${L*B/se})`)}O.angle!==0&&(E=`rotate(${O.angle}deg) ${E}`),E.length>0&&(N.transform=E)}function R(M){if(M._canceled)return;const I=M._textDivs,B=M._capability;if(I.length>r){B.resolve();return}if(!M._isReadableStream)for(const v of I)M._layoutText(v);B.resolve()}class S{constructor({textContentSource:I,container:B,viewport:O,textDivs:v,textDivProperties:C,textContentItemsStr:z,isOffscreenCanvasSupported:N}){var se;this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=B,this._textDivs=v||[],this._textContentItemsStr=z||[],this._isOffscreenCanvasSupported=N,this._fontInspectorEnabled=!!((se=globalThis.FontInspector)!=null&&se.enabled),this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:O.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:c(0,N)};const{pageWidth:E,pageHeight:j,pageX:L,pageY:Z}=O.rawDims;this._transform=[1,0,0,-1,-L,Z+j],this._pageWidth=E,this._pageHeight=j,(0,i.setLayerDimensions)(B,O),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(I,B){for(const O of I){if(O.str===void 0){if(O.type==="beginMarkedContentProps"||O.type==="beginMarkedContent"){const v=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),O.id!==null&&this._container.setAttribute("id",`${O.id}`),v.append(this._container)}else O.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(O.str),A(this,O,B)}}_layoutText(I){const B=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,T(this._layoutTextParams),B.hasText&&this._container.append(I),B.hasEOL){const O=document.createElement("br");O.setAttribute("role","presentation"),this._container.append(O)}}_render(){const I=new s.PromiseCapability;let B=Object.create(null);if(this._isReadableStream){const O=()=>{this._reader.read().then(({value:v,done:C})=>{if(C){I.resolve();return}Object.assign(B,v.styles),this._processItems(v.items,B),O()},I.reject)};this._reader=this._textContentSource.getReader(),O()}else if(this._textContentSource){const{items:O,styles:v}=this._textContentSource;this._processItems(O,v),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{B=null,R(this)},this._capability.reject)}}t.TextLayerRenderTask=S;function P(M){!M.textContentSource&&(M.textContent||M.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),M.textContentSource=M.textContent||M.textContentStream);const{container:I,viewport:B}=M,O=getComputedStyle(I),v=O.getPropertyValue("visibility"),C=parseFloat(O.getPropertyValue("--scale-factor"));v==="visible"&&(!C||Math.abs(C-B.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const z=new S(M);return z._render(),z}function x({container:M,viewport:I,textDivs:B,textDivProperties:O,isOffscreenCanvasSupported:v,mustRotate:C=!0,mustRescale:z=!0}){if(C&&(0,i.setLayerDimensions)(M,{rotation:I.rotation}),z){const N=c(0,v),j={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:N};for(const L of B)j.properties=O.get(L),j.div=L,T(j)}}},(e,t,n)=>{var l,A,T,R,S,P,x,M,I,B,O,ns,C,Ft,N,is,j,rs;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var s=n(1),i=n(4),r=n(28),o=n(33),b=n(6),u=n(34);const Z=class Z{constructor({uiManager:V,pageIndex:oe,div:de,accessibilityManager:he,annotationLayer:Y,viewport:Ae,l10n:Se}){X(this,O);X(this,C);X(this,N);X(this,j);X(this,l,void 0);X(this,A,!1);X(this,T,null);X(this,R,this.pointerup.bind(this));X(this,S,this.pointerdown.bind(this));X(this,P,new Map);X(this,x,!1);X(this,M,!1);X(this,I,!1);X(this,B,void 0);const ke=[r.FreeTextEditor,o.InkEditor,u.StampEditor];if(!Z._initialized){Z._initialized=!0;for(const Re of ke)Re.initialize(Se)}V.registerEditorTypes(ke),ge(this,B,V),this.pageIndex=oe,this.div=de,ge(this,l,he),ge(this,T,Y),this.viewport=Ae,a(this,B).addLayer(this)}get isEmpty(){return a(this,P).size===0}updateToolbar(V){a(this,B).updateToolbar(V)}updateMode(V=a(this,B).getMode()){re(this,j,rs).call(this),V===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),V!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",V===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",V===s.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",V===s.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(V){if(!V&&a(this,B).getMode()!==s.AnnotationEditorType.INK)return;if(!V){for(const de of a(this,P).values())if(de.isEmpty()){de.setInBackground();return}}re(this,C,Ft).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(V){a(this,B).setEditingState(V)}addCommands(V){a(this,B).addCommands(V)}enable(){this.div.style.pointerEvents="auto";const V=new Set;for(const de of a(this,P).values())de.enableEditing(),de.annotationElementId&&V.add(de.annotationElementId);if(!a(this,T))return;const oe=a(this,T).getEditableAnnotations();for(const de of oe){if(de.hide(),a(this,B).isDeletedAnnotationElement(de.data.id)||V.has(de.data.id))continue;const he=this.deserialize(de);he&&(this.addOrRebuild(he),he.enableEditing())}}disable(){var oe;ge(this,I,!0),this.div.style.pointerEvents="none";const V=new Set;for(const de of a(this,P).values()){if(de.disableEditing(),!de.annotationElementId||de.serialize()!==null){V.add(de.annotationElementId);continue}(oe=this.getEditableAnnotation(de.annotationElementId))==null||oe.show(),de.remove()}if(a(this,T)){const de=a(this,T).getEditableAnnotations();for(const he of de){const{id:Y}=he.data;V.has(Y)||a(this,B).isDeletedAnnotationElement(Y)||he.show()}}re(this,j,rs).call(this),this.isEmpty&&(this.div.hidden=!0),ge(this,I,!1)}getEditableAnnotation(V){var oe;return((oe=a(this,T))==null?void 0:oe.getEditableAnnotation(V))||null}setActiveEditor(V){a(this,B).getActive()!==V&&a(this,B).setActiveEditor(V)}enableClick(){this.div.addEventListener("pointerdown",a(this,S)),this.div.addEventListener("pointerup",a(this,R))}disableClick(){this.div.removeEventListener("pointerdown",a(this,S)),this.div.removeEventListener("pointerup",a(this,R))}attach(V){a(this,P).set(V.id,V);const{annotationElementId:oe}=V;oe&&a(this,B).isDeletedAnnotationElement(oe)&&a(this,B).removeDeletedAnnotationElement(V)}detach(V){var oe;a(this,P).delete(V.id),(oe=a(this,l))==null||oe.removePointerInTextLayer(V.contentDiv),!a(this,I)&&V.annotationElementId&&a(this,B).addDeletedAnnotationElement(V)}remove(V){this.detach(V),a(this,B).removeEditor(V),V.div.contains(document.activeElement)&&setTimeout(()=>{a(this,B).focusMainContainer()},0),V.div.remove(),V.isAttachedToDOM=!1,a(this,M)||this.addInkEditorIfNeeded(!1)}changeParent(V){var oe;V.parent!==this&&(V.annotationElementId&&(a(this,B).addDeletedAnnotationElement(V.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(V),V.annotationElementId=null),this.attach(V),(oe=V.parent)==null||oe.detach(V),V.setParent(this),V.div&&V.isAttachedToDOM&&(V.div.remove(),this.div.append(V.div)))}add(V){if(this.changeParent(V),a(this,B).addEditor(V),this.attach(V),!V.isAttachedToDOM){const oe=V.render();this.div.append(oe),V.isAttachedToDOM=!0}V.fixAndSetPosition(),V.onceAdded(),a(this,B).addToAnnotationStorage(V)}moveEditorInDOM(V){var de;if(!V.isAttachedToDOM)return;const{activeElement:oe}=document;V.div.contains(oe)&&(V._focusEventsAllowed=!1,setTimeout(()=>{V.div.contains(document.activeElement)?V._focusEventsAllowed=!0:(V.div.addEventListener("focusin",()=>{V._focusEventsAllowed=!0},{once:!0}),oe.focus())},0)),V._structTreeParentId=(de=a(this,l))==null?void 0:de.moveElementInDOM(this.div,V.div,V.contentDiv,!0)}addOrRebuild(V){V.needsToBeRebuilt()?V.rebuild():this.add(V)}addUndoableEditor(V){const oe=()=>V._uiManager.rebuild(V),de=()=>{V.remove()};this.addCommands({cmd:oe,undo:de,mustExec:!1})}getNextId(){return a(this,B).getId()}pasteEditor(V,oe){a(this,B).updateToolbar(V),a(this,B).updateMode(V);const{offsetX:de,offsetY:he}=re(this,N,is).call(this),Y=this.getNextId(),Ae=re(this,O,ns).call(this,{parent:this,id:Y,x:de,y:he,uiManager:a(this,B),isCentered:!0,...oe});Ae&&this.add(Ae)}deserialize(V){switch(V.annotationType??V.annotationEditorType){case s.AnnotationEditorType.FREETEXT:return r.FreeTextEditor.deserialize(V,this,a(this,B));case s.AnnotationEditorType.INK:return o.InkEditor.deserialize(V,this,a(this,B));case s.AnnotationEditorType.STAMP:return u.StampEditor.deserialize(V,this,a(this,B))}return null}addNewEditor(){re(this,C,Ft).call(this,re(this,N,is).call(this),!0)}setSelected(V){a(this,B).setSelected(V)}toggleSelected(V){a(this,B).toggleSelected(V)}isSelected(V){return a(this,B).isSelected(V)}unselect(V){a(this,B).unselect(V)}pointerup(V){const{isMac:oe}=s.FeatureTest.platform;if(!(V.button!==0||V.ctrlKey&&oe)&&V.target===this.div&&a(this,x)){if(ge(this,x,!1),!a(this,A)){ge(this,A,!0);return}if(a(this,B).getMode()===s.AnnotationEditorType.STAMP){a(this,B).unselectAll();return}re(this,C,Ft).call(this,V,!1)}}pointerdown(V){if(a(this,x)){ge(this,x,!1);return}const{isMac:oe}=s.FeatureTest.platform;if(V.button!==0||V.ctrlKey&&oe||V.target!==this.div)return;ge(this,x,!0);const de=a(this,B).getActive();ge(this,A,!de||de.isEmpty())}findNewParent(V,oe,de){const he=a(this,B).findParent(oe,de);return he===null||he===this?!1:(he.changeParent(V),!0)}destroy(){var V,oe;((V=a(this,B).getActive())==null?void 0:V.parent)===this&&(a(this,B).commitOrRemove(),a(this,B).setActiveEditor(null));for(const de of a(this,P).values())(oe=a(this,l))==null||oe.removePointerInTextLayer(de.contentDiv),de.setParent(null),de.isAttachedToDOM=!1,de.div.remove();this.div=null,a(this,P).clear(),a(this,B).removeLayer(this)}render({viewport:V}){this.viewport=V,(0,b.setLayerDimensions)(this.div,V);for(const oe of a(this,B).getEditors(this.pageIndex))this.add(oe);this.updateMode()}update({viewport:V}){a(this,B).commitOrRemove(),this.viewport=V,(0,b.setLayerDimensions)(this.div,{rotation:V.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:V,pageHeight:oe}=this.viewport.rawDims;return[V,oe]}};l=new WeakMap,A=new WeakMap,T=new WeakMap,R=new WeakMap,S=new WeakMap,P=new WeakMap,x=new WeakMap,M=new WeakMap,I=new WeakMap,B=new WeakMap,O=new WeakSet,ns=function(V){switch(a(this,B).getMode()){case s.AnnotationEditorType.FREETEXT:return new r.FreeTextEditor(V);case s.AnnotationEditorType.INK:return new o.InkEditor(V);case s.AnnotationEditorType.STAMP:return new u.StampEditor(V)}return null},C=new WeakSet,Ft=function(V,oe){const de=this.getNextId(),he=re(this,O,ns).call(this,{parent:this,id:de,x:V.offsetX,y:V.offsetY,uiManager:a(this,B),isCentered:oe});return he&&this.add(he),he},N=new WeakSet,is=function(){const{x:V,y:oe,width:de,height:he}=this.div.getBoundingClientRect(),Y=Math.max(0,V),Ae=Math.max(0,oe),Se=Math.min(window.innerWidth,V+de),ke=Math.min(window.innerHeight,oe+he),Re=(Y+Se)/2-V,H=(Ae+ke)/2-oe,[m,_]=this.viewport.rotation%180===0?[Re,H]:[H,Re];return{offsetX:m,offsetY:_}},j=new WeakSet,rs=function(){ge(this,M,!0);for(const V of a(this,P).values())V.isEmpty()&&V.remove();ge(this,M,!1)},nt(Z,"_initialized",!1);let c=Z;t.AnnotationEditorLayer=c},(e,t,n)=>{var u,c,l,A,T,R,S,P,x,M,Ms,B,Os,v,Is,z,Et,E,os,L,Ns,se,as;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var s=n(1),i=n(5),r=n(4),o=n(29);const oe=class oe extends r.AnnotationEditor{constructor(Y){super({...Y,name:"freeTextEditor"});X(this,M);X(this,B);X(this,v);X(this,z);X(this,E);X(this,L);X(this,se);X(this,u,this.editorDivBlur.bind(this));X(this,c,this.editorDivFocus.bind(this));X(this,l,this.editorDivInput.bind(this));X(this,A,this.editorDivKeydown.bind(this));X(this,T,void 0);X(this,R,"");X(this,S,`${this.id}-editor`);X(this,P,void 0);X(this,x,null);ge(this,T,Y.color||oe._defaultColor||r.AnnotationEditor._defaultLineColor),ge(this,P,Y.fontSize||oe._defaultFontSize)}static get _keyboardManager(){const Y=oe.prototype,Ae=Re=>Re.isEmpty(),Se=i.AnnotationEditorUIManager.TRANSLATE_SMALL,ke=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Y.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Y.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Y._translateEmpty,{args:[-Se,0],checker:Ae}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Y._translateEmpty,{args:[-ke,0],checker:Ae}],[["ArrowRight","mac+ArrowRight"],Y._translateEmpty,{args:[Se,0],checker:Ae}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Y._translateEmpty,{args:[ke,0],checker:Ae}],[["ArrowUp","mac+ArrowUp"],Y._translateEmpty,{args:[0,-Se],checker:Ae}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Y._translateEmpty,{args:[0,-ke],checker:Ae}],[["ArrowDown","mac+ArrowDown"],Y._translateEmpty,{args:[0,Se],checker:Ae}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Y._translateEmpty,{args:[0,ke],checker:Ae}]]))}static initialize(Y){r.AnnotationEditor.initialize(Y,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Ae=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Ae.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Y,Ae){switch(Y){case s.AnnotationEditorParamsType.FREETEXT_SIZE:oe._defaultFontSize=Ae;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:oe._defaultColor=Ae;break}}updateParams(Y,Ae){switch(Y){case s.AnnotationEditorParamsType.FREETEXT_SIZE:re(this,M,Ms).call(this,Ae);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:re(this,B,Os).call(this,Ae);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,oe._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,oe._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,a(this,P)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,a(this,T)]]}_translateEmpty(Y,Ae){this._uiManager.translateSelectedEditors(Y,Ae,!0)}getInitialTranslation(){const Y=this.parentScale;return[-oe._internalPadding*Y,-(oe._internalPadding+a(this,P))*Y]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,A)),this.editorDiv.addEventListener("focus",a(this,c)),this.editorDiv.addEventListener("blur",a(this,u)),this.editorDiv.addEventListener("input",a(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,S)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,A)),this.editorDiv.removeEventListener("focus",a(this,c)),this.editorDiv.removeEventListener("blur",a(this,u)),this.editorDiv.removeEventListener("input",a(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Y){this._focusEventsAllowed&&(super.focusin(Y),Y.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Y;if(this.width){re(this,se,as).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Y=this._initialOptions)!=null&&Y.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Y=a(this,R),Ae=ge(this,R,re(this,v,Is).call(this).trimEnd());if(Y===Ae)return;const Se=ke=>{if(ge(this,R,ke),!ke){this.remove();return}re(this,E,os).call(this),this._uiManager.rebuild(this),re(this,z,Et).call(this)};this.addCommands({cmd:()=>{Se(Ae)},undo:()=>{Se(Y)},mustExec:!1}),re(this,z,Et).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Y){this.enterInEditMode()}keydown(Y){Y.target===this.div&&Y.key==="Enter"&&(this.enterInEditMode(),Y.preventDefault())}editorDivKeydown(Y){oe._keyboardManager.exec(this,Y)}editorDivFocus(Y){this.isEditing=!0}editorDivBlur(Y){this.isEditing=!1}editorDivInput(Y){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Y,Ae;this.width&&(Y=this.x,Ae=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,S)),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(ke=>{var Re;return(Re=this.editorDiv)==null?void 0:Re.setAttribute("aria-label",ke)}),r.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(ke=>{var Re;return(Re=this.editorDiv)==null?void 0:Re.setAttribute("default-content",ke)}),this.editorDiv.contentEditable=!0;const{style:Se}=this.editorDiv;if(Se.fontSize=`calc(${a(this,P)}px * var(--scale-factor))`,Se.color=a(this,T),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ke,Re]=this.parentDimensions;if(this.annotationElementId){const{position:H}=a(this,x);let[m,_]=this.getInitialTranslation();[m,_]=this.pageTranslationToScreen(m,_);const[g,f]=this.pageDimensions,[y,k]=this.pageTranslation;let $,W;switch(this.rotation){case 0:$=Y+(H[0]-y)/g,W=Ae+this.height-(H[1]-k)/f;break;case 90:$=Y+(H[0]-y)/g,W=Ae-(H[1]-k)/f,[m,_]=[_,-m];break;case 180:$=Y-this.width+(H[0]-y)/g,W=Ae-(H[1]-k)/f,[m,_]=[-m,-_];break;case 270:$=Y+(H[0]-y-this.height*f)/g,W=Ae+(H[1]-k-this.width*g)/f,[m,_]=[-_,m];break}this.setAt($*ke,W*Re,m,_)}else this.setAt(Y*ke,Ae*Re,this.width*ke,this.height*Re);re(this,E,os).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Y,Ae,Se){let ke=null;if(Y instanceof o.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:H,fontColor:m},rect:_,rotation:g,id:f},textContent:y,textPosition:k,parent:{page:{pageNumber:$}}}=Y;if(!y||y.length===0)return null;ke=Y={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(m),fontSize:H,value:y.join(`
`),position:k,pageIndex:$-1,rect:_,rotation:g,id:f,deleted:!1}}const Re=super.deserialize(Y,Ae,Se);return ge(Re,P,Y.fontSize),ge(Re,T,s.Util.makeHexColor(...Y.color)),ge(Re,R,Y.value),Re.annotationElementId=Y.id||null,ge(Re,x,ke),Re}serialize(Y=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Ae=oe._internalPadding*this.parentScale,Se=this.getRect(Ae,Ae),ke=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,T)),Re={annotationType:s.AnnotationEditorType.FREETEXT,color:ke,fontSize:a(this,P),value:a(this,R),pageIndex:this.pageIndex,rect:Se,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Y?Re:this.annotationElementId&&!re(this,L,Ns).call(this,Re)?null:(Re.id=this.annotationElementId,Re)}};u=new WeakMap,c=new WeakMap,l=new WeakMap,A=new WeakMap,T=new WeakMap,R=new WeakMap,S=new WeakMap,P=new WeakMap,x=new WeakMap,M=new WeakSet,Ms=function(Y){const Ae=ke=>{this.editorDiv.style.fontSize=`calc(${ke}px * var(--scale-factor))`,this.translate(0,-(ke-a(this,P))*this.parentScale),ge(this,P,ke),re(this,z,Et).call(this)},Se=a(this,P);this.addCommands({cmd:()=>{Ae(Y)},undo:()=>{Ae(Se)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},B=new WeakSet,Os=function(Y){const Ae=a(this,T);this.addCommands({cmd:()=>{ge(this,T,this.editorDiv.style.color=Y)},undo:()=>{ge(this,T,this.editorDiv.style.color=Ae)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,Is=function(){const Y=this.editorDiv.getElementsByTagName("div");if(Y.length===0)return this.editorDiv.innerText;const Ae=[];for(const Se of Y)Ae.push(Se.innerText.replace(/\r\n?|\n/,""));return Ae.join(`
`)},z=new WeakSet,Et=function(){const[Y,Ae]=this.parentDimensions;let Se;if(this.isAttachedToDOM)Se=this.div.getBoundingClientRect();else{const{currentLayer:ke,div:Re}=this,H=Re.style.display;Re.style.display="hidden",ke.div.append(this.div),Se=Re.getBoundingClientRect(),Re.remove(),Re.style.display=H}this.rotation%180===this.parentRotation%180?(this.width=Se.width/Y,this.height=Se.height/Ae):(this.width=Se.height/Y,this.height=Se.width/Ae),this.fixAndSetPosition()},E=new WeakSet,os=function(){if(this.editorDiv.replaceChildren(),!!a(this,R))for(const Y of a(this,R).split(`
`)){const Ae=document.createElement("div");Ae.append(Y?document.createTextNode(Y):document.createElement("br")),this.editorDiv.append(Ae)}},L=new WeakSet,Ns=function(Y){const{value:Ae,fontSize:Se,color:ke,rect:Re,pageIndex:H}=a(this,x);return Y.value!==Ae||Y.fontSize!==Se||Y.rect.some((m,_)=>Math.abs(m-Re[_])>=1)||Y.color.some((m,_)=>m!==ke[_])||Y.pageIndex!==H},se=new WeakSet,as=function(Y=!1){if(!this.annotationElementId)return;if(re(this,z,Et).call(this),!Y&&(this.width===0||this.height===0)){setTimeout(()=>re(this,se,as).call(this,!0),0);return}const Ae=oe._internalPadding*this.parentScale;a(this,x).rect=this.getRect(Ae,Ae)},nt(oe,"_freeTextDefaultContent",""),nt(oe,"_internalPadding",0),nt(oe,"_defaultColor",null),nt(oe,"_defaultFontSize",10),nt(oe,"_type","freetext");let b=oe;t.FreeTextEditor=b},(e,t,n)=>{var _,f,dt,k,Ds,W,w,F,U,K,ne,ee,ye,ve,fe,me,pe,J,Q,ue,Ee,we,Ne,Ls,Ve,Mt,Ge,ls,Xe,cs,ae,ie,Ce,Te,st,tt,ce,us,Ue,Me,He,je,Bs,Pe,ds;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var s=n(1),i=n(6),r=n(3),o=n(30),b=n(31),u=n(32);const c=1e3,l=9,A=new WeakSet;function T($e){return{width:$e[2]-$e[0],height:$e[3]-$e[1]}}class R{static create(q){switch(q.data.annotationType){case s.AnnotationType.LINK:return new P(q);case s.AnnotationType.TEXT:return new x(q);case s.AnnotationType.WIDGET:switch(q.data.fieldType){case"Tx":return new I(q);case"Btn":return q.data.radioButton?new v(q):q.data.checkBox?new O(q):new C(q);case"Ch":return new z(q);case"Sig":return new B(q)}return new M(q);case s.AnnotationType.POPUP:return new N(q);case s.AnnotationType.FREETEXT:return new j(q);case s.AnnotationType.LINE:return new L(q);case s.AnnotationType.SQUARE:return new Z(q);case s.AnnotationType.CIRCLE:return new se(q);case s.AnnotationType.POLYLINE:return new V(q);case s.AnnotationType.CARET:return new de(q);case s.AnnotationType.INK:return new he(q);case s.AnnotationType.POLYGON:return new oe(q);case s.AnnotationType.HIGHLIGHT:return new Y(q);case s.AnnotationType.UNDERLINE:return new Ae(q);case s.AnnotationType.SQUIGGLY:return new Se(q);case s.AnnotationType.STRIKEOUT:return new ke(q);case s.AnnotationType.STAMP:return new Re(q);case s.AnnotationType.FILEATTACHMENT:return new H(q);default:return new S(q)}}}const g=class g{constructor(q,{isRenderable:d=!1,ignoreBorder:D=!1,createQuadrilaterals:G=!1}={}){X(this,_,!1);this.isRenderable=d,this.data=q.data,this.layer=q.layer,this.linkService=q.linkService,this.downloadManager=q.downloadManager,this.imageResourcesPath=q.imageResourcesPath,this.renderForms=q.renderForms,this.svgFactory=q.svgFactory,this.annotationStorage=q.annotationStorage,this.enableScripting=q.enableScripting,this.hasJSActions=q.hasJSActions,this._fieldObjects=q.fieldObjects,this.parent=q.parent,d&&(this.container=this._createContainer(D)),G&&this._createQuadrilaterals()}static _hasPopupData({titleObj:q,contentsObj:d,richText:D}){return!!(q!=null&&q.str||d!=null&&d.str||D!=null&&D.str)}get hasPopupData(){return g._hasPopupData(this.data)}_createContainer(q){const{data:d,parent:{page:D,viewport:G}}=this,te=document.createElement("section");te.setAttribute("data-annotation-id",d.id),this instanceof M||(te.tabIndex=c),te.style.zIndex=this.parent.zIndex++,this.data.popupRef&&te.setAttribute("aria-haspopup","dialog"),d.noRotate&&te.classList.add("norotate");const{pageWidth:le,pageHeight:_e,pageX:xe,pageY:Ie}=G.rawDims;if(!d.rect||this instanceof N){const{rotation:We}=d;return!d.hasOwnCanvas&&We!==0&&this.setRotation(We,te),te}const{width:Oe,height:Ke}=T(d.rect),De=s.Util.normalizeRect([d.rect[0],D.view[3]-d.rect[1]+D.view[1],d.rect[2],D.view[3]-d.rect[3]+D.view[1]]);if(!q&&d.borderStyle.width>0){te.style.borderWidth=`${d.borderStyle.width}px`;const We=d.borderStyle.horizontalCornerRadius,Ye=d.borderStyle.verticalCornerRadius;if(We>0||Ye>0){const et=`calc(${We}px * var(--scale-factor)) / calc(${Ye}px * var(--scale-factor))`;te.style.borderRadius=et}else if(this instanceof v){const et=`calc(${Oe}px * var(--scale-factor)) / calc(${Ke}px * var(--scale-factor))`;te.style.borderRadius=et}switch(d.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:te.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:te.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:te.style.borderBottomStyle="solid";break}const Qe=d.borderColor||null;Qe?(ge(this,_,!0),te.style.borderColor=s.Util.makeHexColor(Qe[0]|0,Qe[1]|0,Qe[2]|0)):te.style.borderWidth=0}te.style.left=`${100*(De[0]-xe)/le}%`,te.style.top=`${100*(De[1]-Ie)/_e}%`;const{rotation:Le}=d;return d.hasOwnCanvas||Le===0?(te.style.width=`${100*Oe/le}%`,te.style.height=`${100*Ke/_e}%`):this.setRotation(Le,te),te}setRotation(q,d=this.container){if(!this.data.rect)return;const{pageWidth:D,pageHeight:G}=this.parent.viewport.rawDims,{width:te,height:le}=T(this.data.rect);let _e,xe;q%180===0?(_e=100*te/D,xe=100*le/G):(_e=100*le/D,xe=100*te/G),d.style.width=`${_e}%`,d.style.height=`${xe}%`,d.setAttribute("data-main-rotation",(360-q)%360)}get _commonActions(){const q=(d,D,G)=>{const te=G.detail[d],le=te[0],_e=te.slice(1);G.target.style[D]=o.ColorConverters[`${le}_HTML`](_e),this.annotationStorage.setValue(this.data.id,{[D]:o.ColorConverters[`${le}_rgb`](_e)})};return(0,s.shadow)(this,"_commonActions",{display:d=>{const{display:D}=d.detail,G=D%2===1;this.container.style.visibility=G?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:G,noPrint:D===1||D===2})},print:d=>{this.annotationStorage.setValue(this.data.id,{noPrint:!d.detail.print})},hidden:d=>{const{hidden:D}=d.detail;this.container.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:D,noView:D})},focus:d=>{setTimeout(()=>d.target.focus({preventScroll:!1}),0)},userName:d=>{d.target.title=d.detail.userName},readonly:d=>{d.target.disabled=d.detail.readonly},required:d=>{this._setRequired(d.target,d.detail.required)},bgColor:d=>{q("bgColor","backgroundColor",d)},fillColor:d=>{q("fillColor","backgroundColor",d)},fgColor:d=>{q("fgColor","color",d)},textColor:d=>{q("textColor","color",d)},borderColor:d=>{q("borderColor","borderColor",d)},strokeColor:d=>{q("strokeColor","borderColor",d)},rotation:d=>{const D=d.detail.rotation;this.setRotation(D),this.annotationStorage.setValue(this.data.id,{rotation:D})}})}_dispatchEventFromSandbox(q,d){const D=this._commonActions;for(const G of Object.keys(d.detail)){const te=q[G]||D[G];te==null||te(d)}}_setDefaultPropertiesFromJS(q){if(!this.enableScripting)return;const d=this.annotationStorage.getRawValue(this.data.id);if(!d)return;const D=this._commonActions;for(const[G,te]of Object.entries(d)){const le=D[G];if(le){const _e={detail:{[G]:te},target:q};le(_e),delete d[G]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:q}=this.data;if(!q)return;const[d,D,G,te]=this.data.rect;if(q.length===1){const[,{x:Ye,y:Qe},{x:et,y:rt}]=q[0];if(G===Ye&&te===Qe&&d===et&&D===rt)return}const{style:le}=this.container;let _e;if(a(this,_)){const{borderColor:Ye,borderWidth:Qe}=le;le.borderWidth=0,_e=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ye}" stroke-width="${Qe}">`],this.container.classList.add("hasBorder")}const xe=G-d,Ie=te-D,{svgFactory:Oe}=this,Ke=Oe.createElement("svg");Ke.classList.add("quadrilateralsContainer"),Ke.setAttribute("width",0),Ke.setAttribute("height",0);const De=Oe.createElement("defs");Ke.append(De);const Le=Oe.createElement("clipPath"),We=`clippath_${this.data.id}`;Le.setAttribute("id",We),Le.setAttribute("clipPathUnits","objectBoundingBox"),De.append(Le);for(const[,{x:Ye,y:Qe},{x:et,y:rt}]of q){const it=Oe.createElement("rect"),ot=(et-d)/xe,ct=(te-Qe)/Ie,ut=(Ye-et)/xe,As=(Qe-rt)/Ie;it.setAttribute("x",ot),it.setAttribute("y",ct),it.setAttribute("width",ut),it.setAttribute("height",As),Le.append(it),_e==null||_e.push(`<rect vector-effect="non-scaling-stroke" x="${ot}" y="${ct}" width="${ut}" height="${As}"/>`)}a(this,_)&&(_e.push("</g></svg>')"),le.backgroundImage=_e.join("")),this.container.append(Ke),this.container.style.clipPath=`url(#${We})`}_createPopup(){const{container:q,data:d}=this;q.setAttribute("aria-haspopup","dialog");const D=new N({data:{color:d.color,titleObj:d.titleObj,modificationDate:d.modificationDate,contentsObj:d.contentsObj,richText:d.richText,parentRect:d.rect,borderStyle:0,id:`popup_${d.id}`,rotation:d.rotation},parent:this.parent,elements:[this]});this.parent.div.append(D.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(q,d=null){const D=[];if(this._fieldObjects){const G=this._fieldObjects[q];if(G)for(const{page:te,id:le,exportValues:_e}of G){if(te===-1||le===d)continue;const xe=typeof _e=="string"?_e:null,Ie=document.querySelector(`[data-element-id="${le}"]`);if(Ie&&!A.has(Ie)){(0,s.warn)(`_getElementsByName - element not allowed: ${le}`);continue}D.push({id:le,exportValue:xe,domElement:Ie})}return D}for(const G of document.getElementsByName(q)){const{exportValue:te}=G,le=G.getAttribute("data-element-id");le!==d&&A.has(G)&&D.push({id:le,exportValue:te,domElement:G})}return D}show(){var q;this.container&&(this.container.hidden=!1),(q=this.popup)==null||q.maybeShow()}hide(){var q;this.container&&(this.container.hidden=!0),(q=this.popup)==null||q.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const q=this.getElementsToTriggerPopup();if(Array.isArray(q))for(const d of q)d.classList.add("highlightArea");else q.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:q,data:{id:d}}=this;this.container.addEventListener("dblclick",()=>{var D;(D=this.linkService.eventBus)==null||D.dispatch("switchannotationeditormode",{source:this,mode:q,editId:d})})}};_=new WeakMap;let S=g;class P extends S{constructor(d,D=null){super(d,{isRenderable:!0,ignoreBorder:!!(D!=null&&D.ignoreBorder),createQuadrilaterals:!0});X(this,f);X(this,k);this.isTooltipOnly=d.data.isTooltipOnly}render(){const{data:d,linkService:D}=this,G=document.createElement("a");G.setAttribute("data-element-id",d.id);let te=!1;return d.url?(D.addLinkAttributes(G,d.url,d.newWindow),te=!0):d.action?(this._bindNamedAction(G,d.action),te=!0):d.attachment?(this._bindAttachment(G,d.attachment),te=!0):d.setOCGState?(re(this,k,Ds).call(this,G,d.setOCGState),te=!0):d.dest?(this._bindLink(G,d.dest),te=!0):(d.actions&&(d.actions.Action||d.actions["Mouse Up"]||d.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(G,d),te=!0),d.resetForm?(this._bindResetFormAction(G,d.resetForm),te=!0):this.isTooltipOnly&&!te&&(this._bindLink(G,""),te=!0)),this.container.classList.add("linkAnnotation"),te&&this.container.append(G),this.container}_bindLink(d,D){d.href=this.linkService.getDestinationHash(D),d.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&re(this,f,dt).call(this)}_bindNamedAction(d,D){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>(this.linkService.executeNamedAction(D),!1),re(this,f,dt).call(this)}_bindAttachment(d,D){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>{var G;return(G=this.downloadManager)==null||G.openOrDownloadData(this.container,D.content,D.filename),!1},re(this,f,dt).call(this)}_bindJSAction(d,D){d.href=this.linkService.getAnchorUrl("");const G=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const te of Object.keys(D.actions)){const le=G.get(te);le&&(d[le]=()=>{var _e;return(_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:te}}),!1})}d.onclick||(d.onclick=()=>!1),re(this,f,dt).call(this)}_bindResetFormAction(d,D){const G=d.onclick;if(G||(d.href=this.linkService.getAnchorUrl("")),re(this,f,dt).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),G||(d.onclick=()=>!1);return}d.onclick=()=>{var Ke;G==null||G();const{fields:te,refs:le,include:_e}=D,xe=[];if(te.length!==0||le.length!==0){const De=new Set(le);for(const Le of te){const We=this._fieldObjects[Le]||[];for(const{id:Ye}of We)De.add(Ye)}for(const Le of Object.values(this._fieldObjects))for(const We of Le)De.has(We.id)===_e&&xe.push(We)}else for(const De of Object.values(this._fieldObjects))xe.push(...De);const Ie=this.annotationStorage,Oe=[];for(const De of xe){const{id:Le}=De;switch(Oe.push(Le),De.type){case"text":{const Ye=De.defaultValue||"";Ie.setValue(Le,{value:Ye});break}case"checkbox":case"radiobutton":{const Ye=De.defaultValue===De.exportValues;Ie.setValue(Le,{value:Ye});break}case"combobox":case"listbox":{const Ye=De.defaultValue||"";Ie.setValue(Le,{value:Ye});break}default:continue}const We=document.querySelector(`[data-element-id="${Le}"]`);if(We){if(!A.has(We)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${Le}`);continue}}else continue;We.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ke=this.linkService.eventBus)==null||Ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Oe,name:"ResetForm"}})),!1}}}f=new WeakSet,dt=function(){this.container.setAttribute("data-internal-link","")},k=new WeakSet,Ds=function(d,D){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>(this.linkService.executeSetOCGState(D),!1),re(this,f,dt).call(this)};class x extends S{constructor(q){super(q,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const q=document.createElement("img");return q.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",q.alt="[{{type}} Annotation]",q.dataset.l10nId="text_annotation_type",q.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(q),this.container}}class M extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(q){var d;this.data.hasOwnCanvas&&(((d=q.previousSibling)==null?void 0:d.nodeName)==="CANVAS"&&(q.previousSibling.hidden=!0),q.hidden=!1)}_getKeyModifier(q){const{isWin:d,isMac:D}=s.FeatureTest.platform;return d&&q.ctrlKey||D&&q.metaKey}_setEventListener(q,d,D,G,te){D.includes("mouse")?q.addEventListener(D,le=>{var _e;(_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:G,value:te(le),shift:le.shiftKey,modifier:this._getKeyModifier(le)}})}):q.addEventListener(D,le=>{var _e;if(D==="blur"){if(!d.focused||!le.relatedTarget)return;d.focused=!1}else if(D==="focus"){if(d.focused)return;d.focused=!0}te&&((_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:G,value:te(le)}}))})}_setEventListeners(q,d,D,G){var te,le,_e;for(const[xe,Ie]of D)(Ie==="Action"||(te=this.data.actions)!=null&&te[Ie])&&((Ie==="Focus"||Ie==="Blur")&&(d||(d={focused:!1})),this._setEventListener(q,d,xe,Ie,G),Ie==="Focus"&&!((le=this.data.actions)!=null&&le.Blur)?this._setEventListener(q,d,"blur","Blur",null):Ie==="Blur"&&!((_e=this.data.actions)!=null&&_e.Focus)&&this._setEventListener(q,d,"focus","Focus",null))}_setBackgroundColor(q){const d=this.data.backgroundColor||null;q.style.backgroundColor=d===null?"transparent":s.Util.makeHexColor(d[0],d[1],d[2])}_setTextStyle(q){const d=["left","center","right"],{fontColor:D}=this.data.defaultAppearanceData,G=this.data.defaultAppearanceData.fontSize||l,te=q.style;let le;const _e=2,xe=Ie=>Math.round(10*Ie)/10;if(this.data.multiLine){const Ie=Math.abs(this.data.rect[3]-this.data.rect[1]-_e),Oe=Math.round(Ie/(s.LINE_FACTOR*G))||1,Ke=Ie/Oe;le=Math.min(G,xe(Ke/s.LINE_FACTOR))}else{const Ie=Math.abs(this.data.rect[3]-this.data.rect[1]-_e);le=Math.min(G,xe(Ie/s.LINE_FACTOR))}te.fontSize=`calc(${le}px * var(--scale-factor))`,te.color=s.Util.makeHexColor(D[0],D[1],D[2]),this.data.textAlignment!==null&&(te.textAlign=d[this.data.textAlignment])}_setRequired(q,d){d?q.setAttribute("required",!0):q.removeAttribute("required"),q.setAttribute("aria-required",d)}}class I extends M{constructor(q){const d=q.renderForms||!q.data.hasAppearance&&!!q.data.fieldValue;super(q,{isRenderable:d})}setPropertyOnSiblings(q,d,D,G){const te=this.annotationStorage;for(const le of this._getElementsByName(q.name,q.id))le.domElement&&(le.domElement[d]=D),te.setValue(le.id,{[G]:D})}render(){var G,te;const q=this.annotationStorage,d=this.data.id;this.container.classList.add("textWidgetAnnotation");let D=null;if(this.renderForms){const le=q.getValue(d,{value:this.data.fieldValue});let _e=le.value||"";const xe=q.getValue(d,{charLimit:this.data.maxLen}).charLimit;xe&&_e.length>xe&&(_e=_e.slice(0,xe));let Ie=le.formattedValue||((G=this.data.textContent)==null?void 0:G.join(`
`))||null;Ie&&this.data.comb&&(Ie=Ie.replaceAll(/\s+/g,""));const Oe={userValue:_e,formattedValue:Ie,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(D=document.createElement("textarea"),D.textContent=Ie??_e,this.data.doNotScroll&&(D.style.overflowY="hidden")):(D=document.createElement("input"),D.type="text",D.setAttribute("value",Ie??_e),this.data.doNotScroll&&(D.style.overflowX="hidden")),this.data.hasOwnCanvas&&(D.hidden=!0),A.add(D),D.setAttribute("data-element-id",d),D.disabled=this.data.readOnly,D.name=this.data.fieldName,D.tabIndex=c,this._setRequired(D,this.data.required),xe&&(D.maxLength=xe),D.addEventListener("input",De=>{q.setValue(d,{value:De.target.value}),this.setPropertyOnSiblings(D,"value",De.target.value,"value"),Oe.formattedValue=null}),D.addEventListener("resetform",De=>{const Le=this.data.defaultFieldValue??"";D.value=Oe.userValue=Le,Oe.formattedValue=null});let Ke=De=>{const{formattedValue:Le}=Oe;Le!=null&&(De.target.value=Le),De.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){D.addEventListener("focus",Le=>{if(Oe.focused)return;const{target:We}=Le;Oe.userValue&&(We.value=Oe.userValue),Oe.lastCommittedValue=We.value,Oe.commitKey=1,Oe.focused=!0}),D.addEventListener("updatefromsandbox",Le=>{this.showElementAndHideCanvas(Le.target);const We={value(Ye){Oe.userValue=Ye.detail.value??"",q.setValue(d,{value:Oe.userValue.toString()}),Ye.target.value=Oe.userValue},formattedValue(Ye){const{formattedValue:Qe}=Ye.detail;Oe.formattedValue=Qe,Qe!=null&&Ye.target!==document.activeElement&&(Ye.target.value=Qe),q.setValue(d,{formattedValue:Qe})},selRange(Ye){Ye.target.setSelectionRange(...Ye.detail.selRange)},charLimit:Ye=>{var it;const{charLimit:Qe}=Ye.detail,{target:et}=Ye;if(Qe===0){et.removeAttribute("maxLength");return}et.setAttribute("maxLength",Qe);let rt=Oe.userValue;!rt||rt.length<=Qe||(rt=rt.slice(0,Qe),et.value=Oe.userValue=rt,q.setValue(d,{value:rt}),(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:rt,willCommit:!0,commitKey:1,selStart:et.selectionStart,selEnd:et.selectionEnd}}))}};this._dispatchEventFromSandbox(We,Le)}),D.addEventListener("keydown",Le=>{var Qe;Oe.commitKey=1;let We=-1;if(Le.key==="Escape"?We=0:Le.key==="Enter"&&!this.data.multiLine?We=2:Le.key==="Tab"&&(Oe.commitKey=3),We===-1)return;const{value:Ye}=Le.target;Oe.lastCommittedValue!==Ye&&(Oe.lastCommittedValue=Ye,Oe.userValue=Ye,(Qe=this.linkService.eventBus)==null||Qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:Ye,willCommit:!0,commitKey:We,selStart:Le.target.selectionStart,selEnd:Le.target.selectionEnd}}))});const De=Ke;Ke=null,D.addEventListener("blur",Le=>{var Ye;if(!Oe.focused||!Le.relatedTarget)return;Oe.focused=!1;const{value:We}=Le.target;Oe.userValue=We,Oe.lastCommittedValue!==We&&((Ye=this.linkService.eventBus)==null||Ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:We,willCommit:!0,commitKey:Oe.commitKey,selStart:Le.target.selectionStart,selEnd:Le.target.selectionEnd}})),De(Le)}),(te=this.data.actions)!=null&&te.Keystroke&&D.addEventListener("beforeinput",Le=>{var ct;Oe.lastCommittedValue=null;const{data:We,target:Ye}=Le,{value:Qe,selectionStart:et,selectionEnd:rt}=Ye;let it=et,ot=rt;switch(Le.inputType){case"deleteWordBackward":{const ut=Qe.substring(0,et).match(/\w*[^\w]*$/);ut&&(it-=ut[0].length);break}case"deleteWordForward":{const ut=Qe.substring(et).match(/^[^\w]*\w*/);ut&&(ot+=ut[0].length);break}case"deleteContentBackward":et===rt&&(it-=1);break;case"deleteContentForward":et===rt&&(ot+=1);break}Le.preventDefault(),(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:Qe,change:We||"",willCommit:!1,selStart:it,selEnd:ot}})}),this._setEventListeners(D,Oe,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Le=>Le.target.value)}if(Ke&&D.addEventListener("blur",Ke),this.data.comb){const Le=(this.data.rect[2]-this.data.rect[0])/xe;D.classList.add("comb"),D.style.letterSpacing=`calc(${Le}px * var(--scale-factor) - 1ch)`}}else D=document.createElement("div"),D.textContent=this.data.fieldValue,D.style.verticalAlign="middle",D.style.display="table-cell";return this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class B extends M{constructor(q){super(q,{isRenderable:!!q.data.hasOwnCanvas})}}class O extends M{constructor(q){super(q,{isRenderable:q.renderForms})}render(){const q=this.annotationStorage,d=this.data,D=d.id;let G=q.getValue(D,{value:d.exportValue===d.fieldValue}).value;typeof G=="string"&&(G=G!=="Off",q.setValue(D,{value:G})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const te=document.createElement("input");return A.add(te),te.setAttribute("data-element-id",D),te.disabled=d.readOnly,this._setRequired(te,this.data.required),te.type="checkbox",te.name=d.fieldName,G&&te.setAttribute("checked",!0),te.setAttribute("exportValue",d.exportValue),te.tabIndex=c,te.addEventListener("change",le=>{const{name:_e,checked:xe}=le.target;for(const Ie of this._getElementsByName(_e,D)){const Oe=xe&&Ie.exportValue===d.exportValue;Ie.domElement&&(Ie.domElement.checked=Oe),q.setValue(Ie.id,{value:Oe})}q.setValue(D,{value:xe})}),te.addEventListener("resetform",le=>{const _e=d.defaultFieldValue||"Off";le.target.checked=_e===d.exportValue}),this.enableScripting&&this.hasJSActions&&(te.addEventListener("updatefromsandbox",le=>{const _e={value(xe){xe.target.checked=xe.detail.value!=="Off",q.setValue(D,{value:xe.target.checked})}};this._dispatchEventFromSandbox(_e,le)}),this._setEventListeners(te,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],le=>le.target.checked)),this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}class v extends M{constructor(q){super(q,{isRenderable:q.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const q=this.annotationStorage,d=this.data,D=d.id;let G=q.getValue(D,{value:d.fieldValue===d.buttonValue}).value;typeof G=="string"&&(G=G!==d.buttonValue,q.setValue(D,{value:G}));const te=document.createElement("input");if(A.add(te),te.setAttribute("data-element-id",D),te.disabled=d.readOnly,this._setRequired(te,this.data.required),te.type="radio",te.name=d.fieldName,G&&te.setAttribute("checked",!0),te.tabIndex=c,te.addEventListener("change",le=>{const{name:_e,checked:xe}=le.target;for(const Ie of this._getElementsByName(_e,D))q.setValue(Ie.id,{value:!1});q.setValue(D,{value:xe})}),te.addEventListener("resetform",le=>{const _e=d.defaultFieldValue;le.target.checked=_e!=null&&_e===d.buttonValue}),this.enableScripting&&this.hasJSActions){const le=d.buttonValue;te.addEventListener("updatefromsandbox",_e=>{const xe={value:Ie=>{const Oe=le===Ie.detail.value;for(const Ke of this._getElementsByName(Ie.target.name)){const De=Oe&&Ke.id===D;Ke.domElement&&(Ke.domElement.checked=De),q.setValue(Ke.id,{value:De})}}};this._dispatchEventFromSandbox(xe,_e)}),this._setEventListeners(te,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_e=>_e.target.checked)}return this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}class C extends P{constructor(q){super(q,{ignoreBorder:q.data.hasAppearance})}render(){const q=super.render();q.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(q.title=this.data.alternativeText);const d=q.lastChild;return this.enableScripting&&this.hasJSActions&&d&&(this._setDefaultPropertiesFromJS(d),d.addEventListener("updatefromsandbox",D=>{this._dispatchEventFromSandbox({},D)})),q}}class z extends M{constructor(q){super(q,{isRenderable:q.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const q=this.annotationStorage,d=this.data.id,D=q.getValue(d,{value:this.data.fieldValue}),G=document.createElement("select");A.add(G),G.setAttribute("data-element-id",d),G.disabled=this.data.readOnly,this._setRequired(G,this.data.required),G.name=this.data.fieldName,G.tabIndex=c;let te=this.data.combo&&this.data.options.length>0;this.data.combo||(G.size=this.data.options.length,this.data.multiSelect&&(G.multiple=!0)),G.addEventListener("resetform",Oe=>{const Ke=this.data.defaultFieldValue;for(const De of G.options)De.selected=De.value===Ke});for(const Oe of this.data.options){const Ke=document.createElement("option");Ke.textContent=Oe.displayValue,Ke.value=Oe.exportValue,D.value.includes(Oe.exportValue)&&(Ke.setAttribute("selected",!0),te=!1),G.append(Ke)}let le=null;if(te){const Oe=document.createElement("option");Oe.value=" ",Oe.setAttribute("hidden",!0),Oe.setAttribute("selected",!0),G.prepend(Oe),le=()=>{Oe.remove(),G.removeEventListener("input",le),le=null},G.addEventListener("input",le)}const _e=Oe=>{const Ke=Oe?"value":"textContent",{options:De,multiple:Le}=G;return Le?Array.prototype.filter.call(De,We=>We.selected).map(We=>We[Ke]):De.selectedIndex===-1?null:De[De.selectedIndex][Ke]};let xe=_e(!1);const Ie=Oe=>{const Ke=Oe.target.options;return Array.prototype.map.call(Ke,De=>({displayValue:De.textContent,exportValue:De.value}))};return this.enableScripting&&this.hasJSActions?(G.addEventListener("updatefromsandbox",Oe=>{const Ke={value(De){le==null||le();const Le=De.detail.value,We=new Set(Array.isArray(Le)?Le:[Le]);for(const Ye of G.options)Ye.selected=We.has(Ye.value);q.setValue(d,{value:_e(!0)}),xe=_e(!1)},multipleSelection(De){G.multiple=!0},remove(De){const Le=G.options,We=De.detail.remove;Le[We].selected=!1,G.remove(We),Le.length>0&&Array.prototype.findIndex.call(Le,Qe=>Qe.selected)===-1&&(Le[0].selected=!0),q.setValue(d,{value:_e(!0),items:Ie(De)}),xe=_e(!1)},clear(De){for(;G.length!==0;)G.remove(0);q.setValue(d,{value:null,items:[]}),xe=_e(!1)},insert(De){const{index:Le,displayValue:We,exportValue:Ye}=De.detail.insert,Qe=G.children[Le],et=document.createElement("option");et.textContent=We,et.value=Ye,Qe?Qe.before(et):G.append(et),q.setValue(d,{value:_e(!0),items:Ie(De)}),xe=_e(!1)},items(De){const{items:Le}=De.detail;for(;G.length!==0;)G.remove(0);for(const We of Le){const{displayValue:Ye,exportValue:Qe}=We,et=document.createElement("option");et.textContent=Ye,et.value=Qe,G.append(et)}G.options.length>0&&(G.options[0].selected=!0),q.setValue(d,{value:_e(!0),items:Ie(De)}),xe=_e(!1)},indices(De){const Le=new Set(De.detail.indices);for(const We of De.target.options)We.selected=Le.has(We.index);q.setValue(d,{value:_e(!0)}),xe=_e(!1)},editable(De){De.target.disabled=!De.detail.editable}};this._dispatchEventFromSandbox(Ke,Oe)}),G.addEventListener("input",Oe=>{var De;const Ke=_e(!0);q.setValue(d,{value:Ke}),Oe.preventDefault(),(De=this.linkService.eventBus)==null||De.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:xe,changeEx:Ke,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(G,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Oe=>Oe.target.value)):G.addEventListener("input",function(Oe){q.setValue(d,{value:_e(!0)})}),this.data.combo&&this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class N extends S{constructor(q){const{data:d,elements:D}=q;super(q,{isRenderable:S._hasPopupData(d)}),this.elements=D}render(){this.container.classList.add("popupAnnotation");const q=new E({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),d=[];for(const D of this.elements)D.popup=q,d.push(D.data.id),D.addHighlightArea();return this.container.setAttribute("aria-controls",d.map(D=>`${s.AnnotationPrefix}${D}`).join(",")),this.container}}class E{constructor({container:q,color:d,elements:D,titleObj:G,modificationDate:te,contentsObj:le,richText:_e,parent:xe,rect:Ie,parentRect:Oe,open:Ke}){X(this,Ne);X(this,Ve);X(this,Ge);X(this,Xe);X(this,W,null);X(this,w,re(this,Ne,Ls).bind(this));X(this,F,re(this,Xe,cs).bind(this));X(this,U,re(this,Ge,ls).bind(this));X(this,K,re(this,Ve,Mt).bind(this));X(this,ne,null);X(this,ee,null);X(this,ye,null);X(this,ve,null);X(this,fe,null);X(this,me,null);X(this,pe,!1);X(this,J,null);X(this,Q,null);X(this,ue,null);X(this,Ee,null);X(this,we,!1);var Le;ge(this,ee,q),ge(this,Ee,G),ge(this,ye,le),ge(this,ue,_e),ge(this,fe,xe),ge(this,ne,d),ge(this,Q,Ie),ge(this,me,Oe),ge(this,ve,D);const De=i.PDFDateString.toDateObject(te);De&&ge(this,W,xe.l10n.get("annotation_date_string",{date:De.toLocaleDateString(),time:De.toLocaleTimeString()})),this.trigger=D.flatMap(We=>We.getElementsToTriggerPopup());for(const We of this.trigger)We.addEventListener("click",a(this,K)),We.addEventListener("mouseenter",a(this,U)),We.addEventListener("mouseleave",a(this,F)),We.classList.add("popupTriggerArea");for(const We of D)(Le=We.container)==null||Le.addEventListener("keydown",a(this,w));a(this,ee).hidden=!0,Ke&&re(this,Ve,Mt).call(this)}render(){if(a(this,J))return;const{page:{view:q},viewport:{rawDims:{pageWidth:d,pageHeight:D,pageX:G,pageY:te}}}=a(this,fe),le=ge(this,J,document.createElement("div"));if(le.className="popup",a(this,ne)){const it=le.style.outlineColor=s.Util.makeHexColor(...a(this,ne));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?le.style.backgroundColor=`color-mix(in srgb, ${it} 30%, white)`:le.style.backgroundColor=s.Util.makeHexColor(...a(this,ne).map(ct=>Math.floor(.7*(255-ct)+ct)))}const _e=document.createElement("span");_e.className="header";const xe=document.createElement("h1");if(_e.append(xe),{dir:xe.dir,str:xe.textContent}=a(this,Ee),le.append(_e),a(this,W)){const it=document.createElement("span");it.classList.add("popupDate"),a(this,W).then(ot=>{it.textContent=ot}),_e.append(it)}const Ie=a(this,ye),Oe=a(this,ue);if(Oe!=null&&Oe.str&&(!(Ie!=null&&Ie.str)||Ie.str===Oe.str))u.XfaLayer.render({xfaHtml:Oe.html,intent:"richText",div:le}),le.lastChild.classList.add("richText","popupContent");else{const it=this._formatContents(Ie);le.append(it)}let Ke=!!a(this,me),De=Ke?a(this,me):a(this,Q);for(const it of a(this,ve))if(!De||s.Util.intersect(it.data.rect,De)!==null){De=it.data.rect,Ke=!0;break}const Le=s.Util.normalizeRect([De[0],q[3]-De[1]+q[1],De[2],q[3]-De[3]+q[1]]),We=5,Ye=Ke?De[2]-De[0]+We:0,Qe=Le[0]+Ye,et=Le[1],{style:rt}=a(this,ee);rt.left=`${100*(Qe-G)/d}%`,rt.top=`${100*(et-te)/D}%`,a(this,ee).append(le)}_formatContents({str:q,dir:d}){const D=document.createElement("p");D.classList.add("popupContent"),D.dir=d;const G=q.split(/(?:\r\n?|\n)/);for(let te=0,le=G.length;te<le;++te){const _e=G[te];D.append(document.createTextNode(_e)),te<le-1&&D.append(document.createElement("br"))}return D}forceHide(){ge(this,we,this.isVisible),a(this,we)&&(a(this,ee).hidden=!0)}maybeShow(){a(this,we)&&(ge(this,we,!1),a(this,ee).hidden=!1)}get isVisible(){return a(this,ee).hidden===!1}}W=new WeakMap,w=new WeakMap,F=new WeakMap,U=new WeakMap,K=new WeakMap,ne=new WeakMap,ee=new WeakMap,ye=new WeakMap,ve=new WeakMap,fe=new WeakMap,me=new WeakMap,pe=new WeakMap,J=new WeakMap,Q=new WeakMap,ue=new WeakMap,Ee=new WeakMap,we=new WeakMap,Ne=new WeakSet,Ls=function(q){q.altKey||q.shiftKey||q.ctrlKey||q.metaKey||(q.key==="Enter"||q.key==="Escape"&&a(this,pe))&&re(this,Ve,Mt).call(this)},Ve=new WeakSet,Mt=function(){ge(this,pe,!a(this,pe)),a(this,pe)?(re(this,Ge,ls).call(this),a(this,ee).addEventListener("click",a(this,K)),a(this,ee).addEventListener("keydown",a(this,w))):(re(this,Xe,cs).call(this),a(this,ee).removeEventListener("click",a(this,K)),a(this,ee).removeEventListener("keydown",a(this,w)))},Ge=new WeakSet,ls=function(){a(this,J)||this.render(),this.isVisible?a(this,pe)&&a(this,ee).classList.add("focused"):(a(this,ee).hidden=!1,a(this,ee).style.zIndex=parseInt(a(this,ee).style.zIndex)+1e3)},Xe=new WeakSet,cs=function(){a(this,ee).classList.remove("focused"),!(a(this,pe)||!this.isVisible)&&(a(this,ee).hidden=!0,a(this,ee).style.zIndex=parseInt(a(this,ee).style.zIndex)-1e3)};class j extends S{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0}),this.textContent=q.data.textContent,this.textPosition=q.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const q=document.createElement("div");q.classList.add("annotationTextContent"),q.setAttribute("role","comment");for(const d of this.textContent){const D=document.createElement("span");D.textContent=d,q.append(D)}this.container.append(q)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=j;class L extends S{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});X(this,ae,null)}render(){this.container.classList.add("lineAnnotation");const d=this.data,{width:D,height:G}=T(d.rect),te=this.svgFactory.create(D,G,!0),le=ge(this,ae,this.svgFactory.createElement("svg:line"));return le.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),le.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),le.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),le.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),le.setAttribute("stroke-width",d.borderStyle.width||1),le.setAttribute("stroke","transparent"),le.setAttribute("fill","transparent"),te.append(le),this.container.append(te),!d.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ae)}addHighlightArea(){this.container.classList.add("highlightArea")}}ae=new WeakMap;class Z extends S{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});X(this,ie,null)}render(){this.container.classList.add("squareAnnotation");const d=this.data,{width:D,height:G}=T(d.rect),te=this.svgFactory.create(D,G,!0),le=d.borderStyle.width,_e=ge(this,ie,this.svgFactory.createElement("svg:rect"));return _e.setAttribute("x",le/2),_e.setAttribute("y",le/2),_e.setAttribute("width",D-le),_e.setAttribute("height",G-le),_e.setAttribute("stroke-width",le||1),_e.setAttribute("stroke","transparent"),_e.setAttribute("fill","transparent"),te.append(_e),this.container.append(te),!d.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}ie=new WeakMap;class se extends S{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});X(this,Ce,null)}render(){this.container.classList.add("circleAnnotation");const d=this.data,{width:D,height:G}=T(d.rect),te=this.svgFactory.create(D,G,!0),le=d.borderStyle.width,_e=ge(this,Ce,this.svgFactory.createElement("svg:ellipse"));return _e.setAttribute("cx",D/2),_e.setAttribute("cy",G/2),_e.setAttribute("rx",D/2-le/2),_e.setAttribute("ry",G/2-le/2),_e.setAttribute("stroke-width",le||1),_e.setAttribute("stroke","transparent"),_e.setAttribute("fill","transparent"),te.append(_e),this.container.append(te),!d.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ce)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ce=new WeakMap;class V extends S{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});X(this,Te,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const d=this.data,{width:D,height:G}=T(d.rect),te=this.svgFactory.create(D,G,!0);let le=[];for(const xe of d.vertices){const Ie=xe.x-d.rect[0],Oe=d.rect[3]-xe.y;le.push(Ie+","+Oe)}le=le.join(" ");const _e=ge(this,Te,this.svgFactory.createElement(this.svgElementName));return _e.setAttribute("points",le),_e.setAttribute("stroke-width",d.borderStyle.width||1),_e.setAttribute("stroke","transparent"),_e.setAttribute("fill","transparent"),te.append(_e),this.container.append(te),!d.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Te)}addHighlightArea(){this.container.classList.add("highlightArea")}}Te=new WeakMap;class oe extends V{constructor(q){super(q),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class de extends S{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class he extends S{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});X(this,st,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const d=this.data,{width:D,height:G}=T(d.rect),te=this.svgFactory.create(D,G,!0);for(const le of d.inkLists){let _e=[];for(const Ie of le){const Oe=Ie.x-d.rect[0],Ke=d.rect[3]-Ie.y;_e.push(`${Oe},${Ke}`)}_e=_e.join(" ");const xe=this.svgFactory.createElement(this.svgElementName);a(this,st).push(xe),xe.setAttribute("points",_e),xe.setAttribute("stroke-width",d.borderStyle.width||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),!d.popupRef&&this.hasPopupData&&this._createPopup(),te.append(xe)}return this.container.append(te),this.container}getElementsToTriggerPopup(){return a(this,st)}addHighlightArea(){this.container.classList.add("highlightArea")}}st=new WeakMap,t.InkAnnotationElement=he;class Y extends S{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Ae extends S{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Se extends S{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ke extends S{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Re extends S{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=Re;class H extends S{constructor(d){var te;super(d,{isRenderable:!0});X(this,ce);X(this,tt,null);const{filename:D,content:G}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(D,!0),this.content=G,(te=this.linkService.eventBus)==null||te.dispatch("fileattachmentannotation",{source:this,filename:D,content:G})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:d,data:D}=this;let G;D.hasAppearance||D.fillAlpha===0?G=document.createElement("div"):(G=document.createElement("img"),G.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(D.name)?"paperclip":"pushpin"}.svg`,D.fillAlpha&&D.fillAlpha<1&&(G.style=`filter: opacity(${Math.round(D.fillAlpha*100)}%);`)),G.addEventListener("dblclick",re(this,ce,us).bind(this)),ge(this,tt,G);const{isMac:te}=s.FeatureTest.platform;return d.addEventListener("keydown",le=>{le.key==="Enter"&&(te?le.metaKey:le.ctrlKey)&&re(this,ce,us).call(this)}),!D.popupRef&&this.hasPopupData?this._createPopup():G.classList.add("popupTriggerArea"),d.append(G),d}getElementsToTriggerPopup(){return a(this,tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}tt=new WeakMap,ce=new WeakSet,us=function(){var d;(d=this.downloadManager)==null||d.openOrDownloadData(this.container,this.content,this.filename)};class m{constructor({div:q,accessibilityManager:d,annotationCanvasMap:D,l10n:G,page:te,viewport:le}){X(this,je);X(this,Pe);X(this,Ue,null);X(this,Me,null);X(this,He,new Map);this.div=q,ge(this,Ue,d),ge(this,Me,D),this.l10n=G,this.page=te,this.viewport=le,this.zIndex=0,this.l10n||(this.l10n=b.NullL10n)}async render(q){const{annotations:d}=q,D=this.div;(0,i.setLayerDimensions)(D,this.viewport);const G=new Map,te={data:null,layer:D,linkService:q.linkService,downloadManager:q.downloadManager,imageResourcesPath:q.imageResourcesPath||"",renderForms:q.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:q.annotationStorage||new r.AnnotationStorage,enableScripting:q.enableScripting===!0,hasJSActions:q.hasJSActions,fieldObjects:q.fieldObjects,parent:this,elements:null};for(const le of d){if(le.noHTML)continue;const _e=le.annotationType===s.AnnotationType.POPUP;if(_e){const Oe=G.get(le.id);if(!Oe)continue;te.elements=Oe}else{const{width:Oe,height:Ke}=T(le.rect);if(Oe<=0||Ke<=0)continue}te.data=le;const xe=R.create(te);if(!xe.isRenderable)continue;if(!_e&&le.popupRef){const Oe=G.get(le.popupRef);Oe?Oe.push(xe):G.set(le.popupRef,[xe])}xe.annotationEditorType>0&&a(this,He).set(xe.data.id,xe);const Ie=xe.render();le.hidden&&(Ie.style.visibility="hidden"),re(this,je,Bs).call(this,Ie,le.id)}re(this,Pe,ds).call(this),await this.l10n.translate(D)}update({viewport:q}){const d=this.div;this.viewport=q,(0,i.setLayerDimensions)(d,{rotation:q.rotation}),re(this,Pe,ds).call(this),d.hidden=!1}getEditableAnnotations(){return Array.from(a(this,He).values())}getEditableAnnotation(q){return a(this,He).get(q)}}Ue=new WeakMap,Me=new WeakMap,He=new WeakMap,je=new WeakSet,Bs=function(q,d){var G;const D=q.firstChild||q;D.id=`${s.AnnotationPrefix}${d}`,this.div.append(q),(G=a(this,Ue))==null||G.moveElementInDOM(this.div,q,D,!1)},Pe=new WeakSet,ds=function(){if(!a(this,Me))return;const q=this.div;for(const[d,D]of a(this,Me)){const G=q.querySelector(`[data-annotation-id="${d}"]`);if(!G)continue;const{firstChild:te}=G;te?te.nodeName==="CANVAS"?te.replaceWith(D):te.before(D):G.append(D)}a(this,Me).clear()},t.AnnotationLayer=m},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function s(r){return Math.max(0,Math.min(255,255*r))}class i{static CMYK_G([o,b,u,c]){return["G",1-Math.min(1,.3*o+.59*u+.11*b+c)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_rgb([o]){return o=s(o),[o,o,o]}static G_HTML([o]){const b=n(o);return`#${b}${b}${b}`}static RGB_G([o,b,u]){return["G",.3*o+.59*b+.11*u]}static RGB_rgb(o){return o.map(s)}static RGB_HTML(o){return`#${o.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([o,b,u,c]){return["RGB",1-Math.min(1,o+c),1-Math.min(1,u+c),1-Math.min(1,b+c)]}static CMYK_rgb([o,b,u,c]){return[s(1-Math.min(1,o+c)),s(1-Math.min(1,u+c)),s(1-Math.min(1,b+c))]}static CMYK_HTML(o){const b=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(b)}static RGB_CMYK([o,b,u]){const c=1-o,l=1-b,A=1-u,T=Math.min(c,l,A);return["CMYK",c,l,A,T]}}t.ColorConverters=i},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=s;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function s(o,b){switch(o){case"find_match_count":o=`find_match_count[${b.total===1?"one":"other"}]`;break;case"find_match_count_limit":o=`find_match_count_limit[${b.limit===1?"one":"other"}]`;break}return n[o]||""}function i(o,b){return b?o.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(u,c)=>c in b?b[c]:"{{"+c+"}}"):o}const r={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(o,b=null,u=s(o,b)){return i(u,b)},async translate(o){}};t.NullL10n=r},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var s=n(25);class i{static setupStorage(o,b,u,c,l){const A=c.getValue(b,{value:null});switch(u.name){case"textarea":if(A.value!==null&&(o.textContent=A.value),l==="print")break;o.addEventListener("input",T=>{c.setValue(b,{value:T.target.value})});break;case"input":if(u.attributes.type==="radio"||u.attributes.type==="checkbox"){if(A.value===u.attributes.xfaOn?o.setAttribute("checked",!0):A.value===u.attributes.xfaOff&&o.removeAttribute("checked"),l==="print")break;o.addEventListener("change",T=>{c.setValue(b,{value:T.target.checked?T.target.getAttribute("xfaOn"):T.target.getAttribute("xfaOff")})})}else{if(A.value!==null&&o.setAttribute("value",A.value),l==="print")break;o.addEventListener("input",T=>{c.setValue(b,{value:T.target.value})})}break;case"select":if(A.value!==null){o.setAttribute("value",A.value);for(const T of u.children)T.attributes.value===A.value?T.attributes.selected=!0:T.attributes.hasOwnProperty("selected")&&delete T.attributes.selected}o.addEventListener("input",T=>{const R=T.target.options,S=R.selectedIndex===-1?"":R[R.selectedIndex].value;c.setValue(b,{value:S})});break}}static setAttributes({html:o,element:b,storage:u=null,intent:c,linkService:l}){const{attributes:A}=b,T=o instanceof HTMLAnchorElement;A.type==="radio"&&(A.name=`${A.name}-${c}`);for(const[R,S]of Object.entries(A))if(S!=null)switch(R){case"class":S.length&&o.setAttribute(R,S.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",S);break;case"style":Object.assign(o.style,S);break;case"textContent":o.textContent=S;break;default:(!T||R!=="href"&&R!=="newWindow")&&o.setAttribute(R,S)}T&&l.addLinkAttributes(o,A.href,A.newWindow),u&&A.dataId&&this.setupStorage(o,A.dataId,b,u)}static render(o){var P;const b=o.annotationStorage,u=o.linkService,c=o.xfaHtml,l=o.intent||"display",A=document.createElement(c.name);c.attributes&&this.setAttributes({html:A,element:c,intent:l,linkService:u});const T=[[c,-1,A]],R=o.div;if(R.append(A),o.viewport){const x=`matrix(${o.viewport.transform.join(",")})`;R.style.transform=x}l!=="richText"&&R.setAttribute("class","xfaLayer xfaFont");const S=[];for(;T.length>0;){const[x,M,I]=T.at(-1);if(M+1===x.children.length){T.pop();continue}const B=x.children[++T.at(-1)[1]];if(B===null)continue;const{name:O}=B;if(O==="#text"){const C=document.createTextNode(B.value);S.push(C),I.append(C);continue}const v=(P=B==null?void 0:B.attributes)!=null&&P.xmlns?document.createElementNS(B.attributes.xmlns,O):document.createElement(O);if(I.append(v),B.attributes&&this.setAttributes({html:v,element:B,storage:b,intent:l,linkService:u}),B.children&&B.children.length>0)T.push([B,-1,v]);else if(B.value){const C=document.createTextNode(B.value);s.XfaText.shouldBuildText(O)&&S.push(C),v.append(C)}}for(const x of R.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:S}}static update(o){const b=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=b,o.div.hidden=!1}}t.XfaLayer=i},(e,t,n)=>{var c,l,A,T,R,S,P,x,M,I,B,O,v,C,z,$s,E,Us,L,Hs,se,Vs,oe,hs,he,js,Ae,fs,ke,zs,H,Ws,_,qs,f,Gs,k,Ks,W,lt,F,ps,K,Ot,ee,It,ve,gt,me,gs,J,Nt,ue,Xs,we,ms,Be,Ys,qe,Js,ze,_s,be,Dt,ie,mt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var s=n(1),i=n(4),r=n(29),o=n(6),b=n(5);const Te=class Te extends i.AnnotationEditor{constructor(ce){super({...ce,name:"inkEditor"});X(this,z);X(this,E);X(this,L);X(this,se);X(this,oe);X(this,he);X(this,Ae);X(this,ke);X(this,H);X(this,_);X(this,f);X(this,k);X(this,W);X(this,F);X(this,K);X(this,ee);X(this,ve);X(this,me);X(this,J);X(this,qe);X(this,ze);X(this,be);X(this,ie);X(this,c,0);X(this,l,0);X(this,A,this.canvasPointermove.bind(this));X(this,T,this.canvasPointerleave.bind(this));X(this,R,this.canvasPointerup.bind(this));X(this,S,this.canvasPointerdown.bind(this));X(this,P,new Path2D);X(this,x,!1);X(this,M,!1);X(this,I,!1);X(this,B,null);X(this,O,0);X(this,v,0);X(this,C,null);this.color=ce.color||null,this.thickness=ce.thickness||null,this.opacity=ce.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ce){i.AnnotationEditor.initialize(ce,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ce,Fe){switch(ce){case s.AnnotationEditorParamsType.INK_THICKNESS:Te._defaultThickness=Fe;break;case s.AnnotationEditorParamsType.INK_COLOR:Te._defaultColor=Fe;break;case s.AnnotationEditorParamsType.INK_OPACITY:Te._defaultOpacity=Fe/100;break}}updateParams(ce,Fe){switch(ce){case s.AnnotationEditorParamsType.INK_THICKNESS:re(this,z,$s).call(this,Fe);break;case s.AnnotationEditorParamsType.INK_COLOR:re(this,E,Us).call(this,Fe);break;case s.AnnotationEditorParamsType.INK_OPACITY:re(this,L,Hs).call(this,Fe);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,Te._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,Te._defaultColor||i.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(Te._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Te._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||Te._defaultColor||i.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Te._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(re(this,K,Ot).call(this),re(this,ee,It).call(this)),this.isAttachedToDOM||(this.parent.add(this),re(this,ve,gt).call(this)),re(this,ie,mt).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,B).disconnect(),ge(this,B,null),super.remove())}setParent(ce){!this.parent&&ce?this._uiManager.removeShouldRescale(this):this.parent&&ce===null&&this._uiManager.addShouldRescale(this),super.setParent(ce)}onScaleChanging(){const[ce,Fe]=this.parentDimensions,Ue=this.width*ce,Me=this.height*Fe;this.setDimensions(Ue,Me)}enableEditMode(){a(this,x)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,S)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,S)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,x)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ge(this,x,!0),this.div.classList.add("disabled"),re(this,ie,mt).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ce){this._focusEventsAllowed&&(super.focusin(ce),this.enableEditMode())}canvasPointerdown(ce){ce.button!==0||!this.isInEditMode()||a(this,x)||(this.setInForeground(),ce.preventDefault(),ce.type!=="mouse"&&this.div.focus(),re(this,he,js).call(this,ce.offsetX,ce.offsetY))}canvasPointermove(ce){ce.preventDefault(),re(this,Ae,fs).call(this,ce.offsetX,ce.offsetY)}canvasPointerup(ce){ce.preventDefault(),re(this,F,ps).call(this,ce)}canvasPointerleave(ce){re(this,F,ps).call(this,ce)}get isResizable(){return!this.isEmpty()&&a(this,x)}render(){if(this.div)return this.div;let ce,Fe;this.width&&(ce=this.x,Fe=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Ze=>{var Pe;return(Pe=this.div)==null?void 0:Pe.setAttribute("aria-label",Ze)});const[Ue,Me,He,je]=re(this,se,Vs).call(this);if(this.setAt(Ue,Me,0,0),this.setDims(He,je),re(this,K,Ot).call(this),this.width){const[Ze,Pe]=this.parentDimensions;this.setAspectRatio(this.width*Ze,this.height*Pe),this.setAt(ce*Ze,Fe*Pe,this.width*Ze,this.height*Pe),ge(this,I,!0),re(this,ve,gt).call(this),this.setDims(this.width*Ze,this.height*Pe),re(this,W,lt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return re(this,ee,It).call(this),this.div}setDimensions(ce,Fe){const Ue=Math.round(ce),Me=Math.round(Fe);if(a(this,O)===Ue&&a(this,v)===Me)return;ge(this,O,Ue),ge(this,v,Me),this.canvas.style.visibility="hidden";const[He,je]=this.parentDimensions;this.width=ce/He,this.height=Fe/je,this.fixAndSetPosition(),a(this,x)&&re(this,me,gs).call(this,ce,Fe),re(this,ve,gt).call(this),re(this,W,lt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ce,Fe,Ue){var te,le,_e;if(ce instanceof r.InkAnnotationElement)return null;const Me=super.deserialize(ce,Fe,Ue);Me.thickness=ce.thickness,Me.color=s.Util.makeHexColor(...ce.color),Me.opacity=ce.opacity;const[He,je]=Me.pageDimensions,Ze=Me.width*He,Pe=Me.height*je,Je=Me.parentScale,$e=ce.thickness/2;ge(Me,x,!0),ge(Me,O,Math.round(Ze)),ge(Me,v,Math.round(Pe));const{paths:q,rect:d,rotation:D}=ce;for(let{bezier:xe}of q){xe=re(te=Te,Be,Ys).call(te,xe,d,D);const Ie=[];Me.paths.push(Ie);let Oe=Je*(xe[0]-$e),Ke=Je*(xe[1]-$e);for(let Le=2,We=xe.length;Le<We;Le+=6){const Ye=Je*(xe[Le]-$e),Qe=Je*(xe[Le+1]-$e),et=Je*(xe[Le+2]-$e),rt=Je*(xe[Le+3]-$e),it=Je*(xe[Le+4]-$e),ot=Je*(xe[Le+5]-$e);Ie.push([[Oe,Ke],[Ye,Qe],[et,rt],[it,ot]]),Oe=it,Ke=ot}const De=re(this,ue,Xs).call(this,Ie);Me.bezierPath2D.push(De)}const G=re(le=Me,ze,_s).call(le);return ge(Me,l,Math.max(i.AnnotationEditor.MIN_SIZE,G[2]-G[0])),ge(Me,c,Math.max(i.AnnotationEditor.MIN_SIZE,G[3]-G[1])),re(_e=Me,me,gs).call(_e,Ze,Pe),Me}serialize(){if(this.isEmpty())return null;const ce=this.getRect(0,0),Fe=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:Fe,thickness:this.thickness,opacity:this.opacity,paths:re(this,qe,Js).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ce),pageIndex:this.pageIndex,rect:ce,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};c=new WeakMap,l=new WeakMap,A=new WeakMap,T=new WeakMap,R=new WeakMap,S=new WeakMap,P=new WeakMap,x=new WeakMap,M=new WeakMap,I=new WeakMap,B=new WeakMap,O=new WeakMap,v=new WeakMap,C=new WeakMap,z=new WeakSet,$s=function(ce){const Fe=this.thickness;this.addCommands({cmd:()=>{this.thickness=ce,re(this,ie,mt).call(this)},undo:()=>{this.thickness=Fe,re(this,ie,mt).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,Us=function(ce){const Fe=this.color;this.addCommands({cmd:()=>{this.color=ce,re(this,W,lt).call(this)},undo:()=>{this.color=Fe,re(this,W,lt).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},L=new WeakSet,Hs=function(ce){ce/=100;const Fe=this.opacity;this.addCommands({cmd:()=>{this.opacity=ce,re(this,W,lt).call(this)},undo:()=>{this.opacity=Fe,re(this,W,lt).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},se=new WeakSet,Vs=function(){const{parentRotation:ce,parentDimensions:[Fe,Ue]}=this;switch(ce){case 90:return[0,Ue,Ue,Fe];case 180:return[Fe,Ue,Fe,Ue];case 270:return[Fe,0,Ue,Fe];default:return[0,0,Fe,Ue]}},oe=new WeakSet,hs=function(){const{ctx:ce,color:Fe,opacity:Ue,thickness:Me,parentScale:He,scaleFactor:je}=this;ce.lineWidth=Me*He/je,ce.lineCap="round",ce.lineJoin="round",ce.miterLimit=10,ce.strokeStyle=`${Fe}${(0,b.opacityToHex)(Ue)}`},he=new WeakSet,js=function(ce,Fe){this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",a(this,T)),this.canvas.addEventListener("pointermove",a(this,A)),this.canvas.addEventListener("pointerup",a(this,R)),this.canvas.removeEventListener("pointerdown",a(this,S)),this.isEditing=!0,a(this,I)||(ge(this,I,!0),re(this,ve,gt).call(this),this.thickness||(this.thickness=Te._defaultThickness),this.color||(this.color=Te._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Te._defaultOpacity)),this.currentPath.push([ce,Fe]),ge(this,M,!1),re(this,oe,hs).call(this),ge(this,C,()=>{re(this,_,qs).call(this),a(this,C)&&window.requestAnimationFrame(a(this,C))}),window.requestAnimationFrame(a(this,C))},Ae=new WeakSet,fs=function(ce,Fe){const[Ue,Me]=this.currentPath.at(-1);if(this.currentPath.length>1&&ce===Ue&&Fe===Me)return;const He=this.currentPath;let je=a(this,P);if(He.push([ce,Fe]),ge(this,M,!0),He.length<=2){je.moveTo(...He[0]),je.lineTo(ce,Fe);return}He.length===3&&(ge(this,P,je=new Path2D),je.moveTo(...He[0])),re(this,f,Gs).call(this,je,...He.at(-3),...He.at(-2),ce,Fe)},ke=new WeakSet,zs=function(){if(this.currentPath.length===0)return;const ce=this.currentPath.at(-1);a(this,P).lineTo(...ce)},H=new WeakSet,Ws=function(ce,Fe){ge(this,C,null),ce=Math.min(Math.max(ce,0),this.canvas.width),Fe=Math.min(Math.max(Fe,0),this.canvas.height),re(this,Ae,fs).call(this,ce,Fe),re(this,ke,zs).call(this);let Ue;if(this.currentPath.length!==1)Ue=re(this,k,Ks).call(this);else{const Pe=[ce,Fe];Ue=[[Pe,Pe.slice(),Pe.slice(),Pe]]}const Me=a(this,P),He=this.currentPath;this.currentPath=[],ge(this,P,new Path2D);const je=()=>{this.allRawPaths.push(He),this.paths.push(Ue),this.bezierPath2D.push(Me),this.rebuild()},Ze=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(re(this,K,Ot).call(this),re(this,ee,It).call(this)),re(this,ie,mt).call(this))};this.addCommands({cmd:je,undo:Ze,mustExec:!0})},_=new WeakSet,qs=function(){if(!a(this,M))return;ge(this,M,!1);const ce=Math.ceil(this.thickness*this.parentScale),Fe=this.currentPath.slice(-3),Ue=Fe.map(je=>je[0]),Me=Fe.map(je=>je[1]);Math.min(...Ue)-ce,Math.max(...Ue)+ce,Math.min(...Me)-ce,Math.max(...Me)+ce;const{ctx:He}=this;He.save(),He.clearRect(0,0,this.canvas.width,this.canvas.height);for(const je of this.bezierPath2D)He.stroke(je);He.stroke(a(this,P)),He.restore()},f=new WeakSet,Gs=function(ce,Fe,Ue,Me,He,je,Ze){const Pe=(Fe+Me)/2,Je=(Ue+He)/2,$e=(Me+je)/2,q=(He+Ze)/2;ce.bezierCurveTo(Pe+2*(Me-Pe)/3,Je+2*(He-Je)/3,$e+2*(Me-$e)/3,q+2*(He-q)/3,$e,q)},k=new WeakSet,Ks=function(){const ce=this.currentPath;if(ce.length<=2)return[[ce[0],ce[0],ce.at(-1),ce.at(-1)]];const Fe=[];let Ue,[Me,He]=ce[0];for(Ue=1;Ue<ce.length-2;Ue++){const[d,D]=ce[Ue],[G,te]=ce[Ue+1],le=(d+G)/2,_e=(D+te)/2,xe=[Me+2*(d-Me)/3,He+2*(D-He)/3],Ie=[le+2*(d-le)/3,_e+2*(D-_e)/3];Fe.push([[Me,He],xe,Ie,[le,_e]]),[Me,He]=[le,_e]}const[je,Ze]=ce[Ue],[Pe,Je]=ce[Ue+1],$e=[Me+2*(je-Me)/3,He+2*(Ze-He)/3],q=[Pe+2*(je-Pe)/3,Je+2*(Ze-Je)/3];return Fe.push([[Me,He],$e,q,[Pe,Je]]),Fe},W=new WeakSet,lt=function(){if(this.isEmpty()){re(this,J,Nt).call(this);return}re(this,oe,hs).call(this);const{canvas:ce,ctx:Fe}=this;Fe.setTransform(1,0,0,1,0,0),Fe.clearRect(0,0,ce.width,ce.height),re(this,J,Nt).call(this);for(const Ue of this.bezierPath2D)Fe.stroke(Ue)},F=new WeakSet,ps=function(ce){this.canvas.removeEventListener("pointerleave",a(this,T)),this.canvas.removeEventListener("pointermove",a(this,A)),this.canvas.removeEventListener("pointerup",a(this,R)),this.canvas.addEventListener("pointerdown",a(this,S)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)},10),re(this,H,Ws).call(this,ce.offsetX,ce.offsetY),this.addToAnnotationStorage(),this.setInBackground()},K=new WeakSet,Ot=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ce=>{var Fe;return(Fe=this.canvas)==null?void 0:Fe.setAttribute("aria-label",ce)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ee=new WeakSet,It=function(){ge(this,B,new ResizeObserver(ce=>{const Fe=ce[0].contentRect;Fe.width&&Fe.height&&this.setDimensions(Fe.width,Fe.height)})),a(this,B).observe(this.div)},ve=new WeakSet,gt=function(){if(!a(this,I))return;const[ce,Fe]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ce),this.canvas.height=Math.ceil(this.height*Fe),re(this,J,Nt).call(this)},me=new WeakSet,gs=function(ce,Fe){const Ue=re(this,be,Dt).call(this),Me=(ce-Ue)/a(this,l),He=(Fe-Ue)/a(this,c);this.scaleFactor=Math.min(Me,He)},J=new WeakSet,Nt=function(){const ce=re(this,be,Dt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ce,this.translationY*this.scaleFactor+ce)},ue=new WeakSet,Xs=function(ce){const Fe=new Path2D;for(let Ue=0,Me=ce.length;Ue<Me;Ue++){const[He,je,Ze,Pe]=ce[Ue];Ue===0&&Fe.moveTo(...He),Fe.bezierCurveTo(je[0],je[1],Ze[0],Ze[1],Pe[0],Pe[1])}return Fe},we=new WeakSet,ms=function(ce,Fe,Ue){const[Me,He,je,Ze]=Fe;switch(Ue){case 0:for(let Pe=0,Je=ce.length;Pe<Je;Pe+=2)ce[Pe]+=Me,ce[Pe+1]=Ze-ce[Pe+1];break;case 90:for(let Pe=0,Je=ce.length;Pe<Je;Pe+=2){const $e=ce[Pe];ce[Pe]=ce[Pe+1]+Me,ce[Pe+1]=$e+He}break;case 180:for(let Pe=0,Je=ce.length;Pe<Je;Pe+=2)ce[Pe]=je-ce[Pe],ce[Pe+1]+=He;break;case 270:for(let Pe=0,Je=ce.length;Pe<Je;Pe+=2){const $e=ce[Pe];ce[Pe]=je-ce[Pe+1],ce[Pe+1]=Ze-$e}break;default:throw new Error("Invalid rotation")}return ce},Be=new WeakSet,Ys=function(ce,Fe,Ue){const[Me,He,je,Ze]=Fe;switch(Ue){case 0:for(let Pe=0,Je=ce.length;Pe<Je;Pe+=2)ce[Pe]-=Me,ce[Pe+1]=Ze-ce[Pe+1];break;case 90:for(let Pe=0,Je=ce.length;Pe<Je;Pe+=2){const $e=ce[Pe];ce[Pe]=ce[Pe+1]-He,ce[Pe+1]=$e-Me}break;case 180:for(let Pe=0,Je=ce.length;Pe<Je;Pe+=2)ce[Pe]=je-ce[Pe],ce[Pe+1]-=He;break;case 270:for(let Pe=0,Je=ce.length;Pe<Je;Pe+=2){const $e=ce[Pe];ce[Pe]=Ze-ce[Pe+1],ce[Pe+1]=je-$e}break;default:throw new Error("Invalid rotation")}return ce},qe=new WeakSet,Js=function(ce,Fe,Ue,Me){var Je,$e;const He=[],je=this.thickness/2,Ze=ce*Fe+je,Pe=ce*Ue+je;for(const q of this.paths){const d=[],D=[];for(let G=0,te=q.length;G<te;G++){const[le,_e,xe,Ie]=q[G],Oe=ce*le[0]+Ze,Ke=ce*le[1]+Pe,De=ce*_e[0]+Ze,Le=ce*_e[1]+Pe,We=ce*xe[0]+Ze,Ye=ce*xe[1]+Pe,Qe=ce*Ie[0]+Ze,et=ce*Ie[1]+Pe;G===0&&(d.push(Oe,Ke),D.push(Oe,Ke)),d.push(De,Le,We,Ye,Qe,et),D.push(De,Le),G===te-1&&D.push(Qe,et)}He.push({bezier:re(Je=Te,we,ms).call(Je,d,Me,this.rotation),points:re($e=Te,we,ms).call($e,D,Me,this.rotation)})}return He},ze=new WeakSet,_s=function(){let ce=1/0,Fe=-1/0,Ue=1/0,Me=-1/0;for(const He of this.paths)for(const[je,Ze,Pe,Je]of He){const $e=s.Util.bezierBoundingBox(...je,...Ze,...Pe,...Je);ce=Math.min(ce,$e[0]),Ue=Math.min(Ue,$e[1]),Fe=Math.max(Fe,$e[2]),Me=Math.max(Me,$e[3])}return[ce,Ue,Fe,Me]},be=new WeakSet,Dt=function(){return a(this,x)?Math.ceil(this.thickness*this.parentScale):0},ie=new WeakSet,mt=function(ce=!1){if(this.isEmpty())return;if(!a(this,x)){re(this,W,lt).call(this);return}const Fe=re(this,ze,_s).call(this),Ue=re(this,be,Dt).call(this);ge(this,l,Math.max(i.AnnotationEditor.MIN_SIZE,Fe[2]-Fe[0])),ge(this,c,Math.max(i.AnnotationEditor.MIN_SIZE,Fe[3]-Fe[1]));const Me=Math.ceil(Ue+a(this,l)*this.scaleFactor),He=Math.ceil(Ue+a(this,c)*this.scaleFactor),[je,Ze]=this.parentDimensions;this.width=Me/je,this.height=He/Ze,this.setAspectRatio(Me,He);const Pe=this.translationX,Je=this.translationY;this.translationX=-Fe[0],this.translationY=-Fe[1],re(this,ve,gt).call(this),re(this,W,lt).call(this),ge(this,O,Me),ge(this,v,He),this.setDims(Me,He);const $e=ce?Ue/this.scaleFactor/2:0;this.translate(Pe-this.translationX-$e,Je-this.translationY-$e)},X(Te,ue),X(Te,we),X(Te,Be),nt(Te,"_defaultColor",null),nt(Te,"_defaultOpacity",1),nt(Te,"_defaultThickness",1),nt(Te,"_type","ink");let u=Te;t.InkEditor=u},(e,t,n)=>{var u,c,l,A,T,R,S,P,x,M,I,St,O,wt,C,Lt,N,bs,j,Qs,Z,Zs,V,ys,de,Bt,Y,en;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var s=n(1),i=n(4),r=n(6),o=n(29);const Se=class Se extends i.AnnotationEditor{constructor(H){super({...H,name:"stampEditor"});X(this,I);X(this,O);X(this,C);X(this,N);X(this,j);X(this,Z);X(this,V);X(this,de);X(this,Y);X(this,u,null);X(this,c,null);X(this,l,null);X(this,A,null);X(this,T,null);X(this,R,null);X(this,S,null);X(this,P,null);X(this,x,!1);X(this,M,!1);ge(this,A,H.bitmapUrl),ge(this,T,H.bitmapFile)}static initialize(H){i.AnnotationEditor.initialize(H)}static get supportedTypes(){const H=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",H.map(m=>`image/${m}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(H){return this.supportedTypes.includes(H)}static paste(H,m){m.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:H.getAsFile()})}remove(){var H,m;a(this,c)&&(ge(this,u,null),this._uiManager.imageManager.deleteId(a(this,c)),(H=a(this,R))==null||H.remove(),ge(this,R,null),(m=a(this,S))==null||m.disconnect(),ge(this,S,null)),super.remove()}rebuild(){if(!this.parent){a(this,c)&&re(this,C,Lt).call(this);return}super.rebuild(),this.div!==null&&(a(this,c)&&re(this,C,Lt).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,l)||a(this,u)||a(this,A)||a(this,T))}get isResizable(){return!0}render(){if(this.div)return this.div;let H,m;if(this.width&&(H=this.x,m=this.y),super.render(),this.div.hidden=!0,a(this,u)?re(this,N,bs).call(this):re(this,C,Lt).call(this),this.width){const[_,g]=this.parentDimensions;this.setAt(H*_,m*g,this.width*_,this.height*g)}return this.div}static deserialize(H,m,_){if(H instanceof o.StampAnnotationElement)return null;const g=super.deserialize(H,m,_),{rect:f,bitmapUrl:y,bitmapId:k,isSvg:$,accessibilityData:W}=H;k&&_.imageManager.isValidId(k)?ge(g,c,k):ge(g,A,y),ge(g,x,$);const[w,F]=g.pageDimensions;return g.width=(f[2]-f[0])/w,g.height=(f[3]-f[1])/F,W&&(g.altTextData=W),g}serialize(H=!1,m=null){if(this.isEmpty())return null;const _={annotationType:s.AnnotationEditorType.STAMP,bitmapId:a(this,c),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,x),structTreeParentId:this._structTreeParentId};if(H)return _.bitmapUrl=re(this,de,Bt).call(this,!0),_.accessibilityData=this.altTextData,_;const{decorative:g,altText:f}=this.altTextData;if(!g&&f&&(_.accessibilityData={type:"Figure",alt:f}),m===null)return _;m.stamps||(m.stamps=new Map);const y=a(this,x)?(_.rect[2]-_.rect[0])*(_.rect[3]-_.rect[1]):null;if(!m.stamps.has(a(this,c)))m.stamps.set(a(this,c),{area:y,serialized:_}),_.bitmap=re(this,de,Bt).call(this,!1);else if(a(this,x)){const k=m.stamps.get(a(this,c));y>k.area&&(k.area=y,k.serialized.bitmap.close(),k.serialized.bitmap=re(this,de,Bt).call(this,!1))}return _}};u=new WeakMap,c=new WeakMap,l=new WeakMap,A=new WeakMap,T=new WeakMap,R=new WeakMap,S=new WeakMap,P=new WeakMap,x=new WeakMap,M=new WeakMap,I=new WeakSet,St=function(H,m=!1){if(!H){this.remove();return}ge(this,u,H.bitmap),m||(ge(this,c,H.id),ge(this,x,H.isSvg)),re(this,N,bs).call(this)},O=new WeakSet,wt=function(){ge(this,l,null),this._uiManager.enableWaiting(!1),a(this,R)&&this.div.focus()},C=new WeakSet,Lt=function(){if(a(this,c)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,c)).then(m=>re(this,I,St).call(this,m,!0)).finally(()=>re(this,O,wt).call(this));return}if(a(this,A)){const m=a(this,A);ge(this,A,null),this._uiManager.enableWaiting(!0),ge(this,l,this._uiManager.imageManager.getFromUrl(m).then(_=>re(this,I,St).call(this,_)).finally(()=>re(this,O,wt).call(this)));return}if(a(this,T)){const m=a(this,T);ge(this,T,null),this._uiManager.enableWaiting(!0),ge(this,l,this._uiManager.imageManager.getFromFile(m).then(_=>re(this,I,St).call(this,_)).finally(()=>re(this,O,wt).call(this)));return}const H=document.createElement("input");H.type="file",H.accept=Se.supportedTypesStr,ge(this,l,new Promise(m=>{H.addEventListener("change",async()=>{if(!H.files||H.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const _=await this._uiManager.imageManager.getFromFile(H.files[0]);re(this,I,St).call(this,_)}m()}),H.addEventListener("cancel",()=>{this.remove(),m()})}).finally(()=>re(this,O,wt).call(this))),H.click()},N=new WeakSet,bs=function(){const{div:H}=this;let{width:m,height:_}=a(this,u);const[g,f]=this.pageDimensions,y=.75;if(this.width)m=this.width*g,_=this.height*f;else if(m>y*g||_>y*f){const w=Math.min(y*g/m,y*f/_);m*=w,_*=w}const[k,$]=this.parentDimensions;this.setDims(m*k/g,_*$/f),this._uiManager.enableWaiting(!1);const W=ge(this,R,document.createElement("canvas"));H.append(W),H.hidden=!1,re(this,V,ys).call(this,m,_),re(this,Y,en).call(this),a(this,M)||(this.parent.addUndoableEditor(this),ge(this,M,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},j=new WeakSet,Qs=function(H,m){var y;const[_,g]=this.parentDimensions;this.width=H/_,this.height=m/g,this.setDims(H,m),(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,P)!==null&&clearTimeout(a(this,P)),ge(this,P,setTimeout(()=>{ge(this,P,null),re(this,V,ys).call(this,H,m)},200))},Z=new WeakSet,Zs=function(H,m){const{width:_,height:g}=a(this,u);let f=_,y=g,k=a(this,u);for(;f>2*H||y>2*m;){const $=f,W=y;f>2*H&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2)),y>2*m&&(y=y>=16384?Math.floor(y/2)-1:Math.ceil(y/2));const w=new OffscreenCanvas(f,y);w.getContext("2d").drawImage(k,0,0,$,W,0,0,f,y),k=w.transferToImageBitmap()}return k},V=new WeakSet,ys=function(H,m){H=Math.ceil(H),m=Math.ceil(m);const _=a(this,R);if(!_||_.width===H&&_.height===m)return;_.width=H,_.height=m;const g=a(this,x)?a(this,u):re(this,Z,Zs).call(this,H,m),f=_.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(g,0,0,g.width,g.height,0,0,H,m)},de=new WeakSet,Bt=function(H){if(H){if(a(this,x)){const g=this._uiManager.imageManager.getSvgUrl(a(this,c));if(g)return g}const m=document.createElement("canvas");return{width:m.width,height:m.height}=a(this,u),m.getContext("2d").drawImage(a(this,u),0,0),m.toDataURL()}if(a(this,x)){const[m,_]=this.pageDimensions,g=Math.round(this.width*m*r.PixelsPerInch.PDF_TO_CSS_UNITS),f=Math.round(this.height*_*r.PixelsPerInch.PDF_TO_CSS_UNITS),y=new OffscreenCanvas(g,f);return y.getContext("2d").drawImage(a(this,u),0,0,a(this,u).width,a(this,u).height,0,0,g,f),y.transferToImageBitmap()}return structuredClone(a(this,u))},Y=new WeakSet,en=function(){ge(this,S,new ResizeObserver(H=>{const m=H[0].contentRect;m.width&&m.height&&re(this,j,Qs).call(this,m.width,m.height)})),a(this,S).observe(this.div)},nt(Se,"_type","stamp");let b=Se;t.StampEditor=b}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return s.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return u.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return s.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),s=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),r=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),b=__w_pdfjs_require__(29),u=__w_pdfjs_require__(14),c=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker="/assets/pdf.worker.min-feabdf30.js",PdfModal_vue_vue_type_style_index_0_scoped_8f19fac4_lang="",_hoisted_1$2={key:0,class:"modal"},_hoisted_2$2={class:"modal-content"},_sfc_main$2={__name:"PdfModal",props:{pdfUrl:{type:String,required:!0},modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const s=e;pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const i=ref(!1),r=ref(null),o=async()=>{i.value=!0,n("update:modelValue",!0),await nextTick(),await u(s.pdfUrl)},b=()=>{i.value=!1,n("update:modelValue",!1),r.value&&(r.value.innerHTML="")};watch(()=>s.modelValue,c=>{c?o():b()});const u=async c=>{if(r.value){r.value.innerHTML="";try{const A=await pdfExports.getDocument(c).promise;for(let T=1;T<=A.numPages;T++){const R=await A.getPage(T),S=R.getViewport({scale:1.5}),P=document.createElement("canvas"),x=P.getContext("2d");P.height=S.height,P.width=S.width,r.value.appendChild(P),await R.render({canvasContext:x,viewport:S}).promise}}catch(l){console.error("PDF load error:",l)}}};return t({open:o,close:b}),(c,l)=>i.value?(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("button",{onClick:b,class:"close-btn"},"Close"),createBaseVNode("div",{ref_key:"viewerRef",ref:r,class:"pdf-viewer"},null,512)])])):createCommentVNode("",!0)}},PdfModal=_export_sfc(_sfc_main$2,[["__scopeId","data-v-8f19fac4"]]),MyCollection_vue_vue_type_style_index_0_lang="",_sfc_main$1={components:{theHeader,theFooter,sidebar,PdfModal},data(){return{products:[],selectedItem:null,isModalVisible:!1,pdfUrl:"https://cdn.shopify.com/s/files/1/2081/8163/files/005-SUNNY-MEADOWS-WOODLAND-SCHOOL-Free-Childrens-Book-By-Monkey-Pen.pdf?v=1589846892"}},created(){const e=localStorage.getItem("userId"),t=localStorage.getItem("token");instance.get(`/ebook/getPurchasedBooks/${e}`,{headers:{Authorization:`Bearer ${t}`}}).then(n=>{this.products=n.data})},methods:{openIframe(e){this.pdfUrl=e.file_url,this.isModalVisible=!0},closeIframe(){this.selectedItem=null}}},_hoisted_1$1={class:"container menu-wrap",style:{"min-width":"2000px"}},_hoisted_2$1=createBaseVNode("div",{class:"product-title"},[createBaseVNode("h3",null,"My Collections")],-1),_hoisted_3$1={class:"card-products"},_hoisted_4$1={class:"product-list",style:{display:"flex"}},_hoisted_5$1=["onClick"],_hoisted_6$1=["src"],_hoisted_7$1={class:"card-info"},_hoisted_8$1={style:{"font-size":"1.3rem","font-weight":"600",color:"blue"}},_hoisted_9$1={style:{color:"black","font-size":"1.5rem"}},_hoisted_10$1={class:"iframe-container"},_hoisted_11=["src"];function _sfc_render$1(e,t,n,s,i,r){const o=resolveComponent("theHeader"),b=resolveComponent("PdfModal"),u=resolveComponent("theFooter");return openBlock(),createElementBlock(Fragment,null,[i.isModalVisible?createCommentVNode("",!0):(openBlock(),createBlock(o,{key:0})),createBaseVNode("div",_hoisted_1$1,[createBaseVNode("div",null,[_hoisted_2$1,createVNode(b,{modelValue:i.isModalVisible,"onUpdate:modelValue":t[0]||(t[0]=c=>i.isModalVisible=c),pdfUrl:i.pdfUrl},null,8,["modelValue","pdfUrl"]),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",_hoisted_4$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.products,(c,l)=>(openBlock(),createElementBlock("div",{key:c.id},[createBaseVNode("div",{class:"card",onClick:A=>r.openIframe(c)},[createBaseVNode("img",{class:"card-thumb",src:c.imgUrl},null,8,_hoisted_6$1),createBaseVNode("div",_hoisted_7$1,[createBaseVNode("h6",_hoisted_8$1,toDisplayString(c.title),1),createBaseVNode("p",_hoisted_9$1," $ "+toDisplayString(c.price),1)])],8,_hoisted_5$1)]))),128)),i.selectedItem?(openBlock(),createElementBlock("div",{key:0,class:"iframe-overlay",onClick:t[2]||(t[2]=withModifiers((...c)=>r.closeIframe&&r.closeIframe(...c),["self"]))},[createBaseVNode("div",_hoisted_10$1,[createBaseVNode("iframe",{src:i.selectedItem.file_url,width:"100%",height:"100%",frameborder:"0"},null,8,_hoisted_11),createBaseVNode("button",{class:"close-btn",onClick:t[1]||(t[1]=(...c)=>r.closeIframe&&r.closeIframe(...c))},"×")])])):createCommentVNode("",!0)])])])]),createVNode(u)],64)}const MyCollection=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),Cart_vue_vue_type_style_index_0_scoped_02e15c2e_lang="",_sfc_main={name:"BuyPoint",components:{theHeader,theFooter},data(){return{userId:"",dollarAmount:5}},computed:{calculatedPoints(){return this.dollarAmount*20}},created(){this.userId=localStorage.getItem("userId")||""},mounted(){if(window.paypal)this.renderPayPalButton();else{const e=setInterval(()=>{window.paypal&&(clearInterval(e),this.renderPayPalButton())},100)}},methods:{renderPayPalButton(){const e=localStorage.getItem("token");window.paypal.Buttons({createOrder:(t,n)=>n.order.create({purchase_units:[{amount:{value:this.dollarAmount.toFixed(2)}}]}),onApprove:(t,n)=>n.order.capture().then(s=>{instance.put(`/ebook/updateUserBalance/${this.userId}`,{point:this.calculatedPoints},{headers:{Authorization:`Bearer ${e}`}}).then(i=>{console.log("Balance updated:",i.data.balance),alert(`Payment successful! ${s.payer.name.given_name}, you've purchased ${this.calculatedPoints} points.`),location.reload()}).catch(i=>{console.error("Error updating balance:",i)})})}).render(this.$refs.paypalContainer)}}},_withScopeId=e=>(pushScopeId("data-v-02e15c2e"),e=e(),popScopeId(),e),_hoisted_1={class:"main-wrapper"},_hoisted_2={class:"checkout-container"},_hoisted_3=_withScopeId(()=>createBaseVNode("h1",{class:"main-title"},"Buy Points",-1)),_hoisted_4=_withScopeId(()=>createBaseVNode("h2",{class:"conversion-info"},"1 USD = 20 Points",-1)),_hoisted_5={class:"input-section"},_hoisted_6=_withScopeId(()=>createBaseVNode("label",{for:"amount-input"},"Enter the amount in USD:",-1)),_hoisted_7={class:"points-display"},_hoisted_8={class:"payment-section"},_hoisted_9=_withScopeId(()=>createBaseVNode("h2",null,"Pay with PayPal or Visa",-1)),_hoisted_10={ref:"paypalContainer",class:"paypal-button-wrapper"};function _sfc_render(e,t,n,s,i,r){const o=resolveComponent("theHeader"),b=resolveComponent("theFooter");return openBlock(),createElementBlock("div",null,[createVNode(o),createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[_hoisted_3,_hoisted_4,createBaseVNode("div",_hoisted_5,[_hoisted_6,withDirectives(createBaseVNode("input",{id:"amount-input",type:"number",min:"1","onUpdate:modelValue":t[0]||(t[0]=u=>i.dollarAmount=u),placeholder:"Example: 10"},null,512),[[vModelText,i.dollarAmount,void 0,{number:!0}]]),createBaseVNode("p",_hoisted_7,[createTextVNode(" You will receive "),createBaseVNode("strong",null,toDisplayString(r.calculatedPoints),1),createTextVNode(" points ")])]),createBaseVNode("div",_hoisted_8,[_hoisted_9,createBaseVNode("div",_hoisted_10,null,512)])])]),createVNode(b)])}const Cart=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-02e15c2e"]]),routes=[{path:"/",component:index1,meta:{scrollToTop:!0}},{path:"/login",component:index2,meta:{scrollToTop:!0}},{path:"/offerProduct/:id",name:"offerProduct",component:offerProduct,meta:{scrollToTop:!0}},{path:"/collections/MyCollection",component:MyCollection,meta:{scrollToTop:!0}},{path:"/offerProduct/cart",component:Cart,meta:{scrollToTop:!0}}],router=createRouter({history:createWebHistory("/"),routes});router.beforeEach((e,t,n)=>{e.meta.scrollToTop&&window.scrollTo(0,0),n()});createApp(App).use(router).mount("#app");
